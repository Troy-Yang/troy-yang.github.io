[{"title":"Indie hacker æ–°æ„Ÿ","url":"/2024/01/27/indie-hacker-wordpress/","content":"***\n\n## Indie hacker\nå¦‚æœç»å¸¸é€›æ¨ç‰¹çš„è¯ï¼Œå¯èƒ½å¸¸å¸¸å¬åˆ°Indie Hacker è¿™ä¸ªè¯ï¼Œå¯åˆ«è®¤ä¸ºæ˜¯ä»€ä¹ˆå°åº¦é»‘å®¢å‘¢ï¼ŒåŸæ„æ˜¯æŒ‡ç‹¬ç«‹å¼€å‘è€…ï¼ŒæŒ‡ä¸€ä¸ªäººæˆ–è€…ä¸¤ä¸‰ä¸ªäººçš„å°å›¢é˜ŸåŒ…å¹²å…¨éƒ¨çš„å¼€å‘åŠè¿è¥è½¯ä»¶äº§å“ã€‚\n\n@tibo_maker (æœ‰ç‚¹ä¼ å¥‡ï¼Œä¸€ä¸ªäº§å“ä»¥ä¸€å¹´ä¸€åƒä¸‡ç¾é‡‘å–ç»™äº†ä»–é«˜ä¸­åŒå­¦ï¼Œå¹¶ä¸”æ›¾ç»å››ä¸ªæœˆship äº†11 ä¸ªäº§å“)\n@marc_louvionï¼ˆå››äº”ä¸ªäº§å“ï¼Œèƒ½åšåˆ° 50K+ çš„MRRï¼Œé‡ç‚¹æ¨èï¼‰\n@levelsio ï¼ˆé«˜äº§ï¼‰\n@luosays ï¼ˆå›½äº§å‡ºæµ·ï¼Œæœ‰äº›æ„è§æŒºä¸­è‚¯ï¼‰\n\n![image](https://images.troyyang.com/2024-01-27-indie-hacker.png)\n\næˆ‘ä¸ªäººåº”è¯¥ä¹Ÿç®—Indie Hackerå§ï¼Œè™½ç„¶æ˜¯å…¼èŒçš„ï¼Œä½†ä¹Ÿç®—æ˜¯ä»äº§å“æ„æ€ï¼ŒUX è®¾è®¡ï¼Œå¼€å‘ï¼Œåˆ°è¿è¥ä¸€æ¡çº¿èµ°é€šï¼Œç®—ä¸€ç®—ç°åœ¨æ‰‹ä¸Šå‘å¸ƒäº†ä¸¤ä¸ªæ’ä»¶ï¼Œå¹¶ä¸”éƒ½è¿˜æœ‰ä»˜è´¹ç”¨æˆ·ï¼ˆä¸€ä¸ª$60 çš„MRRï¼Œå¦ä¸€ä¸ª$20MRR ï¼‰ã€‚è™½è¯´ä¸èƒ½ç»™è‡ªå·±å¸¦æ¥å¤šå¤§çš„æ”¶å…¥ï¼Œä½†èƒ½æŠŠè‡ªå·±æƒ³æ³•å˜ç°çš„åŒæ—¶ï¼Œèƒ½ä½“éªŒä¸åŒçš„è§’è‰²ï¼Œå¹¶å¶å°”æ”¶åˆ°ç¡åæ”¶å…¥çš„é‚®ä»¶ï¼Œè¿˜æ˜¯ä¸€ä»¶å¾ˆç¾å¦™çš„äº‹æƒ…ã€‚\n\n## Stripe Elementor\nå»å¹´å¹´ä¸­çš„æ—¶å€™å‘å¸ƒäº†ç¬¬äºŒæ¬¾ wordpressæ’ä»¶ï¼Œç®—åˆ°ç°åœ¨ï¼ŒåŠå¹´æ—¶é—´ï¼Œæ”¶è·åˆ°äº†7ä¸ªä»˜è´¹ç”¨æˆ·å’Œ 50+ åˆ°ç”¨æˆ·å®‰è£…ã€‚ç›¸å¯¹äºç¬¬ä¸€æ¬¾æ’ä»¶ï¼Œè¿™ä¸€æ¬¾æˆ‘ä¸ªäººè§‰å¾—æ›´è´´è¿‘ç”¨æˆ·ï¼Œå¹¶ä¸”å®ç”¨æ•ˆæœæ›´æ˜æ˜¾ï¼Œç«äº‰åŠ›æ›´å¼ºï¼Œå¼€å‘å’Œæ„æ€æ—¶é—´ä¹Ÿæ›´å¿«æ·çš„å°±å®Œæˆäº†ï¼Œè¿™å°±æ˜¯å¾ˆå¤§çš„è¿›æ­¥ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ’ä»¶å®åœ¨æŠ•å…¥äº†å¤ªå¤šï¼Œå‘ä¹Ÿè¸©äº†å¤ªå¤šã€‚\n\nä¸¾ä¸€äº›ä¾‹å­ï¼š1. å­¦ä¹ æˆæœ¬ï¼‰ï¼Œå› ä¸ºæ˜¯ç¬¬ä¸€ä¸ªè½¯ä»¶ï¼Œä»ç€æ‰‹å‡†å¤‡åˆ°æœ€åç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ŒèŠ±äº†åŠå¹´æ—¶é—´ï¼Œå­¦ä¹ äº†å¾ˆå¤šwordpressçŸ¥è¯†ï¼Œlicense å¹³å°ç®¡ç†ï¼Œå®¢æˆ·ç®¡ç†ï¼Œuiè®¾è®¡ç­‰ç­‰ç­‰ç­‰ï¼Œ2. æŠ€æœ¯é€‰å‹ï¼‰ï¼Œé€‰æ‹©çš„æ˜¯Reactjs å’Œ git submodules æ¥æ„å»ºé¡¹ç›®ï¼ŒåŸæœ¬çš„åˆå¿ƒæ˜¯å……åˆ†åˆ©ç”¨reactå¼€å‘å‰ç«¯çš„çµæ´»æ€§ï¼Œå¯äº‹å®è¯æ˜æˆ‘æ ¹æœ¬ä¸éœ€è¦å¦‚æ­¤çµæ´»ï¼Œä¹Ÿä¸éœ€è¦è€ƒè™‘ä»Šåå…¶ä»–é¡¹ç›®å¯¹è¿™é‡Œçš„å¤ç”¨æ€§ï¼Œåè€Œæ˜¯ä¸¢å¤±äº†wordpress æœ¬èº«å¹³å°å¼€å‘çš„ä¾¿æ·æ€§ã€‚æ‰€ä»¥ç¬¬äºŒä¸ªæ’ä»¶ï¼Œæˆ‘æœæ–­é€‰æ‹©äº†ç”¨jquery + tailwindcss 3. äº§å“æ„æ€ï¼‰ï¼Œç¬¬ä¸€ä¸ªæ’ä»¶çš„æ ¸å¿ƒæƒ³æ³•æ˜¯æä¾›å„ç§æ”¯ä»˜çš„ç‹¬ç«‹ UIç»„ä»¶ï¼Œå¯äº‹å®è¯æ˜ï¼Œwordpress ç»å¤§å¤šæ•°ç”¨æˆ·æ ¹æœ¬ä¸éœ€è¦è¿™ç§æ”¯ä»˜ç»„ä»¶ï¼Œä»–éœ€è¦çš„æ˜¯æ¯”å¦‚woocommerce checkout é¡µé¢çš„stripe é›†æˆï¼Œåˆæˆ–è€…æ˜¯contact form 7 çš„stripeæ”¯ä»˜æ”¯æŒï¼Œè¿™äº›æ‰æ˜¯ç”¨æˆ·æ”¯ä»˜çš„å¤§éƒ¨åˆ†storyï¼Œæ­£æ˜¯åŸºäºè¿™æ ·ï¼Œç¬¬äºŒæ¬¾æ’ä»¶å°±åªæ˜¯åšäº†åŸºäºelementor form çš„æ”¯ä»˜é›†æˆã€‚äº‹å®è¯æ˜ï¼Œè¿™ä¸€æ¬¡æ’­å‡ºå»çš„ç§å­ï¼Œå‘èŠ½æˆé•¿çš„é€Ÿåº¦è‡³å°‘æ¯”ç¬¬ä¸€æ¬¾å¿«äº†ä¸¤å€ï¼\n\n## å‰äº”ä¸ªç”¨æˆ·æ˜¯ä½ çš„äº§å“ç»ç†\nè¿™å¥è¯åœ¨ç¬¬äºŒæ¬¾æ’ä»¶é‡Œæ·±æ·±ä½“ä¼šåˆ°äº†ï¼Œè¿˜è®°å¾—å‘å¸ƒäº†ä¸¤ä¸ªæœˆåï¼Œè¿æ¥äº†ç¬¬ä¸€ä¸ªä»˜è´¹ç”¨æˆ·ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªæŒ‘æˆ˜ï¼š æ”¶åˆ°ä»˜è´¹é€šçŸ¥åå¼€å¿ƒä¸è¿‡ä¸€ä¸ªå°æ—¶ï¼Œå°±åˆæ”¶åˆ°äº†é€€è´¹é€šçŸ¥ï¼ŒåŸå› æ˜¯å®‰è£…pro ç‰ˆæœ¬åï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚å³ä¾¿å¾ˆå¿«ä¿®å¤äº†è¿™ä¸ªç¯å¢ƒå¯¼è‡´çš„é—®é¢˜ï¼Œä½†æ—©å·²æ— æ³•æŒ½å›å®¢æˆ·ã€‚å¯¹äºé€€è´¹ï¼Œæˆ‘å¹¶æ²¡æœ‰å¤ªè¿‡æ²®ä¸§ï¼Œå› ä¸ºå‰ä¸€ä¸ªäº§å“çš„é€€è´¹è¯·æ±‚ä¹Ÿæœ‰å¥½å‡ æ¬¡ï¼Œä½†è¿™æ¬¡æ˜¯è®°ä½äº†åˆ«è¢«å‘å¸ƒå‰çš„å…´å¥‹å†²æ˜å¤´è„‘ï¼ŒåŠ¡å¿…ä¿è¯è¶³å¤Ÿæµ‹è¯•ã€‚\n\næ²‰å¯‚äº†ä¸€ä¸ªæœˆåï¼Œè¿æ¥äº†çœŸæ­£çš„æ¥è‡ªæ³•å›½çš„ä»˜è´¹ç”¨æˆ·ï¼Œå®¢æˆ·æ˜¯ä¸€ä¸ªå¼€å‘å…¬å¸çš„æ€»ç›‘ï¼Œåœ¨ä½¿ç”¨æ’ä»¶è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å‡ å¤„å¼‚å¸¸ä»¥åŠä¸€ä¸ªéœ€æ±‚ç¼ºå¤±ï¼Œæ‰€ä»¥å‘é‚®ä»¶è¿‡æ¥è¯·æ±‚å¸®åŠ©ã€‚æ¥å›åå‡ æ¬¡é‚®ä»¶å¾€å¤ï¼Œå’Œå›½åº†åŠ ç­ï¼Œç»ˆäºå½»åº•è§£å†³äº†ä»–çš„é—®é¢˜ï¼Œä½†ç»™æˆ‘æœ€å¤§çš„ä½“ä¼šæ˜¯ï¼šç”¨æˆ·çš„éœ€æ±‚å®åœ¨å¤ªåˆ‡å®é™…äº†ï¼Œæ¯”å¦‚è¡¨å•é‡Œåˆ°åº•æ˜¯one-timeæ”¯ä»˜è¿˜æ˜¯subscription åº”è¯¥ç”±ä»–ä»¬çš„å®¢æˆ·é€‰æ‹©ï¼Œè€Œéä¸€å¼€å§‹è®¾è®¡form çš„æ—¶å€™å°±å®šå¥½ï¼Œå†æ¯”å¦‚æå‡ºäº†ä¹Ÿæå‡ºäº†æ”¯æŒé™å®šæ¬¡æ•°æœˆä»½æˆ–è€…å¹´çš„è®¢é˜…ï¼Œæœ€åå¾—ä»¥è®©æˆ‘é‡æ–°è®¾è®¡äº†ä¸€ä¸ªæ›´åŠ åˆç†æ¸…æ™°çš„é…ç½®é€‰é¡¹ï¼Œæœ€æœ‰ä»·å€¼çš„ææ€•è¿˜æ˜¯æäº¤æµç¨‹çš„æ”¹å˜ï¼Œè¿™ä¸ä»…éœ€è¦æˆ‘æ·±å…¥çš„çœ‹äº†Elementorçš„æºç å¼„æ¸…æ¥šå†…éƒ¨æµç¨‹ï¼Œæ›´åŸºäºè¿™ä¸ªæ”¹è¿›äº†æ•´ä¸ªè®¾è®¡ï¼Œæˆ‘ç›¸ä¿¡è¿™æ˜¯å…¶ä»–ç«å“å¾ˆéš¾åšåˆ°çš„ã€‚\n\nå†å¾€åå‡ ä¸ªæœˆï¼Œåˆæœ‰å‡ ä¸ªä»˜è´¹ç”¨æˆ·ç›¸ç»§æå‡ºäº†ä¸€äº›æ”¹è¿›æ„è§ï¼Œéƒ½æ˜¯éå¸¸ä¸­è‚¯çš„ï¼Œå½“ç„¶ä¹Ÿæœ‰å¯¹æ’ä»¶çš„è‚¯å®š\n\n> I can't thank you enough for your infinite patience and help. The plugin is great, super smooth and just what I need to integrate into our forms. \n\nå¶ç„¶ä¸€æ¬¡çœ‹æ¨æ–‡ï¼Œæœ‰äººè¯´åˆ°â€œå‰äº”ä¸ªç”¨æˆ·ä¸€å®šæ˜¯ä½ çš„äº§å“ç»ç†â€ï¼Œ çªç„¶è§‰å¾—å¤ªæœ‰é“ç†äº†ï¼ä¸€æ—¦è¿‡äº†è¿™ä¸ªé˜¶æ®µï¼Œä½ åº”è¯¥è¶³å¤Ÿå¯¹ä½ çš„äº§å“æ›´æœ‰ä¿¡å¿ƒã€‚\n\n## Indie Hacker\næœ€åï¼ŒçœŸå¿ƒå–œæ¬¢è¿™ä¹ˆä¸€ä¸ªè§’è‰²ï¼Œè®©æˆ‘åœ¨å·¥ä½œä¹‹ä½™å†ä¹Ÿä¸ä¼šæ— æ‰€äº‹äº‹ã€‚","tags":["wordpress"],"categories":["wordpress"]},{"title":"wordpress æ’ä»¶ä¸€å¹´åŠèµš$1500ï¼Œè¿˜è¦åšæŒä¸‹å»å—?","url":"/2022/11/27/stripe-express-summary/","content":"***\n\nä»Šå¤©ç»Ÿè®¡äº†ä¸€ä¸‹ä¸€å¹´å¤šå‰åšçš„ä¸€ä¸ªå°æ’ä»¶ï¼Œä¸€å…±èµšäº†$1500ï¼ŒäºŒåä¸ªè®¢é˜…ç”¨æˆ·ï¼Œä¸¤ç™¾å¤šæœ‰æ•ˆå…è´¹ç”¨æˆ·ã€‚å›é¡¾ä¹‹å‰çš„ä»˜å‡ºå’Œç°åœ¨æ—¶ä¸æ—¶çš„ç»´æŠ¤ï¼Œä¸ç¦åœ¨é—®è‡ªå·±ï¼Œè¿˜è¦åšæŒåšä¸‹å»å—ï¼Ÿ\n\n![image](https://images.troyyang.com/2022-11-27-plugin-overview.png)\n\n### æ’ä»¶å†ç¨‹\n\nè¦è¯´èŠ±è´¹çš„æ—¶é—´ï¼Œé›¶é›¶æ•£æ•£åŠ èµ·æ¥è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç°å­¦ï¼Œä»wordpess æ˜¯ä»€ä¹ˆï¼Œwordpress æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œphp åˆæ˜¯ä»é›¶å¼€å§‹ï¼Œå†åˆ°å¦‚ä½•ç®¡ç†æ’ä»¶ï¼Œå•†ä¸šæ€ç»´ï¼ŒUIè®¾è®¡ï¼Œç¨‹åºå¼€å‘ï¼Œå®¢æˆ·æ²Ÿé€šï¼Œå®˜ç½‘è®¾è®¡ï¼Œæ–‡æ¡£ç»´æŠ¤ã€‚ã€‚ã€‚å®åœ¨èŠ±äº†ä¸å°‘å¿ƒæ€ï¼Œå¥½åœ¨å¼€å‡ºçš„èŠ±æ€»ä¼šç»“æœï¼š\n\n![image](https://images.troyyang.com/2022-11-27-plugin-timeline.png)\n\n### åæœŸç»´æŠ¤\n\né™¤äº†ç¬¬ä¸€ç‰ˆåçš„ä¸¤ä¸‰ä¸ªæœˆä¸“å¿ƒæŠ•å…¥æ–°åŠŸèƒ½å¼€å‘åï¼Œæ¥è¿‘æœ‰ä¸€å¹´å·²ç»å¤„äºå°åŠŸèƒ½å¼€å‘å’Œæ—¥å¸¸ç»´æŠ¤é˜¶æ®µï¼Œæ¯å‘¨ä¹ŸèŠ±ä¸äº†ä¸€ä¸¤ä¸ªå°æ—¶åœ¨ä¸Šé¢ã€‚å¦‚æ­¤ä¸‹æ¥ï¼Œå…¶å®ä¹Ÿèƒ½é¢„è§åˆ°æ’ä»¶çš„æœªæ¥ï¼Œå·²ç»è¾¾åˆ°äº†ä¸€ä¸ªç¨³å®šç”šè‡³ä¸‹é™æœŸã€‚\n\nä½†æ˜¯äº‹å®è¯æ˜ï¼Œç”¨æˆ·çš„å¢é•¿çœŸçš„å’Œä½ çš„æŠ•å…¥æˆæ­£æ¯”ï¼Œå‰æ®µæ—¶é—´æŠŠä¸€äº›å¾ˆæ—©å°±æƒ³åŠ çš„åŠŸèƒ½åŠ ä¸Šï¼Œå¹¶ä¸”é¢‘ç¹å‘å¸ƒç‰ˆæœ¬åï¼Œç›´æ¥æ”¹å˜äº†ä¸‹é™çš„é¢“åŠ¿ï¼Œæ‰€ä»¥ç›¸ä¿¡ä½ çš„ä»˜å‡ºï¼Œç”¨æˆ·çœŸçš„èƒ½çœ‹å¾—åˆ°ã€‚\n\n### æˆ‘çš„å®¢æˆ·\n\n* è¿˜è®°å¾—ç¬¬ä¸€ä¸ªæ¥è‡ªå¾·å›½çš„ç¥ç§˜å®¢æˆ·ï¼Œæ˜¯ä¸€ä¸ªè¶³çƒä¿±ä¹éƒ¨ï¼Œä»æ²¡å‘é‚®ä»¶ç»™æˆ‘ï¼Œç›´æ¥è´­ä¹°ï¼Œå®åœ¨å¤ªæƒŠè®¶æ— æ¯”ï¼Œè¦çŸ¥é“å½“æ—¶wordpress.orgå…¬å¼€çš„æ¿€æ´»é‡æ˜¯å°äº10çš„ï¼Œè€Œä¸”åˆç‰ˆç¨‹åºä¸ç¨³å®šï¼Œç•Œé¢ä¹Ÿä¸‘é™‹\n* è¿˜æœ‰ä¸€ä½æ‡‚æŠ€æœ¯çš„å®¢æˆ·ï¼Œé€šè¿‡ä¸åœçš„é‚®ä»¶äº¤æµï¼Œå¸®æˆ‘ç•™ä¸‹äº†éš¾å¾—çš„äº”æ˜Ÿå¥½è¯„\n* æ— è®ºå…è´¹è¿˜æ˜¯ä»˜è´¹ï¼Œå‡ ä¹éƒ½æ¥è‡ªå…¨çƒå„åœ°ï¼Œæœ‰ä¸­é€”é€€æ¬¾ï¼Œå–æ¶ˆè®¢é˜…ï¼Œä¹Ÿæœ‰ç‰¹æ„ç»™çš„NGOå…è´¹æŠ˜æ‰£ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯å¯¹å®¢æˆ·å¿ è¯š\n\n### æˆæœ¬\n\nåšäº§å“ä¸€å®šè¦è¯´æˆæœ¬ï¼š æœ€å¤§çš„æˆæœ¬å°±æ˜¯æˆ‘çš„ä¸šä½™æ—¶é—´ï¼Œå…¶æ¬¡æ‰æ˜¯æ¯å¹´ä¸‰å››åç¾å…ƒçš„æœåŠ¡å™¨å’ŒåŸŸåè´¹ç”¨ã€‚ å¦‚æœè¦è¯´å›æŠ¥çš„è¯ï¼Œä¸€ä¸¤åƒç¾å…ƒçš„ç›´æ¥å›æŠ¥çœŸçš„å¾ˆå°‘ï¼Œä½†æ˜¯æˆ‘å´èƒ½æ”¶è·åˆ°çš„æ—¶å€™ç»éªŒå’Œæ•™è®­ï¼Œä»¥åŠå®¢æˆ·è®¤å¯çš„å–œæ‚¦ã€‚ä¹Ÿè®¸ç­‰åˆ°åšä¸‹ä¸€ä¸ªæ›´å¤§äº§å“çš„æ—¶å€™ï¼Œæˆ‘èƒ½æ›´å°‘èµ°å¼¯è·¯ã€‚\n\n### æœªæ¥\n\nåªæ˜¯æœ€è¿‘ç»§ç»­å¼€å‘ç»´æŠ¤çš„åŠ¨åŠ›è¶Šæ¥è¶Šå°ï¼Œä¸€æ˜¯è¿ç»­å¥½å‡ ä¸ªæœˆæ²¡æœ‰æ–°ä»˜è´¹ç”¨æˆ·ï¼ŒäºŒæ˜¯ç«äº‰å¯¹æ‰‹çš„é™ä»·ç­–ç•¥æˆ–è€…æ–°åŠŸèƒ½ä¸åœæ¨é™ˆå‡ºæ–°ï¼Œé åŸæœ‰åŠŸèƒ½å®åœ¨æ— æ³•å¸å¼•ç”¨æˆ·ï¼Œä¸‰æ˜¯çœ‹ç€ä¸€å †çš„TODO listï¼Œä»¥åŠå‘ç°å‰æœŸçš„æŠ€æœ¯é€‰å‹ç¼ºé™·è¶Šæ¥è¶Šå¤§ï¼Œå¾ˆéš¾åšå‡ºå¤§çš„æ”¹å˜ã€‚ã€‚ã€‚æ‰€ä»¥å°±æ­¤æ”¾å¼ƒäº†å—ï¼Ÿå¯¹äºæˆ‘è¿™ç§å¥½å¼ºçš„äººï¼Œè‚¯å®šä¸ä¼šæ”¾å¼ƒçš„ï¼Œé‚£æ€•è¿˜æœ‰ä¸€ä¸ªä»˜è´¹ç”¨æˆ·åœ¨ç»­è´¹ï¼Œä¹Ÿä¸å¯èƒ½æ”¾å¼ƒè¾›è‹¦å»ºç«‹çš„Brandï¼Œä¹Ÿè®¸æ–°å¼€ä¸€ä¸ªæ’ä»¶é‡æ–°æ•´ç†éœ€æ±‚ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","tags":["wordpress"],"categories":["web"]},{"title":"å¦‚ä½•é€šè¿‡ AWS certified solution architect associate (SAA)","url":"/2022/07/31/how-to-get-aws-certified-solutions-architect-associate/","content":"***\n\næ¯å¤©ä¸€ä¸¤ä¸ªå°æ—¶çš„å­¦ä¹ ï¼Œå‰å‰ååä¸‰å››ä¸ªæœˆï¼Œé™¤äº†é«˜è€ƒï¼Œä¹Ÿå°±è¿™æ¬¡è€ƒè¯•çš„é‡è§†ç¨‹åº¦æœ€é«˜ï¼Œæœ€ç´§å¼ äº†ã€‚å›è¿‡å¤´ï¼Œçœ‹ç€ç½‘ä¸Šè¯„è®ºæœ‰è¯´å°ç™½ä¸€ä¸ªæœˆé€šè¿‡ï¼Œæˆ‘ä¸å¤ªç›¸ä¿¡ï¼Œå³ä¾¿å¯¹äºæˆ‘æœ‰ä¸€ç‚¹AWS åŸºç¡€çš„ï¼Œè€ƒçš„è¿‡ç¨‹è¿˜æ˜¯å¾ˆæœ‰å‹åŠ›ã€‚æ‰€ä»¥å¦‚æœä½ ä¹Ÿæ˜¯å‡†å¤‡åœ¨è€ƒçš„ï¼Œè¯·ä¸€å®šä¸€å®šåˆ«ä½ä¼°è€ƒè¯•çš„éš¾åº¦ï¼ŒåŠ¡å¿…å‡†å¤‡è¶³å¤Ÿå……åˆ†ã€‚\n\n### è€ƒè¯ç¼˜ç”±\n\nè¯´èµ·ä¸ºä½•æƒ³ç€è€ƒè¿™ä¸ªè¯ï¼Œä¸»è¦æœ‰å‡ ä¸ªåŸå› ï¼š1. AWSçš„æƒ…æ€€ï¼Œåœ¨å‰é¢çš„ä¸‰å››å¹´é‡Œï¼Œåœ¨ä¸€äº›ä¸ªäººé¡¹ç›®é‡Œæˆ–å¤šæˆ–å°‘çš„ç”¨è¿‡ä¸€äº›AWS æœåŠ¡ï¼ŒåƒEC2, Lamda, DynamoDB, Route53 ç­‰ï¼Œä¹Ÿåˆ†äº«è¿‡ä¸€äº›AWSçš„æ–‡ç« [aws_structure_series](https://troyyang.com/2018/05/12/aws_structure_series/)ï¼Œæ‰€ä»¥æƒ³è¦ç»§ç»­æå‡awsçš„æŠ€èƒ½ 2. ç§ä¸‹åœ¨å’Œä¸€ä½æœ‹å‹çš„åˆä½œçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å›½å¤–çš„é¡¹ç›®å¯¹AWSéœ€æ±‚å¾ˆå¤§ï¼Œå¦‚æœèƒ½æœ‰ä¸ªè¯ï¼Œåœ¨é¡¹ç›®ä¸Šä¼šæœ‰ä¸€å®šä¼˜åŠ¿. 3. ä¸ªäººçš„è½¬å‹å°è¯• (ä¹Ÿç®—æ˜¯backup å§)\n\n### è€ƒè¯•é¡»çŸ¥\n\n* æŠ¥åè´¹ï¼š$150ï¼Œè€ƒè¯•å¤±è´¥ï¼Œéœ€é‡æ–°ç¼´è´¹è¡¥è€ƒ\n* è€ƒè¯•æ—¶é—´ä¸º 130 åˆ†é’Ÿ ï¼ˆåˆ’é‡ç‚¹ï¼Œå¯¹äºå’±ä»¬ä¸­å›½è€ƒç”Ÿï¼Œå¯ç”³è¯·è€ƒè¯•é€šèé¢å¤–è·å–30åˆ†é’Ÿï¼‰\n* 65 é“ï¼Œå•é€‰é¢˜æˆ–å¤šé€‰é¢˜ (15é“ä¸è®¡åˆ†ï¼Œå¤šé€‰é¢˜é¢˜ç›®æ•°ä¸å®š)\n* Pearson VUE å’Œ PSIï¼›è€ƒè¯•ä¸­å¿ƒæˆ–åœ¨çº¿ç›‘è€ƒè€ƒè¯• ï¼ˆæˆ‘æ˜¯çº¿ä¸Šè€ƒçš„ï¼Œä½†ç¡¬ä»¶å’Œç½‘ç»œè¦æ±‚éœ€è€ƒè™‘ï¼‰\n* è€ƒè¯•è¯­è¨€å¯é€‰ä¸­è‹±æ–‡ï¼Œæ¨èé€‰æ‹©ä¸­æ–‡ï¼Œå¯åœ¨è€ƒè¯•ä¸­æ¥å›åˆ‡æ¢ä¸­è‹±æ–‡\n* SAA-C02è¯•é¢˜ä¼šåœ¨8æœˆ29, 2022 è¿‡æœŸï¼Œä¹‹åä¼šé‡‡ç”¨C03 (æ‰€ä»¥æˆ‘æ˜¯çœ‹è¿™ä¸ªdeadline æ¥å®‰æ’æˆ‘çš„è€ƒè¯•)\n\n### å¤‡è€ƒå†ç¨‹\n\nä»ä¸‰å››æœˆå†³å®šè€ƒè¯•å¼€å§‹ï¼Œä¸€å¼€å§‹ä¾¿ä¸çŸ¥æ‰€æªï¼Œé™¤äº†å®˜ç½‘çš„è€ƒè¯•å¤§çº²å’Œæ ·æœ¬è¯•é¢˜ï¼Œå›½å†…çš„è€ƒè¯•æŒ‡å—æ–‡ç« éƒ½å®åœ¨å¸®åŠ©å¾ˆå°ï¼Œå¤§éƒ¨åˆ†æœ€åè¿˜æ˜¯è½åœ¨å„ç§service èŒƒå›´ä¸Šï¼Œæƒ³è¦æ‰¾åˆ°ä¸€ä¸ªç³»ç»Ÿæ€§çš„ä¸­æ–‡å­¦ä¹ è§†é¢‘æˆ–æ–‡æ¡£å®åœ¨å¾ˆéš¾ï¼Œæ‰€ä»¥ä¹‹åçš„æ‰€æœ‰é‡å¿ƒéƒ½æ”¾åœ¨äº†å›½å¤–çš„èµ„æºä¸Šï¼Œä¸‹é¢æ˜¯æˆ‘è‡ªä¸ªæŒ‰ç…§å­¦ä¹ çš„æ—¶é—´çº¿åˆ—å‡ºçš„èµ„æºï¼š\n\n* ä¸‹è½½è€ƒè¯•å¤§çº²å’Œæ ·æœ¬è¯•é¢˜pdf https://aws.amazon.com/cn/certification/certified-solutions-architect-associate/?c=sec&sec=resources\n* [Youtube å°å“¥å¦‚ä½•é€šè¿‡è€ƒè¯•](https://www.youtube.com/watch?v=jypuayQpvao) åå‡ åˆ†é’Ÿï¼Œä½†éå¸¸åŠ±å¿—ï¼Œç”±å…¶æ˜¯SET A DEADLINE WITH A CONSEQUENCE \n* AWS å®˜æ–¹å­¦ä¹ è¯¾ç¨‹ [AWS Technical Essentials](https://explore.skillbuilder.aws/learn/course/external/view/elearning/1851/aws-technical-essentials?saa=sec&sec=prep)(5å°æ—¶) éå¸¸æ£’çš„ä»‹ç»å’Œå¼•å¯¼ï¼Œå…è´¹  \n* [Youtube AWS full course by FreeCodeCamp.org](https://www.youtube.com/watch?v=Ia-UEYYR44s&t=1175s) 10å°æ—¶ï¼Œéå¸¸å…¨é¢ä¸”å…è´¹ï¼Œä½†ç¼ºå°‘hands on\n* [è§†é¢‘æ•™ç¨‹ Stephane Maarek SAA by udemy.com](https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c02/) ~28å°æ—¶ï¼Œæˆ‘çš„å­¦ä¹ ä¸»åŠ›ï¼Œéœ€è´­ä¹°å¤§çº¦$15ï¼Œè¯·æ³¨æ„è¿™æ˜¯C02ï¼Œåé¢åº”è¯¥ä¹°C03äº†\n* [jayendrapatil.com](https://jayendrapatil.com/) å¿…é¡»è¦æè¿™äººçš„åšå®¢ï¼Œå‡ ä¹æ‰€æœ‰å¤‡è€ƒçš„äººéƒ½æåˆ°äº†ä»–ï¼ŒåŒ…æ‹¬äº†å‡ ä¹æ‰€æœ‰è€ƒç‚¹ï¼Œä½†æ–‡ç« çœŸçš„å¤ªå¤šï¼Œæˆ‘å¤§éƒ¨åˆ†review è¿‡ï¼Œåªæ˜¯ç”¨æ¥æ€»ç»“è‡ªå·±æ˜¯å¦æŒæ¡è¿‡ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä½†æ¨èæ¯ç¯‡éƒ½ä»”ç»†çœ‹ã€‚\n* [Practice Exams](https://www.udemy.com/course/practice-exams-aws-certified-solutions-architect-associate) éœ€è´­ä¹°ï¼Œå¤§çº¦$20ï¼Œ6å¥—è¯•é¢˜ï¼Œä½†æ„Ÿè§‰è¿™äº›éš¾åº¦æœ‰ç‚¹é«˜ï¼Œè€ƒäº†å››å¥—ï¼Œéƒ½æ‰50% åˆ° 60%ï¼Œå»ºè®®æ¢å…¶ä»–å¦‚[whizlabs](https://www.whizlabs.com/aws-solutions-architect-associate/)\n* å®˜æ–¹ç™½çš®ä¹¦çš„ä»‹ç»ä»¥åŠFAQ\n\næœ€æœ€é‡è¦çš„ï¼Œå¯èƒ½å°±æ˜¯hands onäº†ï¼ŒåŠ¡å¿…åŠ¨æ‰‹å¤šç»ƒ, æ¯”å¦‚ VPCï¼ŒEBS+ASG, S3 ç­‰ç­‰ï¼Œä¸€æ˜¯å…‰çœ‹å¤§éƒ¨åˆ†è‚¯å®šéƒ½è®°ä¸ä½å¹¶ä¸”è¿ä¸èµ·æ¥ï¼ŒäºŒæ˜¯çœŸçš„å°±åªæ˜¯ä¸ºäº†æ‹¿è¯äº†ï¼Œå®åœ¨ä¸æ˜¯ä¸ªåˆæ ¼çš„äº‘æ¶æ„å¸ˆï¼Œä¸€äº›çœ‹ä¼¼å¾ˆç®€å•çš„è®¾è®¡æ¯”å¦‚ä¸¤å±‚æ¶æ„ï¼Œä¸€ä¸Šæ‰‹æ‰ä¼šçŸ¥é“è‡ªå·±ä¼šæ¼å¤šå°‘ã€‚\n\n### æŠ¥è€ƒæµç¨‹\nç™»å½• https://www.aws.training/ åï¼Œæœ€åè¢«å¯¼èˆªè‡³ https://www.certmetrics.com/ ï¼Œå¡«å†™å¥½ä¸ªäººä¿¡æ¯åï¼ˆå§“ååŠ¡å¿…ä½¿ç”¨æ‹¼éŸ³ï¼‰ï¼Œå°±å¯ä»¥é€‰æ‹©æ³¨å†Œå‚è€ƒè€ƒè¯•ã€‚ï¼ˆåæœŸçš„æˆç»©æŸ¥è¯¢ï¼Œè¯ä¹¦ä¸‹è½½éƒ½æ˜¯åœ¨è¿™ä¸ªç½‘ç«™ï¼ŒPSï¼š2021å¹´11æœˆåï¼Œè¯ä¹¦å·²ç»æ›´æ–°ï¼Œå·²ç»å®Œå…¨å’Œç½‘ä¸Šçœ‹åˆ°çš„ä¸ä¸€æ ·äº†ï¼Œé»‘åº•ç™½å­—å¸¦éªŒè¯ç ï¼Œå®åœ¨ä¸å¥½çœ‹ï¼‰\n> å¯ä»¥ç”³è¯·è€ƒè¯•é€šèå»¶è¿Ÿ30åˆ†é’Ÿè€ƒè¯•æ—¶é—´ï¼Œå¦‚æœé€‰çš„æ˜¯PSIï¼Œ å¯ç›´æ¥ç‚¹å‡»ç”³è¯·ï¼ŒåŸºæœ¬ç”³è¯·å°±æ˜¾ç¤ºæˆåŠŸï¼Œä¹‹åçš„è€ƒè¯•æ—¶é—´å°±ä¼šæ˜¯160åˆ†é’Ÿ\n\n### è€ƒè¯•è¿‡ç¨‹\n\n#### è€ƒå‰å‡†å¤‡\n\n* å‡†å¤‡**æŠ¤ç…§**åœ¨æ‰‹ï¼Œï¼ˆèº«ä»½è¯ä¸è¡Œï¼Œæ²¡æœ‰æ‹¼éŸ³å’Œç­¾åï¼‰\n* åœ¨çº¿è€ƒè¯•å¯¹è‡ªå·±çš„è€ƒåœºè¦æ±‚å¾ˆä¸¥ï¼Œéœ€è…¾ç©ºè€ƒè¯•æˆ¿é—´ï¼Œç¡®ä¿æˆ¿é—´å®‰é™ï¼Œæˆ¿é—¨å…³é—­ï¼Œä¸­é€”ä¸å¾—ä¸Šå•æ‰€ï¼Œä¸€æ—¦æœ‰äººæˆ–æ‚éŸ³ï¼Œè€ƒå®˜ä¼šç»ˆæ­¢è€ƒè¯•\n\n> ä½¿ç”¨çš„PSIåœ¨çº¿è€ƒè¯•ï¼Œ ä¸€ç›´çŠ¹è±«è¦ä¸è¦é€‰æ‹©Pearson VUE è€ƒè¯•ä¸­å¿ƒç°åœºè€ƒï¼Œä½†æœ€ç»ˆè¿˜æ˜¯é€‰æ‹©å®¶é‡Œè€ƒï¼Œä¸»è¦æ˜¯å› ä¸ºå½“æ—¶PSI æœ‰ä¸ªè€ƒè¯•ä¼˜æƒ ï¼Œä»¥åŠç–«æƒ…å½±å“ã€‚å¦‚æœå®¶é‡Œç½‘ç»œç¨³å®šï¼Œä»¥åŠå¯¹ç”µè„‘æœ‰ä¿¡å¿ƒï¼Œæœ€å¥½æ˜¯MACï¼Œå¯ä»¥å°è¯•åœ¨çº¿è€ƒè¯•ã€‚PSI ä¼šåœ¨è€ƒè¯•æœŸé—´ä½¿ç”¨è‡ªå®¶çš„æµè§ˆå™¨ï¼Œå¯é”å®šå±å¹•ä»¥åŠç¦æ­¢å…¶ä»–è½¯ä»¶è¿è¡Œï¼Œå¯æå‰ä¸‹å¥½ï¼Œä¹Ÿå¯ç™»å½•ç³»ç»Ÿæ ¹æ®æç¤ºä¸‹è½½ï¼Œä¸‹è½½åœ°å€åœ¨[è¿™é‡Œ](https://tca.psiexams.com/portal/testdelivery/sb_rpnow_download.jsp)\n\n#### è€ƒè¯•ä¸­\né€‰æ‹©çš„æ˜¯9:30è€ƒï¼Œå¤§æ¦‚9ç‚¹æˆ‘å°±å·²ç»è¿«ä¸åŠå¾…çš„è¿›å…¥ç³»ç»Ÿï¼ŒæŒ‰ç…§æ“ä½œï¼Œæ‰«ææŠ¤ç…§é‰´æƒé€šè¿‡åï¼Œè€ƒå®˜ä¼šå‡ºç°åœ¨å¯¹è¯æ¡†é‡Œï¼Œä½ çœ‹ä¸è§ä»–ï¼Œä»–èƒ½çœ‹è§ä½ ï¼Œéšåï¼Œä»–ä¼šæœ‰å„ç§æŒ‡ç¤ºå‘½ä»¤è®©æ˜¾ç¤ºå„ç§è§†é¢‘è§’åº¦ç­‰ç­‰æ£€æµ‹ï¼ˆå‘ç°äº†æˆ‘æ¡Œä¸Šçš„çŸ¿æ³‰æ°´éƒ½è®©ç»™å€’äº†ï¼‰ï¼Œä¸€åˆ‡OK ä¼šï¼Œè€ƒå®˜ä¼šå‘é¢˜æ­£å¼å¼€å§‹ç­”é¢˜ã€‚\n\nç„¶åå°±æ˜¯æ¼«é•¿çš„ä¸¤ä¸ªå°æ—¶å¤šçš„ç­”é¢˜æ—¶é—´ã€‚ã€‚ã€‚åŸæœ¬çš„130åˆ†é’Ÿæ—¶é—´å€’æ˜¯å·®ä¸å¤šå¤Ÿï¼Œä½†ç”±äºæˆ‘ç”³è¯·äº†é€šèï¼Œæœ‰å¤šä½™çš„åŠä¸ªå°æ—¶ï¼ŒèŠ±äº†åå‡ åˆ†é’Ÿæ£€æŸ¥æ ‡è®°çš„é¢˜ç›®ã€‚æœ€åå®åœ¨æ‰›ä¸ä½äº†ï¼Œç‚¹å‡»æäº¤ï¼Œå†ç»è¿‡ç„¦æ€¥çš„å‡ ç§’åï¼Œç»ˆäºæ˜¾ç¤ºé€šè¿‡ã€‚ã€‚ã€‚\n\n#### è€ƒè¯•å›é¡¾\n\næ€»ä½“æ„Ÿè§‰å¾ˆå¤šæ¶æ„é¢˜è¿˜æŒºæœ‰éš¾åº¦ï¼Œç®€å•çš„ä¹Ÿæœ‰ï¼Œå¤§æ¦‚20ï¼Œ30%ï¼Œæ¯”å¦‚å…³äºDDOS, XSSé˜²èŒƒçš„æœåŠ¡æ˜¯ä»€ä¹ˆï¼Œ è¿˜è®°å¾—å…¶ä»–æ¯”å¦‚\n- Security group ç›¸å…³çš„ï¼š web tier å’Œ database tier, 1433, 443\n- route53 å¤šIP ç­–ç•¥ï¼ˆmulti valueï¼‰\n- VPC peering, private, public, nat\n- fraget, EKS\n- SQS, SNS\n- cloud front çš„å­—æ®µåŠ å¯†\nä¸Šé¢éƒ½è¿˜åªæ˜¯ä¸å¤ªéš¾çš„ï¼Œéš¾çš„éƒ½è®°ä¸ä½äº†\n\n### Next\nå›è¿‡å¤´ï¼Œæœ€å¤§çš„æ”¶è·ä¸æ˜¯è·å¾—è¿™ä¸ªè¯çš„è£èª‰ï¼Œè€Œæ˜¯åœ¨é¢ä¸´å·¥ä½œå‹åŠ›ï¼Œå®¶åº­çäº‹ç­‰ç­‰éƒ½æƒ…å†µä¸‹ï¼ŒåšæŒåšä¸€ä»¶æœ‰æŒ‘æˆ˜çš„äº‹ï¼Œå¹¶åšæˆåçš„æˆå°±æ„Ÿã€‚å…¶æ¬¡ï¼Œå°±æ˜¯é‚£ä¸ªå°å“¥è¯´çš„SET A DEADLINE WITH A CONSEQUENCE, ä¸ºç›®æ ‡è®¾ç½®æˆªæ­¢æ—¥ï¼Œè¿™ä¸ªæ·±æœ‰ä½“ä¼šï¼Œä¹‹å‰æ›¾è®¾å®š6.1 æ—¥è€ƒè¯•ï¼Œå¯å› ä¸ºå„ç§å„æ ·çš„åŸå› ä¸€æ¨å†æ¨ï¼Œæœ€å7æœˆåº•æ‰å®Œæˆï¼Œæ‰€ä»¥æ²¡æœ‰ç ´é‡œæ²‰èˆŸçš„å†³å¿ƒæ˜¯å¾ˆå®¹æ˜“æ‡’æƒ°ä¸‹å»å¹¶èƒŒç¦»è‡ªå·±çš„é¢„è®¾ç›®æ ‡ã€‚\n\nè¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰ä¸‰å¹´ï¼Œæ‰€ä»¥è¿™ä»…ä»…æ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œå¸Œæœ›è‡ªå·±ç»§ç»­åœ¨äº‘æ¶æ„è¿™æ¡è·¯ä¸Šç»§ç»­æ·±é€ ï¼\n\næœ€åé™„ä¸€å¼ å¸¸è§VPCæ¶æ„å›¾æ”¶å°¾ï¼Œä½ æ˜¯å¦éƒ½çŸ¥é“ï¼Ÿ\n![](https://images.troyyang.com/2022-07-31-aws-vpc-architect.png) \n\n\n","tags":["certification"],"categories":["aws"]},{"title":"ä¸€ä¸ªäººå¦‚ä½•å¼€å‘äº§å“","url":"/2022/01/21/how-to-create-your-own-product-with-one-person/","content":"***\n\nç»è¿‡ä¸€å¹´çš„æ‰“ç£¨ï¼Œç°åœ¨äº§å“çš„çŠ¶æ€åº”è¯¥å¤„äºç¨³å®šä¸Šå‡æœŸï¼Œæ”¶è·100+æ¥è‡ªå…¨çƒå„åœ°çš„ç¨³å®šç”¨æˆ·ï¼ŒåŒ…æ‹¬10+çš„ä»˜è´¹ç”¨æˆ·ï¼Œä¸ç®—å¤§çš„æˆåŠŸï¼Œä½†ä¹Ÿèƒ½æ¿€åŠ±æˆ‘ç»§ç»­æŠ•å…¥, ç›¸å…³çš„è¾“å‡ºéƒ¨åˆ†æç°åœ¨ä¸‹é¢çš„link ä¸­ï¼š\n* [https://itstripe.com/](https://itstripe.com/)\n* [https://docs.itstripe.com/](https://docs.itstripe.com/)\n* [https://wordpress.org/plugins/wp-stripe-express/](https://wordpress.org/plugins/wp-stripe-express/)\n\n### Idea \n\næ˜¯ä»€ä¹ˆä¿ƒä½¿ä½ æœ‰åšè¿™ä¸ªäº§å“çš„æƒ³æ³•ï¼Œä¸€å®šæ˜¯æŸä¸ªç—›ç‚¹è¢«æš´éœ²ï¼Œæ— è®ºæ˜¯ä½ è‡ªå·±é‡åˆ°æˆ–è€…æœ‹å‹ï¼Œå®¢æˆ·é‡åˆ°ï¼Œåšè¿™ä¸ªæœ‰å‰é€”å—ï¼Ÿæ”¶ç›Šå€¼å¾—åšå—ï¼Ÿè¿™äº›åº”è¯¥æ˜¯æœ€åˆçš„é‚£ä¸ªæƒ³æ³•åº”è¯¥å¸¦ç»™ä½ çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ä»¥æˆ‘åšçš„è¿™ä¸ªä¸ºä¾‹ï¼Œå› ä¸ºä¹‹å‰å†™çš„ä¸€ç¯‡å…³äºstripeåœ¨ä¸­å›½çš„å¾®ä¿¡å’Œæ”¯ä»˜å®æ”¯ä»˜çš„æ–‡ç« ï¼Œè¢«å¾ˆå¤šè¯»è€…å…³æ³¨ï¼Œä¹Ÿæ”¶åˆ°å¾ˆå¤šè¯¢é—®é—®é¢˜çš„é‚®ä»¶ï¼Œæœ¬ç€èƒ½å¸®å°±å¸®çš„åŸåˆ™ï¼Œç»å¤§å¤šæ•°é‚®ä»¶ä¹Ÿéƒ½ä»”ç»†å›å¤ï¼Œç”šè‡³æœ‰äº›è¿˜è¢«æ·»åŠ äº†å¾®ä¿¡ï¼Œåœ¨å’Œå¥½å¤šç”¨æˆ·çš„æ²Ÿé€šä¸­ï¼Œå‘ç°å¥½äº›éƒ½æ˜¯æœŸæœ›ç”¨åˆ°wordpress ä¸­å»ï¼Œäºæ˜¯å¼€å§‹äº†å¯¹WP çš„äº†è§£ï¼Œä¹‹å‰æ‡‚ä¸€ç‚¹WPï¼ŒçŸ¥é“å¾ˆå¤šäººåœ¨ç”¨ï¼Œå¯æ²¡æƒ³åˆ°å±…ç„¶å¤šå¹´è¿‡å»ï¼Œè¿˜æ˜¯è¿™ä¹ˆç«çˆ†ï¼Œç»´åŸºç™¾ç§‘æ˜¾ç¤ºè¶…è¿‡å…¨çƒ40%çš„ç½‘ç«™éƒ½æ˜¯ç”±å®ƒæ­å»ºï¼Œå¹¶ä¸”è¿˜æœ‰ä¸Šæ¶¨çš„è¶‹åŠ¿(å¤§ç«çš„ wix ä¹Ÿåªèƒ½å é›¶å¤´ä¸åˆ°)ï¼Œå®åœ¨æƒŠå‘†ï¼Œå…¶ä¸­ä¸ä¹å¾ˆå¤šå‚å•†ä¾é ä»–æ¥å”®å–æ’ä»¶å’Œä¸»é¢˜ï¼Œå¸‚åœºè¿˜æ˜¯è¶³å¤Ÿå¤§ã€‚ä¸ºä½•æˆ‘ä¸èƒ½åšä¸€æ¬¾åŸºäºWPçš„å…è´¹+ä»˜è´¹æ’ä»¶ï¼Œå®šä½äºå‰æœŸé¢å‘ä¸­å›½ï¼ŒåæœŸæ›´å¤šæµ·å¤–å›½å®¶æ”¯ä»˜ï¼Œå†æƒ³å¤§ä¸€ç‚¹ï¼Œä¸“åšStripe é›†æˆæœåŠ¡ï¼Œæ¯•ç«Ÿè¿™å‡ å¹´å¯¹stripeçš„å¼€å‘è¿˜æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œè€Œå›½å†…å¯¹è¿™éƒ¨åˆ†çš„äº†è§£è¿˜æ˜¯å¾ˆå°‘ï¼Ÿ\n\n### å‰æœŸè°ƒç ”\n\næ‰¾å‡ºç«äº‰è€…ï¼Œçœ‹ä¸‹å½“ä¸‹çš„å¸‚åœºæƒ…å†µï¼Œèƒ½åšåˆ°å¤šå¤§ï¼Œ èƒ½æ¯”ç«äº‰è€…åšçš„æ›´å¥½å—ï¼Œç”šè‡³æŠ€æœ¯çš„è°ƒç ”ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„è°ƒæŸ¥ï¼Œåˆ—å‡ºäº†ä¸€ä¸ª100%åŒ¹é…çš„ç«äº‰è€…ä»¥åŠå‡ ä¸ªé—´æ¥ç«äº‰è€…ã€‚ä»è°ƒç ”çš„è§’åº¦çœ‹ï¼Œè¿™ä¸ªäº§å“å€¼å¾—åšï¼Œä¸ºä»€ä¹ˆï¼Œå› ä¸ºä¸–é¢ä¸Šå·²ç»æœ‰ï¼Œå°±ä»£è¡¨æœ‰å¸‚åœºï¼Œä¸ç”¨æ‹…å¿ƒåšçš„ä¸œè¥¿æ²¡äººç”¨ï¼Œè¿™å€’æ˜¯çœå»äº†ä¸€å¤§é¡¾è™‘ï¼Œæ¥ä¸‹æ¥çš„è€ƒè™‘å°±æ˜¯å¦‚ä½•è¶…è¿‡ä»–ä»¬ã€‚ä»äº§å“è§’åº¦è€Œè¨€ï¼Œå¯¹äºè¿™ä¸ªç›´æ¥ç«äº‰è€…ï¼Œæˆ‘æœ‰90%çš„æŠŠæ¡æ¯”ä»–åšçš„æ›´å¥½ï¼Œæ—¢ç„¶ä»–èƒ½ä¹°å‡ºäº§å“ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½ï¼Ÿæ‰€ä»¥åé¢å®šçš„ç¬¬ä¸€ä¸ªçŸ­æœŸç›®æ ‡å°±æ˜¯è¶…è¿‡ä»–ï¼Œåé¢ä»è‡ªå·±çš„å®¢æˆ·ä¿¡æ¯æ¥çœ‹ï¼Œä¼¼ä¹ä¹Ÿçš„ç¡®ä¹Ÿåšåˆ°äº†ã€‚ä½†é’ˆå¯¹ä¸­å›½æ”¯ä»˜ï¼Œè¿™ä¸ªå¸‚åœºçš„ç¡®æœ‰ç‚¹å°ï¼Œä¼°è®¡ä¸€å¹´æœ€å¤šå‡ åä¸ªä»˜è´¹ç”¨æˆ·ï¼Œæ‰€ä»¥äº§å“ä¹Ÿä¸èƒ½å•ä¸€ï¼Œå¯ä»¥æ‰©å±•åˆ°æµ·å¤–å…¶ä»–å›½å®¶ï¼Œè¿™äº›å°±æ˜¯è¿™å‡ ä¸ªé—´æ¥ç«äº‰è€…ï¼Œå¸‚åœºå¤Ÿå¤§ï¼ˆåšçš„æœ€å¥½çš„ä¸€å¹´æœ‰ä¸Šä¸‡ä¸ªçš„å®¢æˆ·ï¼‰ï¼Œç«äº‰ä¹Ÿå¿…ç„¶æ›´åŠ æ¿€çƒˆï¼Œä½†ä¹Ÿæ˜¯è¿Ÿæ—©éœ€è¦é¢å¯¹çš„ã€‚\n\n### åˆä¼™äºº\n\nä¹‹æ‰€ä»¥æƒ³æ‰¾åˆä¼™äººï¼Œåˆè¡·æ˜¯è‡ªå·±ä¹‹å‰ä¹Ÿç‹¬ç«‹åšè¿‡ä¸€äº›å¥½ç©çš„ä¸œè¥¿ï¼ŒçŸ¥é“å•æ‰“ç‹¬æ–—çš„å›°éš¾ï¼Œä¸æ˜¯å› ä¸ºäº‹æƒ…ç¹æ‚ï¼Œè€Œæ˜¯å­¤ç‹¬ï¼Œä»¥åŠå­¤ç‹¬å¸¦æ¥çš„æƒ°æ€§ï¼Œå¸Œæœ›ä¸¤ä¸ªäººçš„è¯ï¼Œèƒ½ç›¸äº’äº’è¡¥ï¼Œäº’ç›¸æ€æ‰¶ã€‚åæ¥ä¹Ÿæ‰¾åˆ°äº†ä¸€ä¸ªåœ¨å¾·å›½çš„å¥½æœ‹å‹ï¼Œå¯æƒœæ²¡å¤šä¹…å› ä¸ºä»–å¿™äºå­¦ä¸šï¼Œæœ€ç»ˆè¿˜æ˜¯è½åˆ°äº†ä¸€ä¸ªäººå¤´ä¸Šï¼Œç»è¿‡è¿™çŸ­æš‚çš„åˆä½œï¼Œæ·±æ·±çš„æ˜ç™½è¿™å¥â€œä¸€ä¸ªäººå¯ä»¥è®©ä½ èµ°çš„æ›´å¿«ï¼Œä¸€ä¸ªå›¢é˜Ÿå¯ä»¥è®©ä½ èµ°çš„æ›´è¿œâ€ã€‚ä¸ªäººçš„å»ºè®®æ˜¯ï¼Œå¦‚æœæ˜¯äº§å“åˆæœŸï¼Œå¹¶ä¸”è‡ªå·±å±äºäº§å“æ§ä»¥åŠå¼ºåŠ¿çš„ä¸€æ–¹ï¼Œæœ€å¥½è¿˜æ˜¯ä¸€ä¸ªäººåšï¼Œä¼šçœæ‰ä½ å¾ˆå¤šæ—¶é—´å’Œç²¾åŠ›ï¼Œä¸ç”¨å»æƒ³æ²Ÿé€šçš„æˆæœ¬ï¼ŒåæœŸå¦‚ä½•åˆä½œè¿è¥ï¼Œæƒ³æ³•çš„å†²çªå’Œåˆ©ç›Šçš„åˆ†é…ç­‰ç­‰ï¼Œä¸€ä¸ªäººä¼šè®©é¡¹ç›®æ¨è¿›çš„æ›´å¿«æ›´ç¬¦åˆè‡ªå·±çš„åˆè¡·ï¼Œå½“ç„¶äº‹æƒ…ä¼šæ›´å¤šæ›´æ‚ã€‚ä½†æ˜¯åæœŸï¼Œç­‰åˆ°äº§å“é›å½¢ä¸€å‡ºï¼Œç”šè‡³æŠ•å…¥å¸‚åœºï¼Œåˆ™éœ€è¦æ›´å¤šæ›´ä¸“ä¸šçš„æŠ•å…¥å’Œè®¾è®¡ï¼Œæ­¤æ—¶æ‹¿ç€äº§å‡ºå»æ‰¾æŠ•èµ„æˆ–è€…åˆä¼™äººä¸æ˜¯æ›´æœ‰ä¿¡å¿ƒå—ï¼Ÿ\n\n### æ€»ä½“è§„åˆ’\nåˆ—äº†ä¸ªä¹‹å‰åšçš„è®¡åˆ’å›¾ï¼Œå®é™…çš„è®¡åˆ’è¿œä¸æ­¢è¿™ä¸ªå›¾\n![](https://images.troyyang.com/2021-1-20-stripe-express-plugin-plan.png)\n\n### äº§å“ç ”å‘\n\næƒ³åšä¸€ä¸ªä¸“ä¸šçš„é’ˆå¯¹å›½å¤–çš„è½¯ä»¶äº§å“ï¼Œä¸æ˜¯ç®€å•çš„å‰ç«¯åŠ åç«¯ï¼Œå†å¥—ä¸ªUI å°±å®Œäº‹äº†ï¼Œè‡³å°‘ä¸‹é¢çš„é¡¹ç›®æ˜¯éœ€è¦è€ƒè™‘çš„ï¼š\n\n#### å®˜ç½‘ (https://itstripe.com)\n\nï¼ˆä¸»åŸŸåï¼ŒLogo, ä¼ä¸šé‚®ç®±ï¼ŒæŠ€æœ¯æ”¯æŒï¼Œ äº§å“ä»‹ç»ï¼Œæ¼”ç¤º(Demo)ï¼Œä»·æ ¼å®šä½ï¼Œå„ç§æ¡çº¦ï¼šéšç§ï¼Œæˆæƒï¼Œé€€æ¬¾æ¡çº¦ç­‰ç­‰ï¼‰\n\né—¨é¢å¿…é¡»è¦æœ‰ï¼Œå¹¶ä¸”ä¸€å®šè¦ä¸“ä¸šï¼å…¶ä¸­ï¼Œä¸»åŸŸåä¸€å®šè¦æƒ³å¥½ï¼ŒåæœŸæ‰€æœ‰æ¨å¹¿ï¼Œå“ç‰Œéƒ½å’Œè¿™ä¸ªæ¯æ¯ç›¸å…³ï¼Œä¸èƒ½åé¢éšä¾¿ä¿®æ”¹ï¼Œå®˜ç½‘çš„å®ç°æ˜¯åŸºäºgatsby JSï¼Œç„¶åè‡ªå·±æ‰¾äº†ä¸ªå¥½çœ‹ç‚¹çš„ä¸»é¢˜é­”æ”¹ï¼Œè™½ç„¶è¿˜æ˜¯å¾ˆä¸‘ï¼ˆä¸€ä½ä»˜è´¹ç”¨æˆ·æŠ±æ€¨è¿™ç½‘ç«™çœ‹èµ·æ¥ä¸ä¸“ä¸šï¼‰ï¼Œä½†è¿˜èƒ½å°†å°±ç”¨ï¼Œæœ€åæ‰˜ç®¡åˆ°gitlab çš„page ä¸Šï¼Œåç«¯å°±ä¸€ä¸ªAWS lambda æä¾›API æ¥å‘é€contact meçš„é‚®ä»¶ã€‚\n\nä¼ä¸šé‚®ç®±å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘çš„ä¼ä¸šé‚®ç®±æœåŠ¡ï¼Œ5å¹´å…è´¹ï¼Œå¯ä»¥è–…ä¸€ä¸‹ï¼Œæœ‰ä¼ä¸šé‚®ç®±ä¼šè®©ä½ çš„ç½‘ç«™æ›´åŠ ä¸“ä¸šï¼Œå®¢æˆ·ä¼šæ›´åŠ ä¿¡ä»»ï¼Œä»€ä¹ˆsales@itstripe.com, support@itstripe.com ç­‰ç­‰ç­‰ç­‰ï¼Œè™½ç„¶éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººåœ¨æ‰“ç†ï¼Œå“ˆå“ˆ\n\næ¡çº¦ï¼Œä¸€å®šè¦é‡è§†ï¼Œä»google analysis ä¸Šçœ‹ï¼Œç¥å¥‡çš„æ˜¯ï¼Œå¦‚æ­¤åé—¨çš„é¡µé¢å±…ç„¶ä¹Ÿæœ‰ä¸å°‘äººä¼šå»ç‚¹å‡»ï¼Œè®©æˆ‘ä¸å¾—ä¸é‡è§†å…¶ä¸­çš„æ¯ä¸€æ¡æ¯ä¸€æ¬¾ã€‚ \n\n#### äº§å“å¸®åŠ©æ–‡æ¡£(https://docs.itstripe.com)\n\näº§å“å½“ç„¶å¾—æœ‰å¸®åŠ©æ–‡æ¡£ï¼Œè¦ä¸ç„¶å®¢æˆ·æ¯æ¬¡æ¥çƒ¦ä½ ï¼Œä½ çš„é‚®ä»¶ä¸€å®šä¼šçˆ†çš„ï¼Œä»€ä¹ˆquick start guide, setting, Q&A æ”¾æ–‡æ¡£ä¸Šå°±å¥½äº†ï¼ŒèŠ‚çº¦ä½ å’Œå®¢æˆ·çš„å¤§æŠŠæ—¶é—´ã€‚ \n\n#### äº§å“ Demo (https://itstripe.com/demo, https://demo.itstripe.com)\n\nå½“ç„¶ä¹Ÿå°‘ä¸äº†äº†ï¼Œå“ªæ€•æ˜¯é™æ€çš„ä¹Ÿå¥½ï¼Œè¿™æ˜¯ç›®æ ‡å®¢æˆ·ç‚¹å‡»ç‡æœ€é«˜çš„åœ°æ–¹ã€‚\n\n#### äº§å“ç ”å‘ ([https://wordpress.org/plugins/wp-stripe-express/](https://wordpress.org/plugins/wp-stripe-express/))\n\nåšçš„WPæ’ä»¶ï¼Œéœ€è¦è€ƒè™‘ï¼Œå¦‚ä½•å®‰è£…ï¼Œæ¿€æ´»ï¼Œå¦‚ä½•åŒºåˆ†ä»˜è´¹å’Œå…è´¹ç”¨æˆ·ï¼Œå¦‚ä½•å‡çº§ä»˜è´¹ç”¨æˆ·ï¼Œå®¢æˆ·å¦‚ä½•æ”¯ä»˜ï¼Œå¦‚ä½•ç®¡ç†Licenseï¼ˆæ˜¯å¦è¿‡æœŸç­‰ï¼‰\n\nè‡ªå­¦äº†phpï¼Œwordpress API, å¤–åŠ  4 ä¸ª react repo(å®˜ç½‘ï¼Œæ–‡æ¡£ï¼Œæ’ä»¶åç«¯ï¼Œæ’ä»¶å‰ç«¯) ï¼Œå¯¹äºå¦‚ä½•é›†æˆä»˜è´¹ç”¨æˆ·ï¼Œåˆä½¿ç”¨åˆ°äº†freemius æ¥ç®¡ç†ä»£ç å’Œå®¢æˆ·ï¼Œä¸ºäº†äº§å“çš„ä»‹ç»ï¼Œåˆæ‘¸ç´¢å­¦ä¹ äº†Figma è®¾è®¡å›¾å½¢ï¼Œlogo \n\n#### è¿è¥\n\nä¿è¯ä¼˜è´¨çš„å›å¤æ¯ä¸€å°å®¢æˆ·çš„é‚®ä»¶ï¼Œéµå®ˆé€€æ¬¾æ¡çº¦ï¼ˆé€€äº†ä¸¤ä¸‰æ¬¡ï¼Œå¥½å¿ƒç—›ï¼‰ï¼Œä»å®¢æˆ·éœ€æ±‚é‡Œæˆ–è€…è‡ªå·±æŒ–æ˜æ–°åŠŸèƒ½ï¼ˆåƒä¸‡åˆ«æ¨¡ä»¿ç«äº‰è€…ï¼Œä¿æŒäº§å“çš„ç‹¬ç«‹æ€§ï¼‰ï¼Œä¿æŒå®šæœŸäº§å“æ›´æ–°ï¼Œè®©ç›®æ ‡å®¢æˆ·æˆ–è€…ç°æœ‰å®¢æˆ·çŸ¥é“è¿™äº§å“çš„æ´»åŠ›ï¼ŒWP ä¸Šä¸å°‘æ’ä»¶éƒ½æ˜¯æ²¡äººç»´æŠ¤çŠ¶æ€ã€‚\n\nä¸‹é¢æ˜¯æˆ‘æŒ‡å®šçš„ TODO è¿ç»´å›¾ï¼Œæœ‰äº›æ˜¯å®¢æˆ·æçš„éœ€æ±‚ï¼Œä¸€äº›æ¥è‡ªè‡ªå·±å‘ç°éœ€è¦ä¼˜åŒ–çš„åœ°æ–¹ã€‚\n![](https://images.troyyang.com/2021-1-20-stripe-express-plugin-todos.png)\n\n#### å®¢æˆ·çš„ feedback æ˜¯ä½ äº§å“æœ€å¤§çš„è´¢å¯Œ\nä¸‹é¢æ˜¯æœ€è¿‘æ¥è‡ªå¾·å›½ä¸€ä½ä»˜è´¹ç”¨æˆ·çš„é‚®ä»¶å›å¤ï¼ŒçœŸçš„æ·±æ·±çš„è®©æˆ‘ä½“ä¼šåˆ°ï¼Œä½ çš„äº§å“è¿œæ²¡ä½ æƒ³çš„é‚£ä¹ˆå¥½ï¼Œä½†ä½ çš„ä»˜å‡ºæ€»ä¼šå¾—åˆ°å›æŠ¥ï¼š\n\n> So Iâ€™m happy about you being so responsive and willing to help, because looking at the low number of installations shown for your free version on Wordpress org, the at first not working feature for metadata, broken homepage and the failed payment and no imprint with physical company address on homepage did not make the very best impression at first. You have proved, that my first impression was not right, but I bet others that evaluate the best Stripe plugin might come to a similar conclusion. \n\n### æ€è€ƒ\n\nè¿™ä¸€å¹´ä»¥æ¥ï¼Œè¿˜æ˜¯èŠ±äº†å¤ªå¤šçš„ä¸šä½™æ—¶é—´åœ¨è¿™ä¸Šé¢ï¼ŒåŒ…æ‹¬å¤šå°‘ä¸ªå‘¨æœ«ï¼Œç”šè‡³å¤§ç†æ¸¸ç©éƒ½åœ¨å¼„ï¼Œåˆ°ç°åœ¨ä¹Ÿåªæ˜¯è¸å‡ºäº†ç¬¬ä¸€æ­¥ï¼Œ åˆ—è¡¨é‡Œè¿˜åˆ—äº†å¾ˆå¤šå…³äºè¿™äº§å“çš„TODO LISTï¼ŒåŒ…æ‹¬UI çš„æ›´æ–°ï¼Œå¤§åŠŸèƒ½æ–°å¢ç­‰ï¼Œå¸Œæœ›æ¥å¹´èƒ½å®Œå–„å¥½ã€‚\n\näº§å“çš„æ•…äº‹å®åœ¨å¤ªå¤šï¼Œå†™ç€å†™ç€å°±åœä¸ä¸‹æ¥ï¼Œä¹Ÿè®¸è¿™å°±æ˜¯æŠ˜è…¾çš„æ„ä¹‰ï¼Œå¯¹æå‡ä¸ªäººçŸ¥è¯†çš„å¹¿åº¦å®åœ¨å¤ªå¤šäº†","tags":["stripe"],"categories":["stripe"]},{"title":"2021å¹´åº¦å›é¡¾","url":"/2022/01/20/my-2021/","content":"***\n\nç®€å•çš„å›é¡¾ï¼Œ2021ï¼Œè¿˜æ˜¯å¤„äºç–«æƒ…é˜¶æ®µï¼Œç»å†çš„äººå’Œäº‹ä¹ŸæŒºå¤šï¼š\n\n* ç»å†äººç”Ÿç¬¬ä¸€æ¬¡å…¬å¸å¤§è£å‘˜ï¼ˆè‡ªå·±æ²¡è¢«è£ï¼Œå¯çœ‹ç€èº«è¾¹ä¸€åŠä»¥ä¸Šçš„äººèµ°äººæµï¼Œè¿˜æ˜¯æ„Ÿæ…¨ä¸‡åˆ†ï¼Œä¸æ˜¯å› ä¸ºå¹¸è¿ï¼Œè€Œæ˜¯å½’å±æ„Ÿå’Œå±æœºæ„Ÿæ·±æ·±åˆºæ¿€äº†è‡ªå·±ï¼‰\n* è‡ªå·±ä¸šä½™å¼€å‘çš„stripe express äº§å“å‘å¸ƒä¸€å¹´ï¼Œæ”¶è·100+æ¥è‡ªå…¨çƒå„åœ°çš„ç”¨æˆ·ï¼ŒåŒ…æ‹¬10+çš„ä»˜è´¹ç”¨æˆ·\n* ç”¨è¿‘åŠå¹´å…¼èŒä¸ºä¸€æ—¥æœ¬æœ‹å‹å¼€å‘webç³»ç»Ÿï¼Œæ”¶è·äº†é™¤å¼€å‘ç»ç†ä»¥å¤–ï¼Œäº§å“ç»ç†å’Œé¡¹ç›®ç®¡ç†æ›´å¤šè§’è‰²çš„æ‹…å½“\n\n### å…³äºè£å‘˜\n\nä½œä¸ºä¸€å®¶ç¾ä¼ç ”å‘ä¸­å¿ƒï¼Œé¢å¯¹ç¾å›½ä¸¥å³»çš„ç–«æƒ…æƒ…å†µï¼Œå…¬å¸æ”¶å…¥é”å‡ï¼Œä¸å¾—å·²å¼€å¯è£å‘˜æ¨¡å¼ï¼Œçœ‹ç€æ˜”æ—¥ç†Ÿæ‚‰çš„é¢å­”ï¼Œçœ‹ç€ç¦»å¼€çš„äººå¼€å¼€å¿ƒå¿ƒæ‹¿ç€N+2çš„packageç¦»å¼€ï¼Œå…¶ä¸­è¿˜ä¸ä¹æ‹¿ç€é¡¶æ ¼12+2çš„åŒäº‹ï¼Œä½†åˆåŒæ—¶é¥±å«æ³ªæ°´çš„æ‹¥æŠ±ç¦»å¼€ã€‚ã€‚ã€‚è¿™ä¸ªæ—¶å€™ä¸ç¦åœ¨æƒ³ï¼Œåˆ°åº•ç•™ä¸‹æ¥çš„æ‰æ˜¯å¹¸è¿å„¿è¿˜æ˜¯ç¦»å¼€çš„å‘¢ï¼Ÿï¼Ÿï¼ˆç°åœ¨çœ‹å¿…é¡»æ˜¯ç¦»å¼€çš„ï¼Œå› ä¸ºå¤§å¤šæ•°äººåœ¨ä¸€å¹´ååˆé‡æ–°å›åˆ°å…¬å¸ï¼‰\n\nè¿™æ¬¡è£å‘˜ï¼Œæœ€å¤§çš„æ„Ÿå—è¿˜æ˜¯äººä¸èƒ½è¿‡çš„å¤ªå®‰ç¨³ï¼Œå°¤å…¶åœ¨å¤–ä¼è¿™ç§ç”Ÿæ´»å·¥ä½œå¾ˆbalanceçš„èŠ‚å¥ï¼Œå¦‚æœä¸è§„åˆ’å¥½è‡ªå·±çš„æœªæ¥ï¼Œå¾ˆå®¹æ˜“æ¸©æ°´ç…®é’è›™ã€‚å…¶æ¬¡æ˜¯å®‰å…¨æ„Ÿï¼Œå®‰å…¨æ„Ÿä¸€å®šä¸æ˜¯å…¬å¸ç»™çš„ï¼Œå³ä¾¿ä½ æ˜¯å¤„äºå…¨çƒ500å¼·ï¼Œso what? ä¸€å®šè¦æœ‰è‡ªå·±çš„ä¸€å¥—æŠ€èƒ½å’Œä½“ç³»ï¼Œåªæœ‰è¿™ç§å®‰å…¨æ„Ÿæ‰ä¼šè®©ä½ å¦ç„¶é¢å¯¹å¸¸è¯´çš„35æˆ–è€…40å²å±æœº\n\n### å…³äºè‡ªå·±åšäº§å“\n\næ„Ÿæƒ³å¤ªå¤šï¼Œå•ç‹¬å†™äº†å¦ä¸€ç¯‡ [ä¸€ä¸ªäººå¦‚ä½•å¼€å‘ä¸ªäººäº§å“](https://troyyang.com/2022/01/21/how-to-create-your-own-product-with-one-person/)\n\n### å…³äºå…¼èŒé¡¹ç›®\n\nä¸€ä¸ªæœºç¼˜å·§åˆï¼Œå¼€å§‹ä¸ºä¸€æ¥è‡ªæ—¥æœ¬çš„åäººæœ‹å‹å¼€å‘ç³»ç»Ÿï¼Œéœ€æ±‚ä»åŸæœ¬æœ€åˆè®¡åˆ’çš„åŒ¹é…å·¥å…·å‘å±•åˆ°æ—¥æœ¬å¹¿ä¸ºæµè¡Œçš„æ¡ˆä»¶äººæ‰ç®¡ç†ç³»ç»Ÿã€‚æ‰¾äº†ä¸ªæœ‹å‹åšåç«¯ï¼Œæˆ‘å°±è´Ÿè´£éœ€æ±‚æ²Ÿé€šï¼Œå‰ç«¯å¼€å‘ï¼Œæµ‹è¯•ä»¥åŠDemoç­‰ï¼ŒæŠ€æœ¯æ ˆé€‰æ‹©çš„æ˜¯åŸºäºAWS çš„ serveless æ¶æ„ã€‚æ‰€è·å¾—çš„ä¸ä»…ä»…æ˜¯æ”¶å…¥ä¸Šçš„æé«˜ï¼Œæ›´æ˜¯å¦‚ä½•ç³»ç»Ÿçš„ä»0åˆ°1ï¼Œä»éœ€æ±‚åˆ°ï¼Œå¼€å‘ã€æ¶æ„æ•´ä¸ªæµç¨‹çš„ç³»ç»ŸåŒ–ï¼Œç”±å…¶åœ¨AWS ä¸Šçš„å„ç§æœåŠ¡ï¼Œä»¥å‰å¦‚æœåªæ˜¯å°æ‰“å°é—¹çš„è‡ªå·±ä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™æ¬¡ç®—æ˜¯ä¸€æ¬¡å•†ä¸šåŒ–åº”ç”¨çš„å®è·µã€‚\n\n### 2022 è®¡åˆ’\n\nä¸æƒ³å†™ä»€ä¹ˆè¯»å¤šå°‘æœ¬ä¹¦ï¼ŒçŸ­æœŸç›®æ ‡å°±å…ˆæ‹¿ä¸ª AWS SAA è¯ä¹¦å§","tags":["misc"],"categories":["misc"]},{"title":"ä¸­å›½ç”¨æˆ·å¦‚ä½•å…è´¹æ¿€æ´»Stripe?","url":"/2021/06/02/activate-stripe-in-china-for-free/","content":"\n# ä¸­å›½ç”¨æˆ·å¦‚ä½•å…è´¹æ¿€æ´»Stripe?\n\næœ¬æ–‡ä¼šä»‹ç»æ— éœ€å¼€è®¾æµ·å¤–é“¶è¡Œè´¦å·æˆ–è€…é¦™æ¸¯è´¦å·ï¼Œå¹¶å…è´¹çš„é€šè¿‡æ³¨å†Œæ¿€æ´»Stripeè´¦å·å¹¶æç°ï¼Œäº²æµ‹æœ‰æ•ˆï¼\n\nä¸»è¦é€šè¿‡ä½¿ç”¨ä¸‡é‡Œæ±‡æµ·å¤–è´¦å·ç»‘å®šæ¿€æ´»ï¼Œå…¶ä¸­ä¸‡é‡Œæ±‡æ˜¯èš‚èšé‡‘æœæ——ä¸‹çš„äº§å“ï¼Œå€¼å¾—å¯é ã€‚ï¼ˆä¸æ˜¯ç»™ä¸‡é‡Œæ±‡æ‰“å¹¿å‘Šå“¦ï¼‰\n\n### ä»€ä¹ˆæ˜¯Stripe\n\næƒ³è±¡ä½ æ˜¯ä¸€ä¸ªè·¨å¢ƒç”µå•†ï¼Œæƒ³è¦æŠŠäº§å“å–åˆ°å…¨çƒï¼Œå´é¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œå•†å“æ ‡ä»·$100ï¼Œæ—¥æœ¬å®¢æˆ·æƒ³ç›´æ¥æ”¯ä»˜æ—¥å…ƒï¼Œæ¬§æ´²å®¢æˆ·æƒ³æ”¯ä»˜æ¬§å…ƒã€‚ã€‚ã€‚ä½ ä¸å¯èƒ½è¦æ±‚å®¢æˆ·è¯´æˆ‘åªæ”¯æŒç¾å…ƒï¼Œè¯·å…‘æ¢åå†æ”¯ä»˜å§ï¼Ÿ\n\næ‰€ä»¥å¦‚æœä½ è¿˜ä¸çŸ¥é“Stripeï¼Œé‚£æ¨èä½ å»äº†è§£ä¸‹ã€‚ä½œä¸ºå’ŒPayPalä¸€æ ·å­˜åœ¨çš„æ”¯ä»˜å·¨å¤´ï¼ˆç°åœ¨å¸‚å€¼ $950äº¿ï¼‰ï¼Œåœ¨å›½å¤–æ—©å·²ç«å¾—ä¸€å¡Œç³Šæ¶‚ï¼Œä½¿ç”¨ä»–ä½œä¸ºæ”¯ä»˜å¹³å°çš„å•†å®¶å’Œç½‘ç«™æ•°ä¸ç”šæ•°ï¼Œæ¶ˆè´¹è€…æ¸—é€ç‡è¦†ç›–äº†å…¨çƒ135ä¸ªå›½å®¶ã€‚ã€‚ã€‚\n\n[]()\n\n### ä¸­å›½å•†æˆ·ï¼ŒNO\n\né—æ†¾çš„æ˜¯ï¼Œå¦‚æœä½ æ˜¯èº«åœ¨ä¸­å›½ï¼Œé‚£ä¹ˆæ˜¯ä¸èƒ½æ¿€æ´»Stripe è´¦å·çš„ï¼ˆä¸æ¿€æ´»åªæ˜¯æ³¨å†Œè´¦å·å€’æ˜¯å¯ä»¥ï¼Œä½†æ˜¯æ²¡æ³•æ”¶æ¬¾å’Œä½“ç°ï¼Œåªèƒ½æµ‹è¯•ï¼‰ï¼Œå¯ä»¥æŸ¥çœ‹ç°åœ¨å•†æˆ·æ”¯æŒçš„[40å¤šä¸ªå›½å®¶/åœ°åŒºåˆ—è¡¨](https://stripe.com/global), å…¶ä¸­é¦™æ¸¯æ˜¯å¯ä»¥çš„ã€‚æ‰€ä»¥ä½ èƒ½çœ‹åˆ°ï¼Œè¿™ä¸ªæ³¨å†Œå…¬å¸åœ°å€é‡Œæ˜¯æ²¡åŠæ³•é€‰æ‹©ä¸­å›½ğŸ‡¨ğŸ‡³çš„ï¼ŒThat's the problem!\n\n![](/images/uploads/2021-06-02-stripe-reg-china-issue.png)\n\n### å¦‚æœè§£å†³ï¼Ÿä¸‡é‡Œæ±‡ æˆ–è€… TransferWise\n\né—®é¢˜çš„ç“¶é¢ˆåœ¨äºstripe æ¿€æ´»çš„æ—¶å€™ï¼Œéœ€è¦æä¾›ä½ çš„å•†ä¸šä¿¡æ¯ä»¥åŠé“¶è¡Œä¿¡æ¯ï¼Œå¹¶ä¸”ä¿è¯é“¶è¡Œä¸Šçš„åå­—å’Œè´¦å·é‡Œçš„ä¸ªäººå§“åä¸€è‡´ã€‚ä½†åˆç”±äºå•†ä¸šä¿¡æ¯çš„å›½å®¶åœ°åŒºåªæœ‰ä¸Šé¢æåˆ°çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±å¯¼è‡´ä¸­å›½ç”¨æˆ·æ²¡åŠæ³•æ¿€æ´»ã€‚\n\nè§£å†³åŠæ³•çš„æ€è·¯å°±æ˜¯ï¼Œä½¿ç”¨ä¸‡é‡Œæ±‡æ³¨å†Œä¸ªé¦™æ¸¯è´¦å·æˆ–è€…å…¶ä»–å›½å®¶çš„é“¶è¡Œè´¦å·ï¼ˆè™½è¯´æ˜¯è™šæ‹Ÿçš„ï¼Œä½†å’Œå®é™…æ²¡åŒºåˆ«ï¼‰ï¼Œç„¶åå†æ ¹æ®è´¦å·çš„ä¿¡æ¯æ‹¿å»Stripeæ¿€æ´»ï¼Œçœ‹ä¼¼ç®€å•ï¼Œä½†è¿˜æœ‰å¾ˆå¤šå‘éœ€è¦è¶Ÿï¼Œä¸”å¬æˆ‘æ…¢æ…¢é“æ¥ã€‚\n\n---\n\n### æ³¨å†Œä¸‡é‡Œæ±‡\n\nç‚¹å‡»æ³¨å†Œåœ°å€ [https://portal.worldfirst.com.cn/register](https://portal.worldfirst.com.cn/register)ï¼Œ \n\n1. ç„¶åæŒ‰æ­¥éª¤é€‰æ‹©æ”¯ä»˜ç½‘å…³, è¿™é‡Œå¯ä»¥æŒ‰ä¸ªäººæƒ…å†µå¤šé€‰å‡ ä¸ª(æœ€å¥½æŠŠstripe å‹¾é€‰ä¸Š)ï¼Œè™½ç„¶æˆ‘ä¹Ÿä¸çŸ¥é“æœ‰å¤šå¤§å½±å“\n\n![](/images/uploads/2021-06-02-worldfirst-reg-gateway.png)\n\n2. é€‰æ‹©ç±»å‹ï¼Œå¯ä»¥æ˜¯ä¸ªäººï¼Œ ä¹Ÿå¯ä»¥æ˜¯å…¬å¸ï¼Œè¿™é‡Œæˆ‘é€‰çš„ä¸ªäºº\n\n3. å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼ŒæŒ‰éƒ¨å°±ç­çš„å¡«å¥½å°±è¡Œï¼Œæ³¨å†Œå°±ç®—æˆåŠŸ\n\n### è®¤è¯è´¦å·\n\næ³¨å†Œå¥½äº†ï¼Œæ˜¯éè®¤è¯çŠ¶æ€çš„ï¼Œè¿™æ—¶æ˜¯ä¸èƒ½åˆ›å»ºæµ·å¤–è´¦å·ï¼Œè¿˜éœ€è¦æä¾›ç›¸åº”çš„ä¿¡æ¯ä¸Šä¼ å»éªŒè¯ï¼ˆæ®è¯´å¯ä»¥æ”¯ä»˜å®å¿«æ·éªŒè¯ï¼Œä½†æ˜¯æˆ‘æ²¡å‘ç°æœ‰ï¼Œåªèƒ½æ‹ç…§ä¸Šä¼ ï¼‰\n\nè®¤è¯ä¸€èˆ¬ä¼šæŒç»­ä¸€ä¸¤å¤©éªŒè¯ï¼Œç­‰ç€æ”¶é‚®ä»¶å°±å¥½äº†ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œå¯ä»¥è”ç³»è‡ªå·±çš„ä¸‡é‡Œæ±‡å®¢æˆ·ç»ç†ï¼ˆçœŸæ˜¯ä¸€å¯¹ä¸€æœåŠ¡å•Šï¼Œè¿™ç‚¹å¥½ï¼‰\n\n![](/images/uploads/2021-06-02-wordfirst-reg-home-page.png)\n\n### åˆ›å»ºæµ·å¤–è´§å¸è´¦æˆ·\n\nç»ˆäºåˆ°äº†å…³é”®æ­¥éª¤äº†ï¼Œè¿™é‡Œå¯ä»¥åˆ›å»ºå¤šä¸ªè´¦æˆ·ï¼Œæ¯ä¸ªè´¦æˆ·å°±åƒè‡ªå·±é“¶è¡Œå¡ä¸€æ ·ï¼Œæœ‰å¡å·ï¼Œä¸ºäº†stripe æ³¨å†Œæ–¹ä¾¿ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªé¦™æ¸¯è´¦æˆ·å’Œä¸€ä¸ªç¾å›½è´¦æˆ·\n\n![](/images/uploads/2021-06-02-wordfirst-account-detail.png)\n\nåˆ°äº†è¿™ä¸€æ­¥ï¼Œæ­å–œä½ ï¼Œä½ å·²ç»å¼€é€šäº†æµ·å¤–è´¦æˆ·ï¼å…³é”®æ˜¯è¿™ä¸ªé“¶è¡Œä¿¡æ¯å¯¹åé¢çš„Stripeæ¿€æ´»æ˜¯éå¸¸é‡è¦ã€‚\n\n---\n\n## åˆ›å»ºå’Œæ¿€æ´» Stripe è´¦å·\n\né¦–å…ˆåˆ›å»ºStripe è´¦å·ï¼Œ[https://dashboard.stripe.com/register](https://dashboard.stripe.com/register)ï¼Œ å›½å®¶/åœ°åŒºå¯ä»¥é€‰æ‹©é¦™æ¸¯ï¼Œåˆ›å»ºå¥½ä¹‹åï¼Œç™»å½•è¿›å…¥ä¸»é¡µé¢ï¼Œ è¿™ä¸ªæ—¶å€™å¦‚æœä½ æš‚æ—¶ä¸æƒ³æ¿€æ´»ï¼Œæ˜¯å®Œå…¨å¯ä»¥çš„ï¼Œå¯ä»¥åˆ‡æ¢**æµ‹è¯•**æ¨¡å¼è¿›è¡Œä½ çš„æ”¯ä»˜å¼€å‘æµ‹è¯•ï¼Œ**æµ‹è¯•**æ¨¡å¼åŸºæœ¬å’Œ**åœ¨çº¿**æ¨¡å¼ä¸€æ¨¡ä¸€æ ·ï¼Œé™¤äº†æµ‹è¯•çš„æ”¯ä»˜è´¦å·æ˜¯å‡çš„ä»¥å¤– ï¼ˆPSï¼Œ æˆ‘å°±æ˜¯æ²¡æ¿€æ´»ä½¿ç”¨äº†ä¸€å¹´å¤šï¼Œçº¯ç²¹ä½œä¸ºå¼€å‘ä½¿ç”¨ï¼‰\n\n![](/images/uploads/2021-06-02-stripe-dashboard.png)\n\n### æ¿€æ´»Stripe è´¦æˆ·\n\nç‚¹å‡» **æ¿€æ´»ä½ çš„è´¦æˆ·** ï¼Œ è¿™é‡Œçœ‹èµ·æ¥æœ‰å¾ˆå¤šæ­¥éª¤ï¼Œä¸ç”¨æ€•å¡«é”™ï¼Œåé¢éƒ½æ˜¯å¯ä»¥è·³å›å»æ”¹çš„ã€‚\n\nå…¬å¸ç»“æ„ï¼š\n\n![](/images/uploads/2021-06-02-stripe-activate-comany-info.png)\n\né€‰æ‹©é¦™æ¸¯ï¼Œæˆ–è€…å…¶ä»–ä¸Šé¢è´§å¸è´¦å·å›½å®¶ï¼Œåœ°å€å¯ä»¥å¡«é“¶è¡Œè´¦å·åœ°å€ï¼Œç±»å‹å¯ä»¥é€‰ä¸ªäººï¼ˆå¦‚æœå…¬å¸çš„è¯ï¼Œæ®è¯´stripe ä¼šå¯¹ä½ è´¦å·ä¿æŠ¤æ€§æˆ–è€…æœåŠ¡æ›´å¥½ï¼‰ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥\n\nå…¬å¸ä»£è¡¨ï¼šå¿…é¡»æ˜¯ä½ è‡ªå·±åœ¨ä¸Šè¿°é“¶è¡Œè´¦å·çš„å§“åï¼Œå¦åˆ™å¯èƒ½ä¼šæ— æ³•ä½“ç°åˆ°ä½ é“¶è¡Œ\n\n![](/stripe-activate-represent-name-info.png)\n\nåœ°å€ä¿¡æ¯å¯ä»¥ç»§ç»­ç”¨é“¶è¡Œåœ°å€ï¼Œç”µè¯å·ç æœ€å¥½æ˜¯ç”¨ä¸­å›½çš„ï¼Œå¯ä»¥é€‰CN, å¡«å†™è‡ªå·±å·ç ï¼Œå› ä¸ºåé¢å¯èƒ½ä¼šç”¨æ¥ç”¨æ¥ç™»å½•çŸ­ä¿¡éªŒè¯ä¹‹ç±»çš„ï¼Œèº«ä»½è¯ID è¿™ä¸ªæˆ‘æ²¡è®°é”™çš„è¯ï¼Œæ˜¯éšä¾¿æ‰¾çš„ä¸€ä¸ªIDï¼ˆåªè¦ä½æ•°å’Œæ ¼å¼å¯¹äº†å°±è¡Œï¼‰ â˜¹ï¸\n\n![](/images/uploads/2021-06-02-stripe-activate-represent-info.png)\n\né“¶è¡Œè¯¦æƒ…ï¼šé€‰æ‹©åœ¨ä¸‡é‡Œæ±‡åˆ›å»ºçš„é“¶è¡Œä¿¡æ¯å°±è¡Œ\n\n![](/images/uploads/2021-06-02-stripe-activate-bank-info.png)\n\nç„¶åä¸€ç›´å¡«ä¸‹å»ï¼Œä¿å­˜\n\n### æ¿€æ´»æˆåŠŸäº†å—ï¼Ÿ\n\nä¸Šè¿°æ²¡é—®é¢˜çš„è¯ï¼Œç¡®å®æ¿€æ´»æˆåŠŸäº†ï¼Œä½ ä¹Ÿå¯ä»¥åˆ‡æ¢åˆ°çº¿ä¸Šæ¨¡å¼å»æ”¶æ¬¾äº†ï¼Œä½†æ˜¯å´æ— æ³•æç°ï¼ˆè½¬è´¦ï¼‰åˆ°ä½ é“¶è¡Œå¡é‡Œï¼Œè¿˜æœ‰ä¸¤ä¸ªé‡è¦çš„æœªå®Œæˆæ­¥éª¤è­¦å‘Šï¼š\n\nèº«ä»½ä¿¡æ¯ä¸åŒ¹é…ï¼ˆä¸ªäººä¿¡æ¯éªŒè¯å¤±è´¥ï¼Œå½“ç„¶äº†ï¼ŒID éƒ½æ˜¯å‡çš„ï¼‰ å’Œ US Tax Form ï¼ˆç¾å›½ç¨æ”¶è¡¨ï¼‰\n\n![](/images/uploads/2021-06-02-stripe-activate-ux-tax-sign.png)\n\nä¸¤ä¸ªé—®é¢˜ä¸€ä¸ªä¸€ä¸ªè§£å†³ï¼š\n\n- ID ä¸åŒ¹é…ï¼Œè¿›å…¥æç¤ºçš„é…ç½®ï¼Œåªéœ€è¦ä¸Šä¼ è‡ªå·±çš„èº«ä»½è¯æ­£åé¢å°±å¥½äº†ï¼Œä¸€å¤©å·¦å³å°±éªŒè¯æˆåŠŸï¼ˆä¸çŸ¥é“å¦‚ä½•éªŒè¯çš„ï¼Œå¯èƒ½æ˜¯åå°äººå·¥éªŒè¯ï¼Œä¿è¯å§“åä¸€è‡´å°±è¡Œï¼Œæ‰€ä»¥ä¸€å®šä¸Šä¼ è‡ªå·±çœŸå®çš„èº«ä»½è¯å°±ï¼Œåœ°å€ç”¨è‡ªå·±ä¸­å›½åœ°å€ï¼‰\n- W-8 formï¼Œä¸€å®šè¦é€‰éç¾å›½å±…æ°‘ï¼ˆå‹¾é€‰Noï¼‰ï¼Œç„¶åç‚¹å‡»æäº¤ï¼Œä¼šè¢«å¯¼èˆªè‡³è¡¨å•å¡«å†™é¡µé¢ï¼ŒåŸºæœ¬ä¿¡æ¯stripe å·²ç»å¸®ä½ é¢„å¡«äº†ï¼Œåªéœ€è¦ç­¾ä¸Šä¸ªäººå§“åå°±å¥½äº†\n\n![](/images/uploads/2021-06-02-w-8-form.png)\n\n[documents-for-identity-and-home-address-verification](https://support.stripe.com/questions/documents-for-identity-and-home-address-verification#upload)\n\n[w-8-forms-collected-by-stripe](https://support.stripe.com/questions/w-8-forms-collected-by-stripe)\n\nç­‰ç€è¿™ä¸¤ä¸ªé”™è¯¯å®Œæˆåï¼Œè¿™ä¸ªè´¦å·å°±ç®—çœŸæ­£æ¿€æ´»å®Œæˆï¼Œå¹¶å¯ä»¥å®Œæˆæç°ï¼ˆæ¯å¤©ï¼Œå¹¶ä¸”éå¸¸å¿«ï¼‰ã€‚\n\n![](/images/uploads/2021-06-02-stripe-payout.png)\n\n---\n\n### ä¸‡é‡Œæ±‡æç°åˆ°äººæ°‘å¸(æˆåŠŸ)\n\nç°åœ¨ä¸‡é‡Œæ±‡é¦™æ¸¯è´¦å·å·²ç»æœ‰æ”¶åˆ°çš„æ¸¯å¸äº†ï¼Œä½†å¦‚æœéœ€è¦çš„è¯ï¼Œéœ€è¦è½¬ä¸ºäººæ°‘å¸ï¼ˆå¯è½¬åˆ°æ”¯ä»˜å®ï¼‰ï¼Œä½†æ ¹æ®ä¸‡é‡Œæ±‡å®¢æˆ·ç»ç†è¯´æ˜ï¼Œè¿™æ˜¯éœ€è¦æä¾›ç›¸åº”å‡­æ®ï¼Œä¹Ÿå°±æ˜¯stripe æˆ–è€… paypal ä¸Šçš„æ”¯ä»˜è®°å½•ï¼Œè¡¨æ˜æ¥å†æ˜ç¡®ã€‚æç°è¿‡ä¸€æ¬¡ï¼Œå› ä¸ºé‡‘é¢ä¸å¤§ï¼Œå¹¶ä¸”æä¾›äº†paypay çš„æ”¶æ¬¾è®°å½•ï¼Œæ‰€ä»¥æˆåŠŸæç°ã€‚\n\nç‰¹åˆ«æé†’çš„æ˜¯ï¼Œè¿™ç¯‡æ–‡ç« ç›®çš„åªæ˜¯ä¸ºæ¿€æ´»stripeæŒ‡å—ï¼Œ ä¸ä¸ºè·¨å¢ƒè½¬è´¦æˆåŠŸè´Ÿè´£ï¼Œè¯·é…Œæƒ…é€‰æ‹©ã€‚\n\nç‰¹æ­¤å£°æ˜ï¼Œæœ¬æ–‡ç¦æ­¢è½¬è½½è‡³é™¤ troyyang.com, [itstripe.com](http://itstripe.com) ä»¥å¤–çš„ç½‘ç«™\n\n\nç›¸å…³æ¨èæ–‡ç« ï¼š   \n[wordpress stripeæ’ä»¶ï¼Œæ”¯æŒå¾®ä¿¡å’Œæ”¯ä»˜å®](https://troyyang.com/2020/12/30/wordpress-stripe-express-released/)   \n[stripeé›†æˆ å¾®ä¿¡å’Œæ”¯ä»˜å®](https://troyyang.com/2018/01/21/stripe_guide_alipay/)   ","tags":["stripe"],"categories":["stripe"]},{"title":"Wordpress æ’ä»¶ Stripe Express å‘å¸ƒå•¦ï¼","url":"/2020/12/30/wordpress-stripe-express-released/","content":"***\n\n## Stripe Express æ˜¯ä»€ä¹ˆï¼Ÿ\nç®€å•æ¥è¯´ï¼ŒStripe Express æ˜¯ä¸€æ¬¾é’ˆå¯¹wordpress å¹³å°ï¼Œå¸®åŠ©ä½ ä½¿ç”¨ stripe å¿«é€Ÿï¼Œæ–¹ä¾¿å®Œæˆè·¨å¢ƒæ”¯ä»˜çš„ä¸€æ¬¾å…è´¹æ’ä»¶ï¼ˆæ‰©å±•åŠŸèƒ½æ”¶è´¹ï¼‰ã€‚å…¶ä¸­ï¼ŒåŒ…æ‹¬å¤šç§å·²ç»åˆ›å»ºå¥½çš„æ”¯ä»˜ç»„ä»¶ï¼ŒåŒ…æ‹¬ä¸€æ¬¡æ€§æ”¯ä»˜(one-time)ï¼Œç”µå­é’±åŒ…ï¼ˆæ”¯ä»˜å®ï¼Œå¾®ä¿¡ï¼ŒApple Pay, Google Payï¼Œä¸‹é¢é‡ç‚¹ä¼šæåˆ°å¾®ä¿¡å’Œæ”¯ä»˜å®ï¼‰ï¼Œè¡¨å•æ”¯ä»˜ç­‰ç­‰ç»„ä»¶ï¼Œéœ€è¦æåŠçš„æ˜¯ï¼Œä¸Šé¢çš„ç»„ä»¶éƒ½æ”¯æŒå¸¸è§çš„å„ç§ä¿¡ç”¨å¡ï¼ŒMaster card, Visa, ç­‰ç­‰ç­‰ç­‰ï¼Œä»¥åŠå…¶ä»–å›½å®¶åœ°åŒºçš„ä¸»æµæ”¯ä»˜æ–¹å¼æ¯”å¦‚ Bancontact, FPX, EPS, SEPA, Giropay, Sofort, iDealã€‚\n\næ‰€ä»¥ï¼Œåªæœ‰ä½ æœ‰ä¸€ä¸ª Stripe çš„è´¦å·ï¼Œé‚£ä¹ˆè¶…è¿‡ä¸‰åå¤šä¸ªå›½å®¶åœ°åŒºçš„å®¢æˆ·éƒ½å¯ä»¥å‘ä½ æ”¯ä»˜ï¼ˆå¯¹äºå¾®ä¿¡å’Œæ”¯ä»˜å®ï¼Œä½ æ— éœ€ç”³è¯·æ”¯ä»˜å®æˆ–è€…å¾®ä¿¡çš„å•†å®¶è´¦å·ï¼Œå³å¯å…è´¹æ”¶æ¬¾ï¼‰ã€‚\n\n\né—®é¢˜: ä»€ä¹ˆäººæ›´éœ€è¦è¿™ä¸ªç»„ä»¶ï¼Ÿ   \nå›ç­”: ç°é˜¶æ®µï¼Œå› ä¸ºè¿˜æ²¡é›†æˆwoocommenceï¼Œ æ‰€ä»¥å¦‚æœä½ æ²¡æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”µå­å•†åŠ¡ç½‘ç«™æ¯”å¦‚ä½¿ç”¨ woocommenceæ­å»ºï¼Œåªæ˜¯ä¸€ä¸ªç®€å•çš„Wordpress ç½‘ç«™ï¼Œä½†æ˜¯ä½ åˆæœ‰è‡ªå·±çš„äº§å“æˆ–è€…æœåŠ¡éœ€è¦é”€å”®ï¼Œè€Œä½ åªæ˜¯æƒ³ä½ ç”¨æˆ·ç®€å•çš„ç‚¹å‡»è´­ä¹°ï¼Œä»˜æ¬¾ã€‚\n\n[wordpress æ’ä»¶ä¼ é€é—¨](https://wordpress.org/plugins/wp-stripe-express/)\n\n![](https://images.troyyang.com/stripe-express-org-preview.png)   \n\n## itstripe.com \n\n![](https://images.troyyang.com/itstripe-preview.png)   \n\nåœ¨æˆ‘ä»¬å›½å†…ï¼Œå¤§éƒ¨åˆ†äººè‚¯å®šçŸ¥é“Paypalï¼Œå´ä¸çŸ¥é“Stripeï¼Œæ›´åˆ«è¯´ç”¨è¿‡ï¼Œå½“ç„¶ä¹Ÿå’ŒStripe æš‚ä¸æ”¯æŒä¸­å›½å•†å®¶çš„åŸå› åˆ†ä¸å¼€ã€‚æ®Šä¸çŸ¥ï¼Œå›½å¤–Stripeæ™®åŠç¨‹åº¦è¿œå¤§äºæˆ‘ä»¬çš„æƒ³è±¡ï¼Œå¾ˆå¤šç½‘ç«™éƒ½ä¼šåŠ ä¸Šå¯¹Stripe çš„æ”¯æŒï¼Œå› ä¸ºè¿™æ„å‘³ç€ä½ çš„ç½‘ç«™å¯ä»¥é¢å‘å…¨ä¸–ç•Œè¶…è¿‡30ä¸ªä¸»è¦å›½å®¶çš„å®¢æˆ·æ”¶è´¹ï¼ŒåŒ…æ‹¬ä¸­å›½ï¼æ‰€ä»¥æƒ³è¦åšè·¨å¢ƒæ”¯ä»˜çš„è¯ï¼ŒStripe ä½ å¿…é¡»è¦ç†Ÿæ‚‰ï¼   \n\nä¼—æ‰€å‘¨çŸ¥ï¼ŒWordpresså…¨ä¸–ç•Œè¶…è¿‡40%çš„ç½‘ç«™éƒ½æ˜¯ä»–åˆ›å»ºçš„ï¼Œè€Œä¸”ç°åœ¨ä¹Ÿä¾æ—§ç«çˆ†ã€‚å†åŠ ä¸Šä¹‹å‰å¾ˆå¤šæœ‹å‹éƒ½åœ¨å’¨è¯¢æˆ‘å…³äº stripe åœ¨wordpressä¸Šçš„é—®é¢˜ï¼Œæ‰€ä»¥ä¸»è¦ä¾§é‡ç‚¹ä¼šæ˜¯åœ¨ stripe express è¿™æ¬¾æ’ä»¶ä¸Šã€‚å…¶æ¬¡ï¼Œç½‘ç«™ä¼šåŒ…æ‹¬äº§å“ä»‹ç»ï¼Œä»¥åŠæ’ä»¶çš„æ–‡æ¡£ï¼Œè¿˜æœ‰å’Œstripe ç›¸å…³é›†æˆæœåŠ¡ï¼Œå¦‚æœä½ æœ‰é›†æˆè¿™æ–¹é¢çš„éœ€æ±‚çš„è¯ï¼Œæˆ–è€…Web çš„æ”¯ä»˜å¼€å‘ï¼Œå¯ä»¥è”ç³»æˆ‘ä»¬ã€‚   \n\n## Stripeï¼Œå¾®ä¿¡ å’Œ æ”¯ä»˜å®   \nè¿™æ˜¯ä¸€ä¸ªæœ€é‡è¦çš„åŸå› ä¹‹ä¸€ä¿ƒä½¿æˆ‘æƒ³è¦åšè¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ã€‚æœ‰è¿™ä¹ˆä¸€éƒ¨åˆ†äººï¼š1. å°å•†å®¶æˆ–è€…ä¸ªäººç½‘ç«™ç”¨æˆ·æƒ³è¦æ¥å…¥å¾®ä¿¡æˆ–è€…æ”¯ä»˜å®ï¼Œæ–¹ä¾¿å›½å†…ç”¨æˆ·æ”¶è´¹ï¼Œ2. å›½å¤–çš„ä¸­å°ç½‘ç«™æƒ³è¦é’ˆå¯¹ä¸­å›½ç”¨æˆ·å¾®ä¿¡å’Œæ”¯ä»˜å®æ”¶è´¹ã€‚ä½†æ˜¯å¯¹äºä»–ä»¬è€Œè¨€ï¼Œç”±å…¶è€å¤–ï¼Œè¦æƒ³æ¥å…¥å¾®ä¿¡æˆ–è€…æ”¯ä»˜å®æ”¯ä»˜æ¥å£ï¼Œé—¨æ§›è¿˜æ˜¯æœ‰ç‚¹é«˜ï¼Œéœ€è¦å»ç”³è¯·å•†å®¶è´¦å·\n\nstripe å´åœ¨è¿™æ–¹é¢æœ‰ç€å¤©ç„¶ä¼˜åŠ¿ï¼Œç”±äºå·²ç»å’Œalipay å’Œ wechat è¾¾æˆåè®®ï¼ŒStripe å®Œå…¨å¯ä»¥å®ç°ä¸Šé¢çš„æ”¶è´¹ï¼Œå…¶ä¸­stripe ä¼šæ”¶å–3.4% + $0.50æ¯ç¬”çš„æœåŠ¡è´¹ã€‚   \n\nä¹‹å‰å†™è¿‡ä¸€ç¯‡å…³äº [stripeé›†æˆ å¾®ä¿¡å’Œæ”¯ä»˜å®](https://troyyang.com/2018/01/21/stripe_guide_alipay/)çš„æ–‡ç« ï¼Œåå“æŒºå¤§çš„ï¼Œçœ‹åˆ°å¾ˆå¤šè¯„è®ºå’Œè½¬è½½ï¼Œä¹Ÿæ”¶åˆ°å¾ˆå¤šå’¨è¯¢çš„é‚®ä»¶ï¼Œä½†æ˜¯ä¹‹å‰çš„é‚£ç¯‡ä»æŠ€æœ¯è§’åº¦å…¶å®æœ‰ç‚¹è€äº†ï¼Œæˆ‘ä¼šå¦å¤–æŠ½æ—¶é—´é‡æ–°å†™ä¸€ä¸ªæ›´é€šç”¨çš„é›†æˆæ–¹å¼ï¼ˆå·²ç»åœ¨è¿™æ¬¾æ’ä»¶ä¸­å®è·µäº†ï¼‰\n\n## åç»­\nå›æƒ³è¿™åŠå¹´å¤šçš„å¼€å‘æ—¶é—´ï¼ˆåŒ…æ‹¬æ’ä»¶å’Œå®˜ç½‘ï¼‰ï¼Œç™½å¤©æ­£å¸¸ä¸Šç­ï¼Œæ™šä¸Šç»§ç»­å¼€å‘ï¼Œè¿å‘¨æœ«éƒ½ä¸æƒ³å‡ºé—¨ï¼Œåƒæ‰“é¸¡è¡€ä¸€æ ·çš„å®Œå–„äº§å“ï¼Œç»ˆäºè¿æ¥äº†å‘å¸ƒçš„æ—¥å­ã€‚æ— è®ºè¿™æ¬¾æ’ä»¶å°†æ¥å¦‚ä½•ï¼Œå®‰è£…é‡æ€æ ·ï¼Œæœ‰è¿‡è¿™ä¹ˆä¸€æ®µä¸ºäº†æŸä¸ªç›®æ ‡è€Œå…¨åŠ›ä»¥èµ´çš„æ—¥å­ä¹Ÿæ˜¯æå¥½çš„ï¼\n\n","tags":["wordpress"],"categories":["web"]},{"title":"Mobxåœ¨é¡¹ç›®ä¸­çš„å®è·µ åŠ ä¸Reduxçš„æ¯”è¾ƒ","url":"/2020/12/20/mobx/","content":"\nä¹‹å‰åœ¨å…¬å¸FEEå†…éƒ¨åšè¿‡ä¸€æ¬¡æŠ€æœ¯åˆ†äº«ï¼Œä¸»è¦å…³äºMobxåœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨ä¸€å¹´åçš„ä½“éªŒä»¥åŠå’ŒRedux çš„ä¸€äº›æ¯”è¾ƒï¼ˆå› ä¸ºæˆ‘ä»¬é¡¹ç›®ä¹‹å‰çš„çŠ¶æ€ç®¡ç†é€‰å‹é€‰æ‹©çš„æ˜¯mobxï¼Œè€Œå…¶ä»–é¡¹ç›®ç»„çš„åŒå­¦é€‰æ‹©ä¸»è¦æ˜¯Reduxæˆ–è€…è¿˜åœ¨çº ç»“å¦‚ä½•é€‰ï¼‰ã€‚\n\nä»¥ä¸‹éƒ½æ˜¯æ ¹æ®æŸ¥è¯¢å„ç§èµ„æ–™åçš„ä¸ªäººç†è§£æ¦‚è§ˆ\n\n## Mobx Overview\n> Mobx looks like a properties tracking and reaction lib.   \n> åŸºç¡€éƒ¨åˆ†å°±çœäº†ï¼Œåªè¯´ç»“è®ºï¼šMobx çœ‹èµ·æ¥æ˜¯å±æ€§è¿½è¸ªåŠä½œå‡ºç›¸åº”ååº”çš„åº“ï¼Œå’ŒRedux ä¸ä¸€æ ·çš„æ˜¯ï¼Œä»–çš„çŠ¶æ€æ˜¯mutableçš„ã€‚\n### Mobx 4 & 5\n* Mobx 4 Limitations (Observable)\n* Mobx 5 Proxy based (Only ES 6 Browser, no polyfill)\n\n## Mobx & Third-Party view lib\n* mobx & mobx-react\n* redux & react-redux\n* mobx & mobx-arch & mobx-backbone æœ‰å—???\n\nMobx æ˜¯å¯ä»¥å•ç‹¬ä½¿ç”¨çš„ï¼Œè¿™ç‚¹å’ŒReduxä¸€æ ·ï¼Œå¯ä»¥ä¸éœ€è¦ä¾èµ–äºä»»ä½•UI åº“åƒï¼ŒReact, Vueï¼Œå½“ç„¶å¦‚æœæŠŠä»–ä»¬ç»“åˆåˆ°ä¸€èµ·ï¼Œé‚£æ‰èƒ½å‘æŒ¥å‡ºæœ€å¤§çš„ä½œç”¨ï¼Œæ‰€ä»¥å°±ç†æ‰€åº”å½“çš„æœ‰mobx-reactã€‚\n\næˆ‘ä»¬å…¬å¸å†…éƒ¨æœ‰ä¸ªUI åº“å«archï¼Œå¾ˆè€çš„äº†ï¼Œrequirejsæ—¶ä»£çš„ï¼Œæ¯”react, vue, angularè¿˜æ—©ï¼Œæ²¡æœ‰å“åº”å¼çš„æ›´æ–°ï¼Œæ ¸å¿ƒåªæœ‰ä¸€ä¸ªrender æ–¹æ³•ï¼Œæ‰€ä»¥å…¶å®å¯ä»¥é€šè¿‡Mobx ç®€å•æ”¹é€ ä¸ºå“åº”å¼çš„ï¼Œä¸€æ—¦å¤–éƒ¨å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼Œè‡³äºå†…éƒ¨çŠ¶æ€å˜›ï¼Œå‘µå‘µï¼Œä¸è€ƒè™‘äº†ï¼Œåæ­£è¿™åªæ˜¯ä¸ªä¾‹å­ã€‚\n```\nvar { observable, autorun } = require(\"mobx\");\nvar Entity = require('xx/xxxx/entity');\n\nvar todoStore = observable({\n  todos: [],\n  get completedCount() {\n    return this.todos.filter(todo => todo.completed).length\n  }\n})\n\nautorun(function () {\n  // For Backbone\n  this.xxxBackBoneComponent = new Entity({\n    model: todoStore.todos,\n    editable: true\n  });\n\n  // For Arch\n  active.render($html, () => {\n    this.xxArchComponent = arch.getComponent(xxx);\n  });\n})\n\ntodoStore.todos[0] = {\n  title: \"Take a walk\",\n  completed: false\n}\n```\n\n## Mobx Store Design\n* [Offical guide on Store design](https://mobx.js.org/defining-data-stores.html)\n* [Best Practice](https://medium.com/dailyjs/mobx-react-best-practices-17e01cec4140)\n* UI State & Domain State\n\nè¿™æ˜¯æˆ‘è§‰å¾—æœ€éš¾çš„éƒ¨åˆ†ï¼Œå¦‚ä½•è®¾è®¡å¥½Mobxçš„Storeï¼Ÿå®˜æ–¹ç»™å‡ºçš„ä¸€ä¸ª[guide](https://mobx.js.org/defining-data-stores.html) æ˜¯åˆ’åˆ†ä¸ºDomain store å’Œ UI storeã€‚Domain storeå’ŒReduxçš„one-single store å¯ä¸ä¸€æ ·ï¼Œè¿™é‡Œæ˜¯å¯ä»¥æœ‰å¤šä¸ªçš„ï¼Œåƒusers, books, movies, orders éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªDomain Storeï¼Œ è‡³äºUI storeï¼Œæš‚æ—¶æˆ‘ä»¬åªæ˜¯å­˜å‚¨ä¸€äº›å…¨å±€çš„å±æ€§ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­Storeçš„ç»“æ„å¤§è‡´å¦‚ä¸‹:\n```\nstores\n--root.ts\n--domain\n----aaaStore.ts\n----bbbStore.ts\n--ui\n----application.ts\n```\n\nroot.tsåˆå§‹åŒ–æ‰€æœ‰domainå’Œui store:\n```\nexport default class RootStore {\n  @observable\n  aaStore;\n\n  @observable\n  bbStore;\n\n  @observable\n  applicationUIStore;\n\n  constructor() {\n    // Domain Store Init\n    this.aaStore = new AStore(this);\n    this.bbStore = new BStore(this);\n    ...\n\n    // UI Store Init\n    this.applicationUIStore = new ApplicationUIStore(this);\n    ...\n  }\n}\n```\n\nä½†æ˜¯åœ¨å®é™…çš„é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å‘ç°å¤§éƒ¨åˆ†çš„çŠ¶æ€å…¶å®éƒ½æ˜¯æœ¬åœ°UIçŠ¶æ€ï¼Œï¼ˆä¹Ÿè®¸æœ‰äººè¯´ç”¨setStateå•Šï¼Œå¦‚æœä¸šåŠ¡å¤æ‚ï¼ŒçŠ¶æ€å¾ˆå¤š, å¹¶ä¸”åŸºæœ¬ä¼šä¾èµ–å…¶ä»–storeï¼Œæœ€å¥½æŠ½å‡ºæ¥ï¼‰æ‰€ä»¥ï¼Œé—®é¢˜æ¥äº†ï¼Œè¿™äº›ui storeæˆ‘ä»¬æ”¾åœ¨å“ªé‡Œå‘¢ï¼ŸåŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠContainer ç»„ä»¶é‡Œçš„çŠ¶æ€éš”ç¦»å¼€æ¥ï¼Œä¸ºä»€ä¹ˆéš”ç¦»ï¼Œä¸€æ˜¯å› ä¸ºUT ä¸å¥½å†™ï¼ˆå› ä¸ºæœ‰injectï¼Œæ‰€ä»¥åœ¨UTé‡Œéœ€è¦å†™å¾ˆå¤šProviderï¼‰ï¼ŒäºŒæ˜¯å‚»ç“œç»„ä»¶æ›´ä¸å®¹æ˜“å‡ºé”™ï¼Œå‚è€ƒReduxçš„connectç”¨æ³•ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸‹é¢çš„ç»“æ„ï¼š\n```\nContainerAComponent\n--ContainerAComponent.tsx\n--ContainerAComponentUIStore.ts\n```\nContainerAComponentUIStore.ts\n```\nexport default class ContainerAComponentUIStore {\n  rootStore;\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n  }\n\n  @observable\n  addHoc = '';\n  \n  @action.bound\n  onAdhocChange = (addHocNewValue) => {\n    ....\n  }\n```\nContainerAComponent.tsx\n```\nexport class ContainerAComponent extends React.Component {\n  handleAdhocChange = (e) => {\n    this.props.onAdhocChange(e.target.value);\n  }\n  ...\n}\nexport default connectComponentStore(ContainerAComponent, ContainerAComponentUIStore);\n```\nè¿™æ ·ï¼Œæˆ‘ä»¬å¯¼å‡ºäº†ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯ContainerAComponentï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ ç»Ÿä¼ propsçš„æ–¹å¼å»æµ‹è¯•ç»„ä»¶æ ¸å¿ƒå†…å®¹ï¼Œå¦ä¸€ä¸ªæ˜¯HOCç»„ä»¶ï¼Œå…¶å®æ˜¯ä¸ç”¨æµ‹è¯•çš„ã€‚\n\nè€Œè‡³äºconnectComponentStoreæ–¹æ³•ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„HOC\n```\nexport default (WrapperedComponent, ComponentStore) => {\n  @inject('appStore')\n  @observer\n  class Connect extends React.Component {\n    @observable componentStore;\n\n    constructor(props) {\n      super(props);\n      this.componentStore = new ComponentStore(props.appStore);\n      this.ref = createRef();\n    }\n\n    static displayName = `${WrapperedComponent.displayName || WrapperedComponent.name}-withUIStore`\n\n    componentDidMount() {\n      this.componentStore.mapState(this.props);\n    }\n\n    componentDidUpdate(preProps, preState) {\n      this.componentStore.mapState(this.props);\n    }\n\n    render() {\n      return (<WrapperedComponent ref={this.ref} {...this.componentStore.toProps} {...this.props} />);\n    }\n  }\n\n  return Connect;\n};\n```\n\næˆ‘ä»¬ä¸šåŠ¡é‡Œï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨åˆ°çš„è¿™ç§æœ¬åœ°UI Store + ç®€å•ç»„ä»¶ç»„åˆè¿™ç§æ–¹å¼ï¼Œä¹Ÿè®¸å°±æ˜¯æ‰€è°“çš„local state component ï¼ˆå¿˜äº†å“ªé‡Œå¬åˆ°çš„äº†ï¼‰\n\n### Mobx-State-Treeï¼ˆMSTï¼‰\nä¹Ÿè®¸MSTåœ¨å¤§å‹é¡¹ç›®ä¸­ä½¿ç”¨æ˜¯ä¸ªå¾ˆå¥½çš„æ–¹å¼ï¼Œä½†æˆ‘ä»¬æš‚æ—¶è¿˜æ²¡æœ‰å»å°è¯•ã€‚\n\n### Project Structure\nä¸‹é¢æ˜¯Mobxçš„ä¸€äº›é¡¹ç›®ç»„ç»‡ç»“æ„å‚è€ƒèµ„æ–™ï¼š\n\nhttps://medium.com/@daniel.bischoff/how-to-structure-your-mobx-react-app-8fd6d9d821a4     \nhttps://github.com/gothinkster/react-mobx-realworld-example-app   \n\n\n## Mobx-React vs Redux-React\nä¸ªäººç®€å•çš„ä¸€äº›çœ‹æ³•ï¼š\n* Workflow\n* Freestyle vs Strict\n* OOP styles vs FP\n* Small vs Large\n* Time-traval problem (Resolved by MST)\n* Container components (Inject vs Connect)\n* [redux-crud-example](https://github.com/sitepoint-editors/redux-crud-example/tree/master/src) & [mobx-crud-example](https://github.com/sitepoint-editors/mobx-crud-example/tree/master/src)\n\nhttps://medium.com/@cameronfletcher92/mobdux-combining-the-good-parts-of-mobx-and-redux-61bac90ee448   \nhttps://www.sitepoint.com/redux-vs-mobx-which-is-best/\n\n### Learning Redux\nåœ¨ä¸€äº›å°é¡¹ç›®ä¸­ç”¨è¿‡Redux, ä¸å¾—ä¸è¯´ï¼ŒReduxçš„å­¦ä¹ æˆæœ¬è¦æ¯”Mobxé«˜å¾—å¤šï¼Œæ¯”å¦‚ä¸‹é¢çš„ç‚¹ï¼Œ\nredux, reducer, action, container component, selectors(reselect), redux-thunk, normalizing, ducks, and more waiting...\n\n## Others links\n### [Mobx-Best-Practice](https://medium.com/dailyjs/mobx-react-best-practices-17e01cec4140)\n### Decorator (ES7/TS) vs no-decorators\n\n## End\nå¦‚æœä½ æœ‰æ›´å¥½Mobxä½¿ç”¨çš„ä¸€äº›å¿ƒå¾—ï¼Œæ¬¢è¿äº¤æµï¼\n","tags":["react"],"categories":["web"]},{"title":"çº¯JSå®ç°æŒ‰å¤šåˆ—æ’åº","url":"/2020/05/03/multi-sort-implement-with-native-js/","content":"\n### é‡è¦çš„äº‹æƒ…è¿˜æ˜¯è¦è¯´çš„\né¡¹ç›®é‡Œæ²¡å¼•ç”¨ **lodash** ï¼ˆå› ä¸ºå’Œ underscore.js å†²çªï¼‰\n\n### é—®é¢˜\næ•°æ®ç»“æ„ç±»ä¼¼è¿™ç§ï¼š\n```\nconst testData = [\n  { name: '1', primary: true, startDate: '2018-01-01T08:00:00Z', endDate: '2018-05-01T08:00:00Z' },\n  { name: 'A', primary: true, startDate: '2018-02-01T08:00:00Z', endDate: '2018-06-01T08:00:00Z' },\n  { name: 'a', primary: true, startDate: '2019-02-01T08:00:00Z', endDate: '2019-05-01T08:00:00Z' },\n  { name: 'b', primary: false, startDate: '2019-02-01T08:00:00Z', endDate: '2019-02-01T08:00:00Z' },\n]\n```\næœ€è¿‘é¡¹ç›®ä¸­æœ‰å¤§é‡çš„å¯¹æ’åºçš„æ–°éœ€æ±‚ï¼Œç”±å…¶æ˜¯æŒ‰å¤šåˆ—æ¥æ’åºï¼Œ æ–°éœ€æ±‚å¤§è‡´å¦‚ä¸‹ï¼š\n\n- Archived ä¸ºtrueçš„æ’åˆ—åˆ°æœ€åï¼Œå¦åˆ™æ’æœ€å‰é¢\n- ç„¶åï¼ŒæŒ‰ç…§ StartDate æ—¶é—´ï¼Œå¦‚æœæœ€æ–°ï¼Œåˆ™æ’å‰é¢\n- ç„¶åï¼Œå¦‚æœ StartDate ç›¸åŒï¼Œåˆ™æŒ‰ç…§ EndDate æ¥æ’ï¼Œ\n- ç„¶åï¼Œå¦‚æœ EndDate ä¹Ÿç›¸åŒï¼Œåˆ™æŒ‰ç…§ name çš„å­—æ¯è¡¨çš„é¡ºåºæ’\n\n\nåŒæ—¶å‘¢ï¼Œä¹‹å‰é¡¹ç›®ä¸­ä¹Ÿæœ‰å¾ˆå¤šç±»ä¼¼çš„éœ€æ±‚ï¼š\n\n- å…ˆæŒ‰ç…§ ModifiedDate æ’ï¼Œ\n- å¦‚æœç›¸åŒï¼Œåˆ™æŒ‰ name å­—æ¯è¡¨é¡ºåº\n\næˆ–è€…\n- Primary ä¸ºtrue çš„æ’å‰é¢\n- å¦‚æœPrimary ç›¸åŒï¼Œ æŒ‰ç…§ name å­—æ¯è¡¨æ’åº\n\nè¿˜æœ‰æ›´å¤šçš„ç±»ä¼¼éœ€æ±‚ï¼Œæˆ‘ä»¬é¡¹ç›®é‡ŒåŸæ¥æœ‰ä¸ª Sort.js çš„å…¬å…±æ–¹æ³•æ¥å¤„ç†è¿™äº›æ’åºï¼Œé€‰å–äº†å…¶ä¸­æœ€é•¿çš„ä¸€ä¸ª (å…¶å®ä¸Šé¢éœ€æ±‚çš„æ¯ä¸€ä¸ªå®ç°éƒ½å’Œè¿™ä¸ªå·®ä¸å¤š)\n```\nconst sortFlattenPrograms = (flattenPrograms) =>\n    flattenPrograms.sort((a, b) => {\n      // first sort by archived: unarchived first\n      if(a.archived && !b.archived) {\n        return 1;\n      } else if(!a.archived && b.archived) {\n        return -1;\n      }\n\n      // sort by start date: latest first\n      let dateCompareResult = compareDateLatestFirst(a.startDate, b.startDate);\n      if(dateCompareResult !== 0) {\n        return dateCompareResult;\n      }\n\n      // sort by end date: latest first\n      dateCompareResult = compareDateLatestFirst(a.endDate, b.endDate);\n      if(dateCompareResult !== 0) {\n        return dateCompareResult;\n      }\n\n      // sort by program name - location name: alphabetically (ignore case)\n      const nameCompareResult = compareStringAlphabeticallyIgnoreCase(getProgramFullName(a), getProgramFullName(b));\n      if(nameCompareResult !== 0) {\n        return nameCompareResult;\n      }\n\n      return 0;\n    });\n```\n\næ˜¯ä¸æ˜¯å¾ˆé•¿ï¼Œå¾ˆä¸‘ï¼Œè€Œä¸”è¿™åªæ˜¯ä¸€ä¸ªæ’åºï¼Œè¿˜æœ‰å¾ˆå¤šè¿™ç§å’Œ0æ¯”è¾ƒï¼Œç„¶åå†æ¯”è¾ƒï¼Œæ‰€ä»¥ç»§ç»­åŠ ä¸‹å»è‚¯å®šä¸å¯å–ï¼Œç»´æŠ¤æ˜¯ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼ŒUT ä¹Ÿå¾ˆéš¾å†™ï¼Œè¦æ˜¯èƒ½æŠ½å‡ºä¸­é—´éƒ¨åˆ†å°±å¥½äº†ï¼Ÿï¼Ÿï¼Ÿ\n\n### è§£å†³åŠæ³•\nå…ˆè´´ä»£ç ï¼Œå…¶å®æ ¸å¿ƒå°±æ˜¯æŠ½å–ä¸Šé¢çš„å„ç§comparatorï¼Œ å¹¶ä¸”é‡‡ç”¨é“¾å¼çš„æ–¹å¼æ‰§è¡Œï¼Œè¿™é‡Œä½¿ç”¨reduceæ–¹æ³•æ¥å–äº†ä¸ªå·§ï¼Œå…¶å®ï¼ŒæŸ¥çœ‹äº†lodashçš„å®ç°åï¼Œ ä»–ä»¬é‡‡ç”¨çš„æ˜¯ while å®ç°ã€‚\n\næ³¨æ„æ’åºçš„é¡ºåºï¼Œæ˜¯æŒ‰ç…§ä»å³åˆ°å·¦ï¼Œæˆ‘æƒ³çš„æ˜¯å°½é‡å’Œ **functional programming** çš„æ–¹å¼æ¥å†™ï¼Œå¹¶ä¸”compose æ–¹æ³•åœ¨lodash é‡Œä¹Ÿæ˜¯è¿™ä¸ªé¡ºåºï¼Œå¦‚æœæƒ³æ”¹ä¸ºä»å·¦å¾€å³ï¼Œåªéœ€è¦å°† **reduce** æ”¹ä¸º **reduceRight** å³å¯\n```\n/**\n   * Sort by order list from right to left\n   * For example: we want to order by start date, if date equal, then order by end date, if equal, then name\n   * composeOrderBy([oderByName, orderByEndDate, orderByStartDate])\n   * @param {*} comparators\n   */\n  const composeOrderBy = (comparators) => {\n    const makeChainedComparator = (first, next) => {\n      return function (a, b) {\n        var result = first(a, b);\n        if(result !== 0) return result;\n        return next(a, b);\n      };\n    };\n    return comparators.reduce(function (chained, first) {\n      return makeChainedComparator(first, chained);\n    });\n  };\n```\n\næ‰€ä»¥ï¼Œä¸Šé¢çš„éœ€æ±‚å¯ä»¥ç®€å•æ”¹ä¸ºä¸‹é¢ï¼Œå…¶å®comparators æ˜¯ä¸€ä¸ªæˆ‘é¢„å…ˆå®šä¹‰å¥½çš„å„ç§æ¯”è¾ƒæ–¹æ³•\n```\n// é¢„å…ˆå®šä¹‰çš„æ–¹æ³•\ncomparators = {\n  compareStringField: (field, ignoreCase = true)=> (a, b) => { ... },\n  compareBoolField: (field, trueFirst = true) => (a, b) => { ... },\n  compareDateLatestFirst: (field) => (a, b) => { ... },\n}\n\ndata.sort(composeOrderBy([\n        comparators.compareNameIgnoreCase(),\n        comparators.compareDateLatestFirst('endDate'),\n        comparators.compareDateLatestFirst('startDate'),\n        comparators.compareBoolField('archived', false)\n      ]));\n\ndata.sort(composeOrderBy([\n        comparators.compareNameIgnoreCase(),\n        comparators.compareDateLatestFirst('modifiedDate')\n      ]));\n```\n\næœ€ç»ˆè¿˜æ˜¯éœ€è¦ç”¨åˆ° arrayçš„sort æ–¹æ³•ï¼Œä½†ç”±äºè¿™ä¸æ˜¯çº¯å‡½æ•°ï¼Œæ‰€ä»¥ä¿é™©çš„åšæ³•å°±æ˜¯è°ƒç”¨sortå‰ï¼Œå…ˆåœ¨cloneä¸€ä¸‹","tags":["js"],"categories":["Web"]},{"title":"ç¥å¥‡çš„ ES6 ç»§æ‰¿æ‰§è¡Œé¡ºåºé—®é¢˜","url":"/2019/12/17/amazing-es6-exec-order-issue/","content":"åˆ·æ¨çš„æ—¶å€™æ— æ„é—´å‘ç°ä¸€ä½google å·¥ç¨‹å¸ˆå‘çš„ä¸€ä¸ªæ„Ÿå¹ï¼Œæ„Ÿå¹å‘ç°çš„ä¸€ä¸ªç¥å¥‡çš„JS 6ç»§æ‰¿é¡ºåºé—®é¢˜ã€‚ã€‚ã€‚\n\n![](/images/uploads/2019-12-17-js6-class-order-miracle-tweeter.jpeg)\n\n![](/images/uploads/2019-12-17-js6-class-order-miracle.png)\n\n\n\nä»”ç»†çœ‹äº†çœ‹ï¼Œç¡®å®å¥½ç¥å¥‡ï¼Œäºæ˜¯å¥½å¥‡çš„çœ‹äº†çœ‹babelè½¬æ¢å‡ºçš„ç»“æœï¼š\n\n```\nvar SuperClass = function SuperClass() {\n  _classCallCheck(this, SuperClass);\n\n  _defineProperty(this, \"foo\", function () {\n    return console.log('foo init in supper class');\n  }());\n\n  console.log('super construtor');\n};\n\nvar WhatEver =\n/*#__PURE__*/\nfunction (_SuperClass) {\n  _inherits(WhatEver, _SuperClass);\n\n  function WhatEver() {\n    var _this;\n\n    _classCallCheck(this, WhatEver);\n\n    console.log('before sub class constructor');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WhatEver).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"foo\", function () {\n      return console.log('foo init in sub class');\n    }());\n\n    console.log('after sub class constructor');\n    return _this;\n  }\n\n  return WhatEver;\n}(SuperClass);\n\nnew WhatEver();\n```\n\nå°±å’Œä»–çŒœæµ‹çš„ä¸€æ ·ï¼šæ²¡æœ‰supperçš„æ—¶å€™ï¼Œå­—æ®µçš„åˆå§‹åŒ–æ˜¯æ—©äºæ„é€ å‡½æ•°æ‰§è¡Œçš„ï¼Œæœ‰supperçš„æ—¶å€™ï¼Œå­—æ®µåˆå§‹åŒ–æ˜¯åœ¨æ„é€ å‡½æ•°é‡Œçš„superåæ‰§è¡Œï¼\n\nä¸ªäººçœ‹æ³•æ˜¯æ•…æ„æ”¾superä¹‹åæ˜¯ä¸ºäº†èƒ½åœ¨å­—æ®µé‡Œè®¿é—®åˆ°çˆ¶ç±»çš„å­—æ®µï¼Ÿ\n","tags":["js"],"categories":["web"]},{"title":"ä½¿ç”¨NetlifyCMSåœ¨çº¿ç¼–è¾‘Githubä¸Šçš„åšå®¢","url":"/2019/11/24/githug-netlify/","content":"### Netlify CMS ä»‹ç»\n\nä½¿ç”¨Netlify CMSæˆ‘æ„Ÿè§‰æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\n\n* æ— ç¼æ”¯æŒHexo ç­‰åå‡ ç§ä¸»æµé™æ€ç½‘ç«™ç”Ÿæˆå™¨ çš„ **æ–‡ç« åå°ç®¡ç†***   \n* å¯è§†åŒ–åœ¨çº¿ç¼–è¾‘ã€æ–°å¢github ä¸Šçš„markdown\n* è‡ªå¸¦å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½\n* è‡ªåŠ¨éƒ¨ç½²\n\næ”¯æŒåˆ—è¡¨ï¼š\nJekyll, GitBook,Hugo, Gatsby, Nuxt, Next, Gridsome, Zola,Hexo, Middleman, Jigsaw,Spike ,Wyam,Pelican,VuePress,Elmstatic,11ty,preact-cli\n\n![](/images/uploads/2019-11-24-netlifycms-list.png)\n\n### ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒ\n\nå¯¹äºæˆ‘çš„æƒ…å†µï¼šä½¿ç”¨Hexo ç½‘ç«™ç”Ÿæˆå™¨ï¼Œæ‰˜ç®¡åœ¨githubä¸Š <https://github.com/Troy-Yang/troy-yang.github.io>ï¼Œå…¶ä¸­Source branchæ˜¯å­˜æ”¾markdownç­‰ç”Ÿæˆå‰åˆ†æ”¯ï¼ŒMaster branchå­˜æ”¾çš„æ˜¯ç”Ÿæˆåçš„é™æ€æ–‡ä»¶åˆ†æ”¯ã€‚\nå¯¹äºä»¥å‰ï¼Œå¦‚æœè¦å†™ä¸€ç¯‡æ–‡ç« ï¼ŒåŸºæœ¬æ˜¯åœ¨source åˆ†æ”¯é‡Œï¼Œæ–°å¢ä¸€ä¸ªmarkdownæ–‡ä»¶ï¼ˆå¯githubä¸Šåœ¨çº¿æ·»åŠ æˆ–è€…æœ¬åœ°æ–°å¢ç„¶åpushï¼‰ï¼Œç„¶åè‡ªåŠ¨è§¦å‘github ä¸Šé…ç½®çš„travis è‡ªåŠ¨éƒ¨ç½²æµç¨‹ï¼Œæ•´ä½“æ„Ÿè§‰å·²ç»å¾ˆä¸é”™äº†ã€‚ç°åœ¨é…ç½®ä¸ŠNetlify CMSåï¼Œ å¯è§†åŒ–çš„åœ¨çº¿ç¼–è¾‘ä»¥åŠå›¾ç‰‡ç®¡ç†æ›´åŠ æ–¹ä¾¿ï¼Œå¯ä»¥éšæ—¶éšåœ°å‘æ–‡ç« ã€‚\nå¯æƒœ, Netlifyæœ‰ä¸ªè‡´å‘½ç¼ºç‚¹ï¼š**éœ€è¦ç¿»å¢™è®¿é—®**\n\n### HEXO  NetlifyCMS é…ç½®\n\nåªéœ€è¦åœ¨hexo çš„source/ ç›®å½•ä¸‹æ·»åŠ admin ç›®å½•ï¼Œæ–°å¢ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶ï¼š\n\n```\nconfig.yml\nindex.html\n```\n\nconfig.ymléœ€è¦æ ¹æ®è‡ªå·±æƒ…å†µè¿›è¡Œé…ç½®ï¼š\n\n```\nbackend:\n  name: git-gateway\n  branch: Source\n\n# This line should *not* be indented\nmedia_folder: \"source/images/uploads\" # Media files will be stored in the repo under images/uploads\npublic_folder: \"/images/uploads\" # The src attribute for uploaded media will begin with /images/uploads\n\ncollections:\n  - name: \"blog\" # Used in routes, e.g., /admin/collections/blog\n    label: \"Post\" # Used in the UI\n    folder: \"source/_posts\" # The path to the folder where the documents are stored\n    create: true # Allow users to create new documents in this collection\n    slug: \"{{slug}}\" # Filename template, e.g., YYYY-MM-DD-title.md\n    fields: # The fields for each document, usually in front matter\n      - {label: \"Layout\", name: \"layout\", widget: \"hidden\", default: \"post\"}\n      - {label: \"Title\", name: \"title\", widget: \"string\"}\n      - {label: \"Publish Date\", name: \"date\", widget: \"datetime\"}\n      - {label: \"Tags\", name: \"tags\", widget: \"list\", required: false}\n      - {label: \"Categories\", name: \"categories\", widget: \"list\", required: false}\n      - {label: \"Photos\", name: \"photos\", widget: \"list\", required: false}\n      - {label: \"Excerpt\", name: \"excerpt\", widget: \"string\", required: false}\n      - {label: \"Body\", name: \"body\", widget: \"markdown\"}\n      - {label: \"Permalink\", name: \"permalink\", widget: \"string\", required: false}\n      - {label: \"Comments\", name: \"comments\", widget: \"boolean\", default: true, required: false}\n```\n\nindex.html\n\n```\n<!doctype html>\n<html>\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>Content Manager</title>\n</head>\n<body>\n  <!-- Include the script that builds the page and powers Netlify CMS -->\n  <script src=\"https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js\"></script>\n  <script src=\"https://identity.netlify.com/v1/netlify-identity-widget.js\"></script>\n</body>\n</html>\n```\n\n### Netlify ç«¯é…ç½®\n\n#### åˆ›å»º Netlify website\n\næ³¨æ„ï¼šå’Œå¤§éƒ¨åˆ†äººçš„åšæ³•ä¸åŒçš„æ˜¯ï¼Œæˆ‘Deployåˆ°çš„åœ°æ–¹å¹¶ä¸æ˜¯æ‰˜ç®¡åœ¨Netlifyè‡ªå·±çš„å¹³å°ä¸Šï¼Œè€Œæ˜¯githubä¸Šï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘é€‰æ‹©éƒ¨ç½²çš„æ˜¯Sourceåˆ†æ”¯ï¼Œè€Œä¸æ˜¯Masterï¼Œå› ä¸ºæˆ‘åªæ˜¯æƒ³è¦Netlifyå»ä¿®æ”¹æˆ‘çš„Sourceåˆ†æ”¯ï¼Œç„¶åè§¦å‘Travisè‡ªåŠ¨å‘å¸ƒåˆ°Masteråˆ†æ”¯ã€‚\n\nä½†æ˜¯æˆ‘ä¾æ—§éœ€è¦å¡«å†™Netlifyçš„éƒ¨ç½²ï¼Œå› ä¸ºNetlifyä¼šè‡ªåŠ¨å¸®æˆ‘åˆ›å»ºåŸŸåä¸ºtroyyang.netlify.comçš„ç½‘ç«™ï¼Œä»»ä½•æˆ‘Sourceåˆ†æ”¯ä¸Šçš„ä¿®æ”¹ä¹Ÿä¼šè§¦å‘è¿™ä¸ªç½‘ç«™çš„è‡ªåŠ¨éƒ¨ç½²\n\n![](/images/uploads/2019-11-24-create-netlify-website.png)\n\n#### å¼€å¯Netlify Identity å’Œ Git Gateway\n\nåœ¨Setting çš„ Identityé€‰é¡¹ä¸‹ï¼š\n\n1. Enable Identity service\n2. External providers æ–°å¢github\n3. Enable Git Gateway\n\n### å‘å¸ƒæµ‹è¯•\næ‰“å¼€ https://troyyang.netlify.com/admin/ ç„¶åä½¿ç”¨github Oauthç™»å½•å³å¯çœ‹åˆ°ï¼š\n\n![](/images/uploads/2019-11-24-netlify-home.png)\n\n![](/images/uploads/2019-11-24-netlify-create.png)\n\næ–°å¢æ–‡ç« åï¼Œ ä½ ä¼šå‘ç°github ä¸Šçš„sourceç›®å½•ä¸‹çš„_post ç›®å½•çš„markdown æ–‡ä»¶æ–°å¢äº†ï¼Œå¦‚æœä¸Šä¼ äº†å›¾ç‰‡ï¼Œä¹Ÿä¼šçœ‹åˆ°sourceç›®å½•ä¸‹å¤šäº†images/uploadç›®å½•ï¼ŒåŒæ—¶https://troyyang.netlify.com å’Œ https://troyyang.com ä¸‹ä¹Ÿè‡ªåŠ¨å‘å¸ƒäº†æ–°çš„æ–‡ç« , ä¸¤è€…éƒ½æ˜¯å› ä¸ºSourceåˆ†æ”¯é‡Œæ–°å¢äº†æ–‡ä»¶å¯¼è‡´çš„è‡ªåŠ¨éƒ¨ç½²ã€‚\n\n![](/images/uploads/2019-11-24-netlify-file-structure.png)\n![](/images/uploads/2019-11-24-troyyang.png)\n![](/images/uploads/2019-11-24-netlify.png)\n\n### é—®é¢˜\nå½“æˆ‘å°è¯•æ‰“å¼€ https://troyyang.com/admin/ ä½¿ç”¨github Oauthç™»å½•æ—¶ï¼Œç»“æœæŠ¥é”™ï¼Œè€Œhttps://troyyang.netlify.com/admin/åˆ™æ²¡æœ‰ï¼š\n```\nFailed to load settings from /.netlify/identity\n```\n![](/images/uploads/2019-11-24-netlify-admin-error.png)\n\næˆ‘æ€€ç–‘æ˜¯å› ä¸ºhttps://troyyang.comæ˜¯æ‰˜ç®¡åœ¨githubä¸Šï¼Œè€Œä¸æ˜¯netlifyä¸Šå¯¼è‡´çš„ã€‚\n\n\nEnjoy!\n","tags":["netlify"],"categories":["web"]},{"title":"AWSç³»åˆ—ä¹‹ä½¿ç”¨æ— æœåŠ¡å™¨æ¶æ„ä½ çš„ç½‘ç«™","url":"/2018/12/16/aws_serverless/","content":"***\n### Serverless æœ‰ä»€ä¹ˆç”¨å•Šï¼Ÿ\nJasonæœ€è¿‘åˆå‡ºæ–°æƒ³æ³•äº†ï¼Œæƒ³è¦åšä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œå¥½çš„ï¼Œæ²¡é—®é¢˜ï¼Œä¸å°±æ˜¯åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…æ•°æ®åº“ï¼Œéƒ¨ç½²å¥½ç½‘ç«™å—ï¼Ÿå¯ç­”æ¡ˆæ˜¯noï¼Œä»–ä¸æ˜¯ä¸“ä¸šäººå‘˜ï¼Œæˆ‘ä¹Ÿä¸å¯èƒ½æ°¸è¿œç»´æŠ¤è¿™ä¸ªæœåŠ¡å™¨ï¼Œæ›´é‡è¦çš„æ˜¯æœåŠ¡å™¨å¼€ç€å°±è¦ç¾åˆ€å•Šï¼Œè¿˜ä¸èƒ½åœï¼Œæ€ä¹ˆåŠï¼Ÿæœ‰æ²¡æœ‰å¯ä»¥ä¸ç”¨æœåŠ¡å™¨çš„ç½‘ç«™ï¼Œæœ‰å•Šï¼Œä½ è‡ªå·±çš„é™æ€åšå®¢ä¸å°±æ˜¯åªç”¨åˆ°äº†s3æˆ–è€…githubçš„é™æ€é¡µé¢æ‰˜ç®¡å—ï¼Ÿå¯æ˜¯æ•°æ®åº“å‘¢ï¼Œåå°apiå‘¢ï¼Ÿé¢ï¼Œè¿™ä¸ªå˜›ã€‚ã€‚ã€‚   \n\nå¥½äº†ï¼ŒæˆåŠŸå¼•å‡ºè¯é¢˜ï¼Œè¦çŸ¥é“è¿™æ˜¯21ä¸–çºªçš„äº‘æ—¶ä»£ï¼Œåªæœ‰ä½ æƒ³ä¸åˆ°ï¼Œæ²¡æœ‰åšä¸åˆ°çš„ï¼Œè¿™ä¸ï¼ŒAWSæ—©å°±æå‡ºäº†[Serverless](https://aws.amazon.com/cn/serverless/?nc1=h_ls)è§£å†³æ–¹æ¡ˆï¼šS3 + GateWay API + Lambda + DynamDBï¼Œå…¶ä¸­ä¸¾ä¾‹çš„ä¸€ä¸ªå¤©æ°”çš„appæ¶æ„ï¼š\n\n![image](https://images.troyyang.com/2018-12-16-Lambda-WebApplications.png)\n\nå…¶ä¸­s3åšé™æ€é¡µé¢æ‰˜ç®¡ï¼Œç”¨æˆ·è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Œè°ƒç”¨Gateway APIæä¾›åˆ°æ¥å£ï¼Œæ¥å£æ˜ å°„åˆ°LambdaæœåŠ¡ç«¯æ¥å£ï¼ŒLambdaå†è´Ÿè´£å»å¤„ç†å’Œæ•°æ®åº“ç›¸å…³åˆ°æ“ä½œã€‚æ•´ä¸ªè¿‡ç¨‹ä¸éœ€è¦æœåŠ¡å™¨ï¼Œè€Œä¸”è´¹ç”¨æ˜¯æä½çš„ï¼ŒæŒ‰é‡ä»˜è´¹ï¼Œå¯æ‰©å±•æ€§ä¹Ÿå¾ˆå¼ºï¼ŒåŸºæœ¬åšåˆ°å¯é…ç½®åŒ–ã€‚è¯´äº†è¿™ä¹ˆå¤šï¼Œè¿˜æ˜¯å¾—ç”¨è¿‡æ‰çŸ¥é“å¥½ä¸å¥½ã€‚\n\n### å®ç°æ€è·¯\n1. æœåŠ¡ç«¯RestFullï¼š Node express å®ç°RestFull API\n2. åˆ›å»ºlambdaå¹¶ä¸Šä¼ æœåŠ¡ç«¯ä»£ç \n3. é…ç½®API Gatewayæ˜ å°„åˆ°lambdaå‡½æ•°\n4. å®¢æˆ·ç«¯å®ç°ï¼š Bootstrap å®ç°ç™»å½• å’Œ ç®¡ç†é¡µé¢\n5. ä¿®æ”¹å®¢æˆ·ç«¯apiæ¥å£åœ°å€å¹¶ä¸Šä¼ è‡³S3\n\nå…¶ä¸­ï¼Œåˆ°ç¬¬ä¸‰æ­¥çš„æ—¶å€™æˆ‘ä»¬å°±å·²ç»åˆ›å»ºå¥½äº†ä¸€ä¸ªå®Œæ•´çš„æ— æœåŠ¡å™¨çš„ Restfull APIï¼Œå‰©ä¸‹çš„å°±æ˜¯å®¢æˆ·ç«¯è°ƒç”¨äº†ï¼Œå®¢æˆ·ç«¯è°ƒç”¨è¿™ä¸ªå°±å¯ä»¥æ˜¯äº”èŠ±å…«é—¨çš„äº†ï¼Œè¿™ä¹Ÿä¸æ˜¯æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹ã€‚\n\n### ç®€å• RestFull æœåŠ¡ç«¯å®ç°\næœåŠ¡ç«¯çš„å®ç°å’Œå¹³æ—¶å®ç°ä¸€ä¸ªNode RestFull apiçš„å®Œå…¨æ²¡æœ‰ä»»ä½•åŒºåˆ«, éƒ¨åˆ†ä»£ç å¦‚ä¸‹:\napp.js\n```\n'use strict';\n\nconst express = require('express');\nconst app = express();\nconst bodyParser = require('body-parser');\nconst cors = require('cors');\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(cors());\n\nlet contacts = require('./data');\n\napp.get('/api/contacts', (request, response) => {\n  if (!contacts) {\n    response.status(404).json({ message: 'No contacts found.' });\n  }\n  response.json(contacts);\n});\n\nconst hostname = 'localhost';\nconst port = 3001;\nconst server = app.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`);\n});\n\nmodule.exports = app\n\n```\n\nè¿™ä¸€æ­¥åšå®Œï¼Œç¡®ä¿æ‰€æœ‰æ¥å£éƒ½èƒ½é€šè¿‡è®¿é—® localhost:3001/api/contacts\n\n![image](https://images.troyyang.com/2018-12-16-restful-success.png)\n\n### aws-serverless-express\nè¦ä½¿å¾—ä¸Šé¢çš„æœåŠ¡ç«¯ä»£ç èƒ½åœ¨lambdaä¸­å…è®¸ï¼Œåªéœ€å€ŸåŠ© npm åŒ…[aws-serverless-express](https://github.com/awslabs/aws-serverless-express)\n\nåœ¨ç›®å½•ä¸‹æ–°å¢ lambda.jsæ–‡ä»¶\n```\n// lambda.js\n'use strict'\nconst awsServerlessExpress = require('aws-serverless-express')\nconst app = require('./app')\nconst server = awsServerlessExpress.createServer(app)\n\nexports.handler = (event, context) => awsServerlessExpress.proxy(server, event, context)\n```\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åœ¨ app.jsæœ€åä¸€è¡Œexportsçš„åŸå› \n```\nmodule.exports = app\n```\næ­¤æ—¶ï¼Œå°†æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬node_moduleç›®å½•å…¨éƒ¨æ‰“åŒ…ä¸º.zip æ–‡ä»¶ä¸ºåé¢ä½¿ç”¨ã€‚\n### åˆ›å»º lambda\n#### åˆ›å»º IAM role\nåˆ›å»º Lambdaçš„IAM Roleæ˜¯å¿…é¡»çš„ï¼Œä»–æŒ‡å®šäº†å½“å‰lamdaèƒ½è®¿é—®åˆ°çš„èµ„æºæœ‰é‚£äº›ï¼Œä»æˆ‘ä»¬çš„åˆ—å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°DynamoDB, åŒæ—¶ä¸ºäº†æ–¹ä¾¿debugï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°cloudwatchæœåŠ¡ ï¼ˆè¿™ä¸ªå¯¹äºæŸ¥æ‰¾é—®é¢˜éå¸¸æœ‰ç”¨ï¼‰ã€‚\n\nç™»å½•aws consoleï¼Œæ‰“å¼€ Service æ‰¾åˆ° IAM ï¼Œå†é€‰æ‹©Rolesï¼Œç‚¹å‡» create role æŒ‰é’® åå¦‚å›¾ï¼Œ(ç¬¬ä¸‰æ­¥å¯é€‰)ï¼š   \n![image](https://images.troyyang.com/2018-12-16-lambda-create-role-step1.png)   \n![image](https://images.troyyang.com/2018-12-16-lambda-create-role-step2.png)   \n![image](https://images.troyyang.com/2018-12-16-lambda-create-role-step4.png)   \n\n#### åˆ›å»º lambda å‡½æ•°\næ‰“å¼€Service æ‰¾åˆ°lambda, é€‰æ‹© create functionï¼š   \n![image](https://images.troyyang.com/2018-12-16-create-lambda.png)\n\nåˆ›å»ºåï¼Œåœ¨ä»£ç è¾“å…¥ç§ç±»ä¸­é€‰æ‹©ä¸Šä¼  .zip æ–‡ä»¶ï¼š   \n![image](https://images.troyyang.com/2018-12-16-lambda-manage.png)\n\nå°†æœåŠ¡ç«¯ä»£ç æ•´ä¸ªæ‰“åŒ… ï¼ˆæ³¨æ„ä¸€å®šè¦åŒ…æ‹¬packagesç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼‰ç„¶åä¸Šä¼ ï¼Œå¤§å°ä¸èƒ½è¶…è¿‡10mï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œå¯ä»¥åœ¨ä»£ç è¾“å…¥ç§ç±»é€‰æ‹©s3ä¸Šä¼ ã€‚ä¸Šä¼ å®Œæˆåï¼ŒæŒ‡å®šå…¥å£æ–‡ä»¶ï¼ˆå³åœ¨å¤„ç†ç¨‹åºï¼‰ä¸º lambda.handlerï¼Œ æ­¤æ–‡ä»¶å°†ä¼šæ˜ å°„åˆ° lambda.jsæ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µï¼Œå¦‚æœä¸Šä¼ çš„zipåŒ…ä¸æ˜¯å¾ˆå¤§ï¼Œawsä¼šè‡ªåŠ¨åˆ—å‡ºzipé¡¹ç›®ç›®å½•å¯ä¾›åœ¨çº¿ç¼–è¾‘ï¼Œä½†å¦‚æœå¤§äº†çš„åŒ–ï¼Œæ¯”å¦‚å¥½å‡ å…†ï¼Œåˆ™æœ‰å¯èƒ½ä¸ä¼šåˆ—å‡ºé¡¹ç›®ç›®å½•ï¼Œæ¯æ¬¡ä¿®æ”¹åˆåªèƒ½é‡æ–°ä¸Šä¼ ã€‚\n\n![image](https://images.troyyang.com/2018-12-16-lambda-list-file.png)\n\nå½“ç„¶ï¼Œå¦‚æœnode ä»£ç é‡ŒåŒ…æ‹¬äº†ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œä½ ä¹Ÿå¯ä»¥ä¸º lambda åšä¸€äº›ç¯å¢ƒå˜é‡çš„è®¾ç½®ï¼š\n\n![image](https://images.troyyang.com/2018-12-16-lambda-env.png)\n\nä¸€åˆ‡okåï¼Œå°±å¯ä»¥æµ‹è¯•äº†ï¼Œå…³äºlambdaçš„æµ‹è¯•ï¼Œåˆ™ç›¸å¯¹è¿˜æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä¹Ÿæ˜¯æœ€è¿‘æ‰ç¨å¾®æ‡‚é‚£ä¹ˆä¸€ç‚¹ã€‚\n#### æµ‹è¯• lambda å‡½æ•°\n\nåœ¨åˆ›å»ºå¥½çš„lambda å‡½æ•°æ—ï¼Œç‚¹å‡»é…ç½®æµ‹è¯•äº‹ä»¶æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºå¯¹è¯æ¡†åˆ›å»ºæµ‹è¯•äº‹ä»¶ä¸­é€‰æ‹©åˆ›å»ºæ–°æµ‹è¯•äº‹ä»¶ï¼Œåœ¨äº‹ä»¶æ¨¡æ¿ä¸­é€‰æ‹© Amazon API Gateway AWS Proxy, å¹¶ç»™ä¸ªæµ‹è¯•åç§°ï¼Œå¦‚å›¾ï¼š\n![image](https://images.troyyang.com/2018-12-16-lambda-create-test.png)\n\né€‰æ‹©Amazon API Gateway AWS Proxyæ˜¯å› ä¸ºæˆ‘ä»¬çš„è¿™ä¸ªlambdaå‡½æ•°æœ€ç»ˆä¼šè¢«API Gateway è§¦å‘è°ƒç”¨ï¼ŒåŒæ—¶ç”±äºé»˜è®¤çš„äº‹ä»¶æ¨¡æ¿æ˜¯ post çš„è¯·æ±‚æ–¹å¼ï¼Œè€Œæˆ‘ä»¬çš„è¿™ä¸ªæœåŠ¡ç«¯åªæœ‰ä¸€ä¸ªapi/contactsçš„getæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´æ”¹äº‹ä»¶å†…å®¹ä¸ºï¼š\n```\n{\n  \"resource\": \"/{proxy+}\",\n  \"path\": \"/api/contacts\",\n  \"httpMethod\": \"get\",\n  \"headers\": {\n    \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n    \"Accept-Encoding\": \"gzip, deflate, sdch\",\n    \"Accept-Language\": \"en-US,en;q=0.8\",\n    \"Cache-Control\": \"max-age=0\",\n    \"CloudFront-Forwarded-Proto\": \"https\",\n    \"CloudFront-Is-Desktop-Viewer\": \"true\",\n    \"CloudFront-Is-Mobile-Viewer\": \"false\",\n    \"CloudFront-Is-SmartTV-Viewer\": \"false\",\n    \"CloudFront-Is-Tablet-Viewer\": \"false\",\n    \"CloudFront-Viewer-Country\": \"US\",\n    \"Host\": \"1234567890.execute-api.ap-northeast-1.amazonaws.com\",\n    \"Upgrade-Insecure-Requests\": \"1\",\n    \"User-Agent\": \"Custom User Agent String\",\n    \"Via\": \"1.1 08f323deadbeefa7af34d5feb414ce27.cloudfront.net (CloudFront)\",\n    \"X-Amz-Cf-Id\": \"cDehVQoZnx43VYQb9j2-nvCh-9z396Uhbp027Y2JvkCPNLmGJHqlaA==\",\n    \"X-Forwarded-For\": \"127.0.0.1, 127.0.0.2\",\n    \"X-Forwarded-Port\": \"443\",\n    \"X-Forwarded-Proto\": \"https\"\n  }\n}\n```\nä¿å­˜æµ‹è¯•äº‹ä»¶ï¼Œå¹¶ç‚¹å‡»æ‰§è¡Œï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä¼šå¾—åˆ°å¦‚ä¸‹:\n![image](https://images.troyyang.com/2018-12-12-lambda-test-success.png)\n\n### åˆ›å»º API Gateway\næ‰¾åˆ°Serviceä¸‹åˆ°API Gatewayï¼Œå¹¶ç‚¹å‡»æ–°å»º api,   \n\n![image](https://images.troyyang.com/2018-12-16-create-api-gateway.png)   \næ–°å¢ api èµ„æºï¼ˆè·¯å¾„ï¼‰   \n![image](https://images.troyyang.com/2018-12-16-api-gateway-create-api-source.png)   \né€‰æ‹© api èµ„æºï¼Œå†æ–°å¢å­èµ„æºï¼Œå¹¶é€‰ä¸ºproxy   \n![image](https://images.troyyang.com/2018-12-16-api-gateway-create-source.png)   \né€‰æ‹© proxy èµ„æºï¼Œåˆ›å»º é›†æˆç¯å¢ƒä¸ºæˆ‘ä»¬åˆ›å»ºå¥½çš„lambda å‡½æ•°   \n![image](https://images.troyyang.com/2018-12-16-api-gateway-create-method.png)   \n\nåˆ›å»ºå®Œæˆä¹‹åï¼Œåœ¨æ“ä½œé€‰é¡¹ä¸­ï¼Œé€‰æ‹©éƒ¨ç½²ï¼Œå¼¹å‡ºå¯¹è¯æ¡†å¹¶å‘½åä¸ºdevé˜¶æ®µï¼š   \n![image](https://images.troyyang.com/2018-12-16-api-gateway-deploy.png)   \n\néƒ¨ç½²å®Œæˆåï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š   \n![image](https://images.troyyang.com/2018-12-16-api-gateway-deploy-success.png)\n\n### API Gateway æµ‹è¯•\nåœ¨éƒ¨ç½²å®Œæˆåï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸Šè¿°ç»“æœä¸­å¾—åˆ°å‘å¸ƒå‡ºæ¥çš„api åœ°å€ä¸º  \n>https://ijihnuupmh.execute-api.ap-northeast-1.amazonaws.com/dev\n\næ­¤æ—¶å¦‚æœç›´æ¥è®¿é—®ï¼Œä¼šå¾—åˆ°Missing Authentication Tokençš„é”™è¯¯ï¼ŒåŸå› æ˜¯æˆ‘ä»¬åœ°å€ä¸å¯¹\n```\n{\"message\":\"Missing Authentication Token\"}\n```\næ­£ç¡®åœ°å€åº”è¯¥ä¸º:\n>https://ijihnuupmh.execute-api.ap-northeast-1.amazonaws.com/dev/api/contacts\n\n![image](https://images.troyyang.com/2018-12-16-api-gateway-deploy-url-success.png)   \n\nç”±äºä¸Šè¿°åœ°å€æ˜¯æ°¸ä¹…çš„ï¼Œé™¤éä½ é‡æ–°éƒ¨ç½²ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨ç”¨æ¥ä½œä¸ºapiåœ°å€ã€‚è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯API Gatewayä¼¼ä¹æ˜¯ä¸æ”¶å–è´¹ç”¨çš„ï¼Œåªä¼šæŒ‰ç…§lambda\bå‡½æ•°çš„è°ƒç”¨\bæ¬¡æ•°æ¥æ”¶å–è´¹ç”¨ï¼Œå¥½åƒæ¯æœˆå‰100ä¸‡æ¬¡è¯·æ±‚æ˜¯å…è´¹çš„ã€‚\u001cæ‰€ä»¥è¿˜æ˜¯ç›¸å½“åˆ’ç®—ã€‚\n\nOK! ä¸€ä¸ªæ— æœåŠ¡å™¨çš„åç«¯ api å°±è¿™æ ·æ­å»ºå¥½äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯å‰ç«¯é™æ€èµ„æºçš„æ‰˜ç®¡äº†\n\n### å‰ç«¯é™æ€èµ„æº\n\bç›´æ¥ä¸Šä¼ html,js,css ç­‰é™æ€èµ„æºåˆ°S3å°±å¥½äº†ï¼Œå…·ä½“å¯ä»¥å‚è§å¦ä¸€ç¯‡åšå®¢ [AWSç³»åˆ—ä¹‹S3 + Cloudfrontæ­å»ºhttpsé™æ€ç½‘ç«™](https://troyyang.com/2018/05/12/aws_s3_https_static_website/)\n\n","tags":["serverless"],"categories":["aws"]},{"title":"AWSç³»åˆ—ä¹‹S3 + Cloudfrontæ­å»ºhttpsé™æ€ç½‘ç«™","url":"/2018/05/12/aws_s3_https_static_website/","content":"***\n\næœ¬æ–‡å’Œä¹‹å‰å†™çš„[ã€Šæ­£ç¡®ä½¿ç”¨AWS S3çš„æ–¹å¼ä¹‹æ‰“é€ è‡ªå·±çš„httpså›¾åºŠã€‹](https://troyyang.com/2018/02/16/hosting-images-with-aws-s3/) å†…å®¹éå¸¸åƒï¼Œä½†ä¹Ÿæœ‰æ–°çš„å†…å®¹å¦‚è‡ªåŠ¨ä¸Šä¼ éƒ¨ç½²å’Œè‡ªå®šä¹‰è¯ä¹¦ã€Route53éƒ¨åˆ†ï¼Œè¿™é‡Œä¸»è¦è¡¥å……æ–°çš„å†…å®¹ã€‚\n\n### æ¸©é¦¨æé†’\n1. ä¸ªäººç”¨æˆ·è¯·æ³¨å†ŒAWS å…¨çƒè´¦å·ï¼Œå› ä¸ºAWS ä¸­å›½è´¦å·ä¼¼ä¹åªå¯¹ä¼ä¸šå¼€å‘è€Œæ— æ³•æ³¨å†Œã€‚\n2. AWS S3é»˜è®¤åœ°å€ä¸­å›½æ— æ³•è®¿é—®ï¼Œéœ€è¦ä½¿ç”¨Cloudfrontçš„æ–°åœ°å€æ‰èƒ½è®¿é—®ï¼Œè€Œä¸”è®¿é—®é€Ÿåº¦ä¸æ…¢ï¼Œä½ èƒ½æ„Ÿè§‰åˆ°æˆ‘åšå®¢çš„å›¾ç‰‡åŠ è½½æ…¢å—ï¼Ÿ\n3. S3ã€Cloudfrontã€Route53ç­‰æ”¶è´¹å¼‚å¸¸çš„ä½ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ã€‚\n\n### æ¶æ„æ¦‚è¿°\n![image](https://images.troyyang.com/2018-5-12-myenglishtutor-s3.png)\né‡‡ç”¨Hexoä½œä¸ºé™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œä¸»é¢˜ä½¿ç”¨çš„æ­£æ˜¯æˆ‘è‡ªå·±å¼€å‘çš„hexo-theme-twentyfifteen-wordpressï¼Œæ•´ä¸ªç½‘ç«™ä»£ç æ‰˜ç®¡åœ¨githubçš„ç§äººrepoä¸‹ã€‚å½“å†™å¥½æ–‡ç« åï¼Œä½¿ç”¨Hexoç”Ÿæˆé™æ€ä»£ç html+css+js+imageï¼Œå¹¶ä½¿ç”¨å†™å¥½çš„s3 SDK ä¸Šä¼ å·¥å…·åˆ°æŒ‡å®šaws çš„å­˜å‚¨æ¡¶é‡Œè¿›è¡Œé™æ€æ‰˜ç®¡ ï¼ˆä¹‹å‰ä½¿ç”¨çš„æ˜¯githubçš„Travis è‡ªåŠ¨éƒ¨ç½²ï¼Œä½†ç”±äºç§äººRepoéœ€è¦æ”¶è´¹ï¼Œäºæ˜¯æ”¾å¼ƒTravisæ”¹ç”¨è‡ªå·±çš„å·¥å…·ä¸Šä¼ ï¼‰ã€‚ä¸Šä¼ åˆ°S3é‡Œä¹‹åï¼Œä½¿ç”¨Cloudfrontåšå†…å®¹åˆ†å‘ï¼Œå¹¶ç»‘å®šè‡ªå®šä¹‰çš„httpsè¯ä¹¦ï¼Œæœ€åï¼Œä½¿ç”¨Route53åšè‡ªå®šä¹‰åŸŸåçš„ç»‘å®šã€‚\n\n### ç”Ÿæˆ IAM access key ç”¨æˆ·å­è´¦å· \næ­¤è´¦å·å¯ç”¨äºç¼–ç¨‹çš„æ–¹å¼è®¿é—®AWS çš„æ‰€æœ‰æŒ‡å®šèµ„æºï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºçš„IAM è´¦å·åªéœ€è¦æœ‰S3çš„è¯»å†™æƒé™\n\nè¿›å…¥ https://console.aws.amazon.com/iam/home?region=ap-northeast-1#/users\n\né€‰æ‹©add useråï¼Œ ä¸€å®šè¦é€‰æ‹©programmatic accessè¿™ç§ç¼–ç¨‹æ–¹å¼çš„å­è´¦å·ï¼Œè€Œå¦ä¸€ä¸ªconsoleè´¦å·é’ˆå¯¹çš„æ˜¯ç”¨æˆ·åï¼Œå¯†ç ç™»å½•çš„å­è´¦å·\n![image](https://images.troyyang.com/2018-5-12-aws-iam-step1.png)\n\næŒ‡å®šè¯¥è´¦å·å¯è®¿é—®çš„æƒé™\n![image](https://images.troyyang.com/2018-5-12-aws-iam-step2.png)\n\nä¿å­˜access idå’Œkey\n![image](https://images.troyyang.com/2018-5-12-aws-iam-step4.png)\n\n### ä½¿ç”¨S3 SDKè‡ªåŠ¨ä¸Šä¼ \né»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰Hexoç¼–è¯‘åçš„æ–‡ä»¶éƒ½æ”¾åœ¨publicæ–‡ä»¶ä»¶ä¸‹ï¼Œæ‰€ä»¥åªéœ€è¦æ‹·è´åˆ°S3 å­˜å‚¨æ¡¶ä¸‹ï¼Œå½“ç„¶å¯ä»¥æ‰‹åŠ¨æ‹·è´ï¼Œä½†æ˜¯å®åœ¨å¤ªéº»çƒ¦ã€‚æ‰€ä»¥å†™äº†ä¸ªnode toolå»è‡ªåŠ¨ä¸Šä¼ ï¼ˆéƒ¨ç½²ï¼‰ã€‚\n\n[ä¸‹è½½](https://gist.github.com/Troy-Yang/436a62fb14d9e07e1aa3534f1c351050)\n--s3-deploy\n------config.json\n------index.js\n\nconfig.js é‡ŒåŒ…æ‹¬çš„æ˜¯AWS AMI è´¦å·ä¿¡æ¯ï¼Œç¡®ä¿regionä½¿æ­£ç¡®çš„åŒºåŸŸ, å…·ä½“å‚è€ƒ[åŒºåŸŸåˆ—è¡¨](https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/using-regions-availability-zones.html)\n```\n{\n    \"accessKeyId\": \"xxxxxx\",\n    \"secretAccessKey\": \"xxxxx\",\n    \"region\": \"ap-northeast-1\" \n}\n```\n\nindex.jsï¼Œå…¶ä¸­myenglishtutor.euæ˜¯å­˜å‚¨æ¡¶çš„åå­—(å‘½åçš„æ—¶å€™è¯·ç”¨åŸŸå)\n```\nvar path = require(\"path\");\nvar fs = require('fs');\nvar mime = require('mime');\nvar AWS = require('aws-sdk');\nAWS.config.loadFromPath('./s3-deploy/config.json');\nlet s3 = new AWS.S3();\n\nconst uploadDir = function (s3Path, bucketName) {\n    function walkSync(currentDirPath, callback) {\n        fs.readdirSync(currentDirPath).forEach(function (name) {\n            var filePath = path.join(currentDirPath, name);\n            var stat = fs.statSync(filePath);\n            if (stat.isFile()) {\n                callback(filePath, stat);\n            } else if (stat.isDirectory()) {\n                walkSync(filePath, callback);\n            }\n        });\n    }\n\n    walkSync(s3Path, function (filePath, stat) {\n        let bucketPath = filePath.substring(s3Path.length + 1);\n        let mimeType = mime.getType(bucketPath);\n        let params = { \n            Bucket: bucketName, \n            Key: bucketPath.replace(/\\\\/g, '/'), \n            Body: fs.readFileSync(filePath),\n            ContentType: mimeType\n        };\n        s3.putObject(params, function (err, data) {\n            if (err) {\n                console.log(err)\n            } else {\n                console.log('Successfully uploaded ' + bucketPath + ' to ' + bucketName);\n            }\n        });\n    });\n};\n\nuploadDir(\"public\", \"myenglishtutor.eu\");\n```\n\næœ€ååœ¨package.jsonæ–‡ä»¶ä¸­ï¼Œæ·»åŠ è¿è¡Œè„šæœ¬ï¼š\n```\n  \"scripts\": {\n    \"start\": \"hexo clear & hexo g & hexo server\",\n    \"deploy\": \"hexo clear & hexo g & node ./s3-deploy/index\"\n  },\n```\n\n### ä½¿ç”¨Travis è‡ªåŠ¨éƒ¨ç½²\nå¦‚æœä»£ç æ˜¯æ‰˜ç®¡åˆ°githubä¸Šæˆ–è€…æ”¯æŒTravisçš„æœåŠ¡ï¼Œå¯ä»¥æ˜¯ç”¨ä¸‹é¢çš„.travis.ymlé…ç½®è¾¾åˆ°CI, CDï¼Œè¯·åœ¨travis.orgä¸­é…ç½®å¥½ç¯å¢ƒå˜é‡$AWS_ACCESS_IDï¼Œ AWS_SECRET_KEYï¼ŒAWS_REGION\n```\nlanguage: node_js\nnode_js: stable\n\nscript: true\n\n# S: Build Lifecycle\ninstall:\n  - npm install\n\nbefore_install:\n  - git submodule update --init --remote --recursive\n  \n#before_script:\n # - npm install -g gulp\n\nscript:\n  - hexo g\n# E: Build LifeCycle\n\n\nbefore_deploy:\n  # - zip -r latest *\n  # - mkdir -p dpl_cd_upload\n  # - mv latest.zip dpl_cd_upload/latest.zip\n  - cp -a source/.well-known public/\n\ndeploy:\n  - provider: s3\n    access_key_id: ${AWS_ACCESS_ID}\n    secret_access_key: ${AWS_SECRET_KEY}\n    local_dir: public\n    skip_cleanup: true\n    on:\n      repo: Troy-Yang/troy-yang.github.io\n      branch: source\n    bucket: troyyang.com\n    region: ${AWS_REGION}\n```\n\n### httpsè‡ªå®šä¹‰è¯ä¹¦\næƒ³è¦æ”¯æŒhttpsï¼Œé‚£ä¹ˆè¯ä¹¦æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥ç›´æ¥å¼€å¯cloudfrontï¼Œé»˜è®¤å°±ä¼šæ·»åŠ cloufrontç”Ÿæˆè¯ä¹¦ï¼Œå¦‚\n![image](https://images.troyyang.com/2018-2-18-distribution-overview.png)\n\nå¦‚æœæƒ³è¦è‡ªå®šä¹‰è¯ä¹¦ï¼Œåˆ™éœ€è¦è‡ªå·±åœ¨ACM(AWS Certificate Manager)ç”³è¯·è¯ä¹¦ï¼Œå¹¶åštxtåŸŸåéªŒè¯ï¼Œä¸€åˆ‡okååˆ™ä¼šå¾—åˆ°ï¼š\n![image](https://images.troyyang.com/2018-5-12-aws-myenglishtutur-acm.png)\n\nç”³è¯·æ­¥éª¤å¦‚ä¸‹ï¼š\nè¿›å…¥ https://console.aws.amazon.com/acm/home?region=us-east-1#/wizard/ \nå¡«å†™åŸŸå:\n![image](https://images.troyyang.com/2018-5-12-aws-acm-step1.png)\né€‰æ‹©éªŒè¯æ–¹å¼ï¼šï¼ˆDNSéªŒè¯æ–¹ä¾¿ï¼ŒEmailæ²¡è¯•è¿‡ï¼Œå¥½åƒå¾ˆéº»çƒ¦ï¼‰\n![image](https://images.troyyang.com/2018-5-12-aws-acm-step2.png)\næ‹·è´nameå’Œvalueå€¼ï¼Œä¿å­˜å¹¶åœ¨DNSæœåŠ¡å™¨ä¸­æ·»åŠ CNAMEè®°å½•ï¼Œå¦‚æœDNSæ˜¯ä½¿ç”¨AWSè‡ªå®¶çš„Route53ï¼Œåˆ™éå¸¸æ–¹ä¾¿ï¼Œåªéœ€è¦åœ¨ç›¸åº”çš„Domainä¸‹ï¼Œæ·»åŠ  Record Set è®°å½•, ç±»å‹é€‰æ‹©CNAMEã€‚å¦‚æœæ˜¯åœ¨ä¸‡ç½‘æˆ–è€…Cloudflareï¼Œä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚\n![image](https://images.troyyang.com/2018-5-12-aws-acm-step4.png)\nè®°å½•æ·»åŠ å¥½åï¼Œç­‰å¾…éªŒè¯é€šè¿‡åï¼ˆå¤§æ¦‚å‡ è‡³åå‡ ä¸ªå°æ—¶åï¼‰ï¼ŒçŠ¶æ€ä»pending å˜ä¸º issuedï¼Œå°±è¯´æ˜è¯ä¹¦é€šè¿‡ï¼Œè¯¥åŸŸåå·²åˆæ³•ã€‚\n![image](https://images.troyyang.com/2018-5-12-aws-acm-list.png)\n\n#### Cloudfront ä¸­ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦\nè¯ä¹¦æœ‰äº†ä¹‹åï¼Œåªéœ€è¦å°†å…¶æ·»åŠ åˆ°åˆ›å»ºçš„Cloudfrontä¸­å°±å¯ä»¥äº†\n![image](https://images.troyyang.com/2018-5-13-aws-acm-cloudfront.png)\n\nè¯·æ³¨æ„é€‰æ‹©Custom SSL Certificate, ç„¶åè¾“å…¥æ¡†ä¸­ï¼ŒAWSä¼šè‡ªåŠ¨åˆ—å‡ºå¯ç”¨çš„è¯ä¹¦åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç‚¹å‡»Request or Import a certificate with ACM é€‰æ‹©ä¸Šé¢æ–°å¢çš„å°±å¥½äº†\nåœ¨æµè§ˆå™¨è®¿é—®è¿™ä¸ªcloudfrontåœ°å€ï¼Œå°±å¯ä»¥çœ‹åˆ°httpsçš„æ ‡å¿—ï¼ŒæŸ¥çœ‹è¿™ä¸ªhttpsè¯ä¹¦å°±å¯ä»¥å¾—åˆ°è‡ªå®šä¹‰çš„è¿™ä¸ªåŸŸåï¼Œè€Œä¸æ˜¯cloudfrontå¼€å¤´çš„ï¼Œçœ‹èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆé«˜å¤§ä¸Šã€‚\n\n#### ç»‘å®šCloudfront åˆ°è‡ªå®šä¹‰DNS\nä¸Šé¢çš„cloudfrontåœ°å€å¦‚æœç”¨äºæä¾›APIä¹‹ç±»çš„æ¥å£åœ°å€å€’æ˜¯æ— æ‰€è°“ï¼Œ ä½†æ˜¯å¦‚æœæ˜¯åˆ«äººè®¿é—®çš„åœ°å€ï¼Œé‚£è‚¯å®šä¸è¡Œçš„ï¼Œè¿˜éœ€è¦æ·»åŠ ä¸€æ¡Aè®°å½•ï¼Œå°†è‡ªå·±çš„åŸŸåå’Œä¸Šè¿°åœ°å€è¿›è¡Œç»‘å®šã€‚åŒç†ï¼Œå¦‚æœæ˜¯åœ¨Route53ï¼Œåªéœ€è¦æ·»åŠ ä¸€æ¡Aè®°å½•å°±å¥½äº†ï¼Œå¤§è‡´å¦‚å›¾ï¼š\n![image](https://images.troyyang.com/2018-5-13-aws-dns-cloudfront.png)\n\nä¿å­˜åï¼Œè¿‡å‡ åˆ†é’Ÿå°±å¯ä»¥é€šè¿‡è‡ªå·±åŸŸåï¼Œè®¿é—®åˆ°S3ä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”è¯ä¹¦æ˜¾ç¤ºçš„æ˜¯è‡ªå·±åŸŸåã€‚\n![image](https://images.troyyang.com/2018-5-12-aws-myenglishtutur-acm.png)","tags":["aws"],"categories":["aws"]},{"title":"AWSç³»åˆ—ä¹‹ myenglishtutoråŸºäºAWSç”Ÿæ€çš„å¹¿æ³›ä½¿ç”¨","url":"/2018/05/12/aws_structure_series/","content":"***\n### å†™åœ¨å¼€å¤´\nçœ‹ç€ç³»ç»Ÿç”Ÿæˆçš„å†™ä½œæ—¶é—´ï¼Œ2018å¹´5æœˆ12æ—¥ï¼Œææ€•æ˜¯è®©æ‰€æœ‰å››å·äººéƒ½éš¾ä»¥å¿˜æ€€çš„æ—¥å­ï¼Œåœ¨æ­¤ç¼…æ€€åå¹´å‰å¤§åœ°éœ‡é‡éš¾çš„åŒèƒï¼Œä¹Ÿå¸Œæœ›æ›¾é­å—è‹¦ç—›çš„åŒèƒåå¹´åçš„ä»Šå¤©ä¸€åˆ‡å®‰å¥½ï¼\n\nå›æƒ³åœ¨ç»™Jasonå…¼èŒå·¥ä½œçš„è¿™åŠå¹´å¤šï¼Œä¸€ä¸ªäººæŠŠ ![image](https://myenglishtutor.eu/images/icons/favicon-32x32.png) [https://myenglishtutor.eu](https://myenglishtutor.eu) ä»0åˆ°1çš„æŠŠç½‘ç«™ä¸€ç‚¹ä¸€ç‚¹å»ºå¥½ï¼Œæ„Ÿè§‰åƒä¸ªè‡ªå·±çš„å­©å­ï¼Œæ€»æƒ³è¦ç»™ä»–æœ€å¥½çš„ï¼Œä½†ä¹Ÿç”±äºä¸ªäººç²¾åŠ›æœ‰é™ï¼Œå¾ˆå¤šæƒ³åšçš„éƒ½æ²¡å»åšã€‚å°¤å…¶æ˜¯AWSçš„ç”Ÿæ€è®©æˆ‘å°è±¡æ·±åˆ»ï¼Œæ‰€ä»¥æƒ³è¦å†™ä¸‹è¿™ä¸€ä¸ªç³»åˆ—çš„æŠ€æœ¯æ„Ÿæ‚Ÿã€‚\n\n|<h2>[AWSç³»åˆ—ä¹‹S3 + Cloudfrontæ­å»ºhttps hexoé™æ€ç½‘ç«™](https://troyyang.com/2018/05/12/aws_s3_https_static_website/)</h2>|\n|:---------|\n|ä½¿ç”¨hexoåšé™æ€å†…å®¹ç”Ÿæˆï¼Œs3æ‰˜ç®¡é™æ€ç½‘ç«™å†…å®¹ï¼Œä½¿ç”¨cloudfrontåšå†…å®¹åˆ†å‘åŠhttpsè¯ä¹¦è‡ªåŠ¨ç”Ÿæˆï¼Œroute53åšåŸŸåDNSè§£æï¼Œè¿˜æœ‰éƒ¨åˆ†å·¥å…·å¦‚ä¾æ‰˜s3 SDKåšä»£ç è‡ªåŠ¨ä¸Šä¼ éƒ¨ç½²ï¼Œgoogle driver è‡ªåŠ¨åŒæ­¥ç­‰ã€‚|\n|hexoã€s3ã€cloudfrontã€route53ã€certificationã€aws s3 SDK auto sync file and deployment|\n\n|<h2>[AWSç³»åˆ—ä¹‹ Stripe å›½é™…æ”¯ä»˜](https://troyyang.com/2018/01/21/stripe_guide_alipay/)</h2>|\n|:---------|\n|æœåŠ¡ç«¯ä½¿ç”¨Lambdaã€API Gatewayå®ç°çš„æ— æœåŠ¡å™¨æœåŠ¡ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨Stripeçš„Element.jsç±»åº“|\n|Lambdaã€API Gateway|\n\n|<h2>AWSç³»åˆ—ä¹‹ç»“åˆOpenTekå®ç°å¤šäººå®æ—¶Webè§†é¢‘é€šè¯ã€æ•™å­¦</h2>|\n|:---------|\n|ä½¿ç”¨s3åšè§†é¢‘å‰ç«¯å’Œåå°ç®¡ç†çš„ä»£ç æ‰˜ç®¡, Lambda+DynamoDB+API Gatewayå®ç°Serverlessæ­å»ºçš„node expressæ— æœåŠ¡å™¨æœåŠ¡ç«¯ã€‚|\n|s3ã€openTek SDKã€Lambdaã€DynamoDBã€API Gatewayã€Angular 1.0ã€bootstrap|\n\n|<h2>AWSç³»åˆ—ä¹‹PollyæœåŠ¡å®ç°AIæ–‡æœ¬åˆ°è¯­éŸ³ç¿»è¯‘</h2>|\n|:---------|\n|ä½¿ç”¨awsçš„PollyæœåŠ¡å®ç°æ–‡æœ¬è½¬è¯­éŸ³çš„ç¿»è¯‘ï¼ŒæœåŠ¡ç«¯æ­å»ºçš„ServerlessæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨è‡ªå·±å†™çš„hexo pluginåŠŸèƒ½è°ƒç”¨APIã€‚|\n|Lambdaã€API Gatewayã€SNSã€s3ã€Hexo plugin|\n\n|<h2>AWSç³»åˆ—ä¹‹ä½¿ç”¨Wowza streamingå®ç°è§†é¢‘ç›´æ’­+å¼¹å¹•æœåŠ¡</h2>|\n|:---------|\n|æ¶æ„ä¸Šä½¿ç”¨EC2è´Ÿè½½å‡è¡¡å’Œè‡ªåŠ¨æ‰©å®¹å®ç°å¯ä¼¸ç¼©è§†é¢‘ç›´æ’­æœåŠ¡ã€‚å¼¹å¹•ä½¿ç”¨web socketå®ç°åŒå‘é€šä¿¡ï¼Œå®¢æˆ·ç«¯é‡‡ç”¨å¯¹æ‰‹æœºH5æ’­æ”¾æ”¯æŒã€‚|\n|s3ã€EC2ã€Load bananceã€ASGã€cloudfrontã€linuxã€ danmakuã€h5 video|\n\n\nè¿™é‡Œä¹Ÿæ‰“ä¸ªå¹¿å‘Šç®€å•ä»‹ç»ä¸€ä¸‹Jasonå’Œä»–çš„myenglishtutorï¼Œä»åå­—ä¹Ÿå¤§æ¦‚çŸ¥é“ä»–æ˜¯ä¸ªè‹±è¯­è€å¸ˆå’Œä»–çš„ä¸ªäººç½‘ç«™ï¼ŒJasonæ˜¯ä¸ªåœ°é“çš„è‹±å›½äººï¼Œæµ“åšçš„è‹±å›½å£éŸ³ä»¥åŠè¶…è¿‡åå‡ å¹´è‹±è¯­ä¸“ä¸šæ•™å­¦ç»éªŒï¼Œä½œä¸ºmyenglishtutorçš„å¼€å‘è€…ï¼Œæˆ‘ä¸ºä»–é›†æˆäº†åŒ…æ‹¬è§†é¢‘ç›´æ’­ï¼Œ1å¯¹1ï¼Œ1å¯¹å¤šçš„è§†é¢‘æ•™å­¦ç›´æ’­ï¼Œæ”¯ä»˜å®æ”¯ä»˜ï¼Œè¯æ³•è§£é‡Šç­‰åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒæ•™å­¦æ–¹å¼åŠæ”¯ä»˜ç­‰é—®é¢˜ã€‚å¦‚æœæœ‰æ„ä¸“ä¸šè‹±è¯­è¦æ±‚çš„ä¸ªäººæˆ–è€…å›¢ä½“ï¼Œæ¬¢è¿ç›´æ¥è”ç³»æˆ‘ï¼Œæœ‰æ›´ä½çš„æŠ˜æ‰£ç­‰ä½ ã€‚\n\n","tags":["aws"],"categories":["aws"]},{"title":"æ­£ç¡®ä½¿ç”¨AWS S3çš„æ–¹å¼ä¹‹æ‰“é€ è‡ªå·±çš„httpså›¾åºŠ","url":"/2018/02/16/hosting-images-with-aws-s3/","content":"***\n\nå†™è¿‡åšå®¢çš„äººéƒ½çŸ¥é“å›¾åºŠï¼Œä¸€ä¸ªæ‰˜ç®¡è‡ªå·±åšå®¢å›¾ç‰‡çš„åœ°æ–¹ï¼Œå½“ç„¶æ‰˜ç®¡åˆ°è‡ªå·±çš„æœåŠ¡å™¨å¦å½“åˆ«è®ºã€‚å¸¸è§çš„å›¾åºŠå¯ä»¥æ˜¯æ–°æµªåšå®¢ï¼Œä¸ƒç‰›äº‘ï¼Œimgurç­‰ï¼Œä½†æ˜¯éƒ½æ˜¯æœ‰å„ç§é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä¹‹å‰ä½¿ç”¨çš„æ˜¯ä¸ƒç‰›äº‘ï¼ˆä¹Ÿæ›¾åœ¨[ã€Šç»™Githubè‡ªå®šä¹‰åŸŸååŠ ä¸ŠHTTPSã€‹](https://troyyang.com/2017/05/21/Add_Free_Certification_In_Blog_Step_By_Step/)åšæ–‡ä¸Šæ¨èä½¿ç”¨ï¼‰ï¼Œç”¨èµ·æ¥ç›¸å½“ä¸é”™ï¼Œåªå¯æƒœåæ¥å¤‡æ¡ˆä¿¡æ¯è¿‡æœŸäº†ï¼Œå¯¼è‡´æ— æ³•å†ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œæ›´å¯æ‚²çš„æ˜¯ï¼Œhttpsä¸å†æ”¯æŒï¼Œæ„å‘³ç€å°½ç®¡æˆ‘çš„åšå®¢æ˜¯httpsä½†ç”±äºæœ‰å†…å®¹æ˜¯httpçš„ï¼Œåªèƒ½è¢«æµè§ˆå™¨è®¤ä¸ºæ˜¯mixed-contentçš„ã€‚\n\nä½†æ˜¯ï¼Œå‰å‡ å¤©æ— æ„å‘ç°ä¸€ç‰‡æ–°å¤§é™†ï¼Œä½¿ç”¨aws s3ç»“åˆcloudfront distribution å¯ä»¥å€ŸåŠ©äºšé©¬é€Šäº‘æ— ç¼å¿«é€Ÿæ‰˜ç®¡è‡ªå·±çš„å›¾ç‰‡è¿˜è‡ªå¸¦httpsï¼Œè€Œè´¹ç”¨å‡ ä¹æ˜¯å¾ˆå°çš„ï¼ŒæŒ‰é‡æ”¶è´¹ã€‚\n\n### æ­¥éª¤æ¦‚è¿°\nï¼ˆå¦‚æœä¸éœ€è¦æœ‰è‡ªå®šä¹‰å›¾ç‰‡çš„åŸŸåï¼Œç¬¬ä¸‰æ­¥å¯é€‰ï¼‰\n1. åˆ›å»ºä¸€ä¸ªå›¾ç‰‡s3 bucketå¹¶å…¬å¼€ã€‚\n2. åˆ›å»ºcloudfront distributionå¹¶ç»‘å®šS3 bucketå’Œé»˜è®¤è¯ä¹¦ä»¥æ”¯æŒhttps\n3. åœ¨DNSæœåŠ¡å•†ï¼ˆæˆ‘çš„æ˜¯cloudflareï¼‰åˆ›å»ºå›¾åºŠåŸŸåï¼Œå¹¶ç»‘å®šcloudfrontåŸŸååœ°å€ \n\n### å…¨çƒäºšé©¬é€Š Or äºšé©¬é€Šä¸­å›½ï¼Ÿ\nä¸¤è€…åŒºåˆ«å¥½åƒæŒºå¤§çš„ï¼Œåè€…æ›¾ç»æ³¨å†Œè¿‡ï¼Œä½†æ˜¯ä¸çŸ¥ä¸ºä»€ä¹ˆæ²¡é€šè¿‡å®¡æ ¸ï¼Œå¯èƒ½éœ€è¦å…¬å¸é‚®ç®±å§ã€‚å¹¶ä¸”ï¼Œå¦‚æœè€ƒè™‘åˆ°å¤‡æ¡ˆç­‰å› ç´ ï¼Œå»ºè®®ä½¿ç”¨å…¨çƒäºšé©¬é€Šã€‚ï¼ˆéœ€è¦ç»‘å®šVISAä¿¡ç”¨å¡ï¼‰   \nå…¨çƒäºšé©¬é€Šåœ°å€æ˜¯ï¼šhttps://console.aws.amazon.com/console/home\n\n### åˆ›å»ºS3 Bucketï¼ˆå­˜å‚¨æ¡¶ï¼‰\nè´¦å·åˆ›å»ºæˆåŠŸåï¼Œè¿›å…¥S3æ§åˆ¶å°https://s3.console.aws.amazon.comï¼Œå­˜å‚¨æ¡¶åç§°ä»¥å¾…æ‰˜ç®¡åŸŸåå‘½åï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ images.troyyang.comï¼Œå…¶ä»–é¡¹é¦–å…ˆéƒ½é€‰æ‹©é»˜è®¤ï¼Œå¾…ä¼šå†ä¸€é¡¹ä¸€é¡¹æ”¹ã€‚\n![image](https://images.troyyang.com/2018-2-18-s3-bucket.png)\n#### è®¿é—®æƒé™è®¾ç½®\n\nåœ¨å­˜å‚¨æ¡¶çš„æƒé™é¡µé¢ï¼Œé€‰æ‹©å­˜å‚¨æ¡¶ç­–ç•¥ï¼Œé”®å…¥ä¸‹é¢çš„å€¼ï¼š\n```\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"PublicReadForGetBucketObjects\",\n            \"Effect\": \"Allow\",\n            \"Principal\": \"*\",\n            \"Action\": \"s3:GetObject\",\n            \"Resource\": \"arn:aws:s3:::images.troyyang.com/*\"\n        }\n    ]\n}\n```\n![image](https://images.troyyang.com/2018-2-18-aws-s3-permission.png)\n#### é™æ€æ‰˜ç®¡\nå­˜å‚¨æ¡¶åˆ›å»ºæˆåŠŸåï¼Œè¿›å…¥å±æ€§é¡µé¢ï¼Œé€‰æ‹©é™æ€ç½‘ç«™æ‰˜ç®¡ï¼Œé”®å…¥ç´¢å¼•æ–‡ä»¶index.htmlï¼Œé”™è¯¯æ–‡æ¡£error.htmlï¼Œç„¶åä¿å­˜ã€‚æ­¤æ—¶ï¼Œå…¬å…±è®¿é—®é¡µé¢å·²ç»ç”Ÿæˆï¼Œç»ˆç«¯èŠ‚ç‚¹å¦‚ä¸‹ï¼š\nhttp://images.troyyang.com.s3-website-ap-northeast-1.amazonaws.com\n\n![image](https://images.troyyang.com/2018-2-18-aws-s3-static-host.png)\nä¸Šä¼ è‡ªå·±çš„æ‰€æœ‰å›¾ç‰‡åœ¨æ­¤å­˜å‚¨æ¡¶ä¸‹ï¼Œç„¶ååŠ ä¸Šæ–‡ä»¶åç¼€å°±åº”è¯¥å¯ä»¥è®¿é—®äº†ï¼Œç„¶è€Œç°å®æ˜¯æ®‹é…·çš„ï¼Œåœ¨æˆ‘å¤§å¤©æœä¸‹ï¼Œè¿™ä¸ªåœ°å€æœ‰æ—¶å€™æ˜¯æ— æ³•è®¿é—®å½“çš„ ã€‚ã€‚ã€‚WTFã€‚ã€‚ã€‚äºæ˜¯ï¼Œå¾—è¿›è¡Œä¸‹é¢çš„è‡ªå®šä¹‰åŸŸåæ­¥éª¤\n\n### CloudFront Distribution\nä¸Šé¢åœ°å€æ˜¯AWSè‡ªåŠ¨ç”Ÿæˆçš„è®¿é—®åŸŸåï¼Œå¹¶ä¸”åªæ”¯æŒhttpï¼Œæƒ³è¦æ”¯æŒhttpsï¼Œå¹¶ä¸”ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆimages.troyyang.comï¼‰ï¼Œéœ€è¦ä½¿ç”¨åˆ°CloudFront Distributionã€‚\n\nCloudFront Distribution æ˜¯AWSçš„å†…å®¹åˆ†å‘ï¼ˆCDNï¼‰ä½¿å¾—å…¨çƒå„åœ°éƒ½èƒ½ä»¥æœ€å¿«çš„é€Ÿåº¦è®¿é—®åˆ°AWSæœ€è¿‘çš„èŠ‚ç‚¹ï¼ˆå¯¹äºä¸­å›½ï¼Œæœ€è¿‘çš„æ˜¯ä¸œäº¬ï¼Œç»æµ‹ï¼Œä¹Ÿå·²ç»è¶³å¤Ÿå¿«ï¼‰ï¼Œå¹¶ä¸”å¯ç»‘å®šæˆ–è€…ç”Ÿäº§SSLè¯ä¹¦ã€‚\n\n#### åˆ›å»º Distribution\næ‰“å¼€ https://console.aws.amazon.com/cloudfront/homeï¼Œ é€‰æ‹©Create Distribution, ä¼ è¾“æ–¹å¼é€‰æ‹©Webé€‰é¡¹ Get Startedï¼Œåœ¨å¾ˆå¤šé€‰é¡¹ä¸­ï¼Œä¸»è¦æ³¨æ„å‡ é¡¹å°±å¥½äº†ï¼ˆéƒ½æ˜¯å¯åæœŸä¿®æ”¹ï¼‰ï¼š\n- Origin Domain Nameä¸­é€‰æ‹©åˆšæ‰æ‰€å»ºçš„S3 Bucket åŸŸå\n- Alternate Domain Names(CNAMEs)å¡«å†™è‡ªå®šä¹‰åŸŸå(æ²¡æœ‰çš„è¯ï¼Œå¯ä¸ç®¡)ï¼Œ è¿™é‡Œæ˜¯ images.troyyang.com\n- SSL Certificate æš‚æ—¶é€‰é»˜è®¤Default CloudFront Certificate (*.cloudfront.net)\n- Price Class å¯ä»¥åªé€‰æ‹©Use Only US, Canada, Europe and Asia\n\n![image](https://images.troyyang.com/2018-2-18-aws-create-distribution.png)\n\nä¸€åˆ‡é…ç½®å¥½åï¼Œé™é™ç­‰å¾…å‡ ä¸ªå°æ—¶å°±ä¼šçœ‹åˆ°Distributionéƒ¨ç½²æˆåŠŸï¼Œå¤§è‡´ç»“æœå¦‚ä¸‹ï¼š\n\n![image](https://images.troyyang.com/2018-2-18-distribution-overview.png)\n\næ­¤æ—¶ï¼Œå¾—åˆ°Distribution çš„æ–°è®¿é—®åœ°å€ d2dxo9yo9kwqp2.cloudfront.netï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ‰¾ä¸€å¼ åœ¨S3ä¸­å­˜åœ¨çš„å›¾ç‰‡ï¼ŒåŠ ä¸Šhttpså†æ¬¡è®¿é—® https://d2dxo9yo9kwqp2.cloudfront.net/2017-5-21-https.png ä¸€åˆ‡OK\n\n#### è‡ªå®šä¹‰è¯ä¹¦ï¼ˆå¯é€‰ï¼‰\nä¸Šé¢çš„è¯ä¹¦æ˜¯äºšé©¬é€Šè‡ªå·±æä¾›ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨ç»‘å®šè‡ªå·±çš„åŸŸåè¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨AWSçš„Certificate Manager è¯ä¹¦æœåŠ¡ï¼Œåœ¨è‡ªå·±çš„DNSæœåŠ¡å•†æ¯”å¦‚ä¸‡ç½‘æˆ–è€…é˜¿é‡Œäº‘é‚£é‡Œé…ç½®å¥½éªŒè¯æ–¹å¼ï¼Œå…·ä½“æ“ä½œæ–¹æ³•å‚è€ƒ https://docs.aws.amazon.com/zh_cn/acm/latest/userguide/gs-acm-request.html ã€‚å› ä¸ºæˆ‘æš‚æ—¶è§‰å¾—æ²¡å¿…è¦ï¼Œæ‰€ä»¥æ²¡ä½¿ç”¨ä¸Šã€‚\n\n### ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰\nä¸Šé¢çš„æ˜¯cloudfrontåˆ†å‘çš„ä¸€ä¸ªåœ°å€ï¼Œè™½ç„¶åœ°å€æ˜¯å›ºå®šçš„ï¼Œä½†æ¯•ç«Ÿä¸æ˜¯è‡ªå®¶çš„åŸŸåï¼Œæ„Ÿè§‰ä¸é«˜å¤§ä¸Šï¼Œæ‰€ä»¥éœ€è¦ç»‘å®šä¸Šè‡ªå·±çš„å›¾ç‰‡åŸŸåã€‚\n\nç”±äºæˆ‘çš„DNSæœåŠ¡è§£ææ”¹ä¸ºäº†Cloudflareï¼Œæ‰€ä»¥æ˜¯ä»¥Cloudflareçš„æ¥é…ç½®çš„åŸŸåï¼Œä½†å’Œä¸‡ç½‘æˆ–è€…é˜¿é‡Œäº‘çš„é…ç½®å®Œå…¨ä¸€è‡´ï¼Œåœ¨DNSè§£æé¡¹ä¸­æ·»åŠ ä¸€æ¡CNAMEè®°å½•ï¼ŒæŒ‡å‘Cloudfrontåˆ†é…çš„åŸŸåå³å¯\n\n![image](https://images.troyyang.com/2018-2-18-dns-image.png)\nç­‰å¾…ç»‘å®šè§£ææˆåŠŸåï¼Œè®¿é—® https://images.troyyang.com/2017-5-21-https.png ï¼Œä¸€åˆ‡OK\n","tags":["s3"],"categories":["aws"]},{"title":"Stripeå¼€å‘ä½¿ç”¨æŒ‡å—--å›½é™…æ”¯ä»˜ï¼ˆå«æ”¯ä»˜å®ï¼‰","url":"/2018/01/21/stripe_guide_alipay/","content":"***\nå‰æ®µæ—¶é—´ï¼Œå› ä¸ºJasonè®©æˆ‘å¸®å¿™æŠŠStripeæ”¯ä»˜é›†æˆåˆ°ä»–ä¸ªäººç½‘ç«™ä¸Šå»ï¼Œè®©æˆ‘æœ‰æœºä¼šæ¥è§¦åˆ°æ”¯ä»˜ç³»ç»Ÿå¼€å‘ï¼ŒåŒæ—¶ä¹Ÿå› ä¸ºè‹¦äºæ²¡æœ‰æ‰¾åˆ°å¤ªå¤šä¸­æ–‡æ–¹é¢ç›¸å…³æ–‡æ¡£ä»‹ç»ï¼Œæ‰€ä»¥åšä¸ªæ€»ç»“ï¼Œä¹Ÿæ–¹ä¾¿ä»¥åæœ‰éœ€è¦çš„åŒå­¦ã€‚   \n(æ›´æ–°) 2021.5 å‘ç°å¥½äº›åŒå­¦ä¹Ÿåœ¨å’¨è¯¢å¦‚ä½•é›†æˆå¾®ä¿¡æ”¯ä»˜ï¼Œå…¶å®ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œæ‰€ä»¥æ–°å¢äº†æœ€åå¾®ä¿¡çš„å®ç°ï¼Œè§æœ€å \n(æ›´æ–°) 2022.8 Sourceçš„æ–¹å¼å·²ç»ä¸è¢«æ¨èï¼Œæ¨èä½¿ç”¨PaymentIntent\n\n### å…³äºStripeæ”¯ä»˜\n\nç¬¬ä¸€æ¬¡å¬è¯´Stripeè¿˜æ˜¯åœ¨å‡ ä¸ªæœˆå‰çš„ä¸€ä¸ªæ–°é—»ä¸Šäº†è§£åˆ°ï¼Œå¤§è‡´è¯´çš„æ˜¯ç¾å›½æ€»ç»Ÿéƒ½åœ¨ä½¿ç”¨å®ƒï¼Œææœ‰å¯èƒ½æˆåŠŸä¸‹ä¸€ä¸ªPaypalã€‚è¿™ä¹ˆå—æ¬¢è¿çš„ä¸€ä¸ªæ”¯ä»˜å¹³å°åˆ°åº•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæˆ‘ç²—ç•¥æœé›†äº†ä¸€ä¸‹ï¼š\n\n- ä¸€æ¡ä»£ç è®©ä½ ç½‘ç«™æ”¯æŒç¹ççš„å›½é™…æ”¯ä»˜åŠŸèƒ½ã€‚ï¼ˆå¯¹äºåˆ›ä¸šå…¬å¸ï¼Œå†åˆé€‚ä¸è¿‡ï¼‰\n- å‘å…¨çƒåŒ–ä¸šåŠ¡æ‹“å±•ä¼šæˆä¸ºStripeçš„æœºä¼šã€‚å³ä½¿æ”¯ä»˜è´§å¸ä¸åŒã€æ–¹æ³•ä¸åŒï¼ŒStripeéƒ½èƒ½æ‰“é€šå„è‡ªçš„æ¸ é“ï¼Œè®©å…¨çƒåŒ–äº¤æ˜“ä¸å—æ”¯ä»˜é˜»ç¢ã€‚\n- å¸‚å€¼è¶…è¿‡90äº¿ç¾å…ƒï¼Œå’ŒTweeter,Lyftï¼ŒBest Buyç­‰ä»¥åŠå›½å†…çš„ Alipay, WeChatç­‰æœ‰åˆä½œ\n\né‡ç‚¹è¯´ä¸‹ç¬¬äºŒç‚¹ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Œå°±æ˜¯è¯´å®¢æˆ·å¯ä»¥ä½¿ç”¨äººæ°‘å¸æ”¯ä»˜ï¼Œå¦‚æœå•†å®¶ï¼ˆæ”¶æ¬¾æ–¹ï¼‰æ˜¯ç¾å›½çš„é“¶è¡Œçš„è¯ï¼Œå°±è‡ªåŠ¨è½¬æˆç¾å…ƒï¼Œæ˜¯è‹±å›½çš„é“¶è¡Œå°±è‡ªåŠ¨è½¬ä¸ºè‹±é•‘ï¼ï¼ˆ**å¯æƒœæš‚æ—¶ä¸æ”¯æŒå•†å®¶æ˜¯ä¸­å›½ï¼ˆä½†Stripeä¹Ÿå¯æä¾›è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯ä½¿ç”¨Atlaså»åˆ›å»ºä¸€ä¸ªç¾å›½çš„ä»£ç†å…¬å¸ï¼‰**ï¼‰\n\nè€Œå¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜çš„è¯ï¼Œå½“ç„¶æœ€å…³å¿ƒç¬¬ä¸€æ¡ï¼Œå› ä¸ºä»–çš„å®—æ—¨å°±æ˜¯å¼€å‘æç®€ï¼Œå¯¹å¼€å‘äººå‘˜è¶…çº§å‹å¥½ï¼è‡³äºå¤šå‹å¥½å‘¢ï¼Œè¯·å¾€ä¸‹çœ‹ã€‚\n\n### æœ€ç®€æ´æ”¯ä»˜\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Stripe Checkout</title>\n</head>\n<body>\n   <form action=\"/your-server-side-code\" method=\"POST\">\n  <script\n    src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\"\n    data-key=\"[Publishable key]\"\n    data-amount=\"999\"\n    data-name=\"troy yang\"\n    data-description=\"Widget\"\n    data-image=\"https://stripe.com/img/documentation/checkout/marketplace.png\"\n    data-locale=\"auto\"\n    data-zip-code=\"true\"\n    data-currency=\"eur\">\n  </script>\n</form>\n</body>\n</html>\n```\nå°±è¿™ä¹ˆå‡ è¡Œä»£ç ï¼Œæˆ‘ä»¬å°±å·²ç»å®ç°äº†å®¢æˆ·ç«¯æ‰€æœ‰äº‹ï¼š\n\n![image](https://images.troyyang.com/2018-1-13-stripe-checkout.png)\n\nçœŸçš„æ˜¯è¶…çº§ç®€å•ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æ˜¯åŸºäºä¿¡ç”¨å¡æ”¯ä»˜çš„ç•Œé¢ï¼Œå·²ç»å¯ä»¥æ»¡è¶³ä¸€åŠçš„æ”¯ä»˜æ–¹å¼ï¼Œå¯¹äºå…¶ä»–çš„ä¸‰æ–¹æ”¯ä»˜ï¼Œæ¯”å¦‚3D secureï¼Œ æ”¯ä»˜å®ï¼Œå¾®ä¿¡ï¼Œç”šè‡³æ¯”ç‰¹å¸ï¼ŒStripeä¸ºæˆ‘ä»¬æä¾›äº†å…¶ä»–æ–¹å¼ï¼Œç­‰ä¸‹æˆ‘å°±ä½¿ç”¨æ”¯ä»˜å®æ¥ä¸¾ä¾‹ã€‚\n\n### æ³¨å†Œ Stripe è´¦å·\nå’Œæ³¨å†Œæ”¯ä»˜å®è´¦å·ä¸€ä¸ªé“ç†ï¼Œé¦–å…ˆæ³¨å†Œè´¦å·ï¼Œç„¶åç»‘å®šè‡ªå·±é“¶è¡Œå¡ï¼ŒBUT, å°±åƒå‰é¢æåˆ°çš„ï¼Œä¸æ”¯æŒä¸­å›½ï¼Œæ‰€ä»¥å°±ç®—æ³¨å†ŒæˆåŠŸï¼Œä¹Ÿæ²¡æ³•æ¿€æ´»ï¼Œä¹Ÿå°±æ²¡æ³•æ”¶æ¬¾ã€‚\n![](https://images.troyyang.com/2018-1-13-stripe-support-countries.PNG)\n\nå¯¹äºä¸­å›½å•†å®¶æ€ä¹ˆåŠå‘¢ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„å°±åªæœ‰è¿™å‡ ä¸ªåŠæ³•ï¼š\n- è‡ªå·±å»æ”¯æŒå›½å®¶å»åŠç†å¼ é“¶è¡Œå¡\n- ä½¿ç”¨å›½å¤–çš„æœ‹å‹é“¶è¡Œå¡\n- ä½¿ç”¨Atlas\n\nå¯¹äºJasonæ¥è¯´ï¼Œå› ä¸ºä»–æ˜¯è‹±å›½äººï¼Œæ‰€ä»¥ä»–å¯ä»¥åˆ›å»ºä»–çš„ä¸»è´¦å·ï¼Œç„¶åæ·»åŠ æˆ‘çš„stripeè´¦å·åˆ°ä»–team memeberè´¦å·åˆ—è¡¨ä¸­ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥è®¿é—®ä»–è´¦æˆ·ä¸‹æ‰€æœ‰å¼€å‘è€…éœ€è¦çš„æƒé™ã€‚é‚€è¯·æˆåŠŸåï¼ŒDashboardé¡µé¢\n\n### ä¸¤ä¸ªé˜¶æ®µ\n\nStripeæœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ä¸ªæ˜¯æµ‹è¯•æ¨¡å¼(Test Mode)ï¼Œä¸€ä¸ªæ˜¯ç”Ÿäº§æ¨¡å¼(Live Mode)ï¼Œæµ‹è¯•æ¨¡å¼ä¸‹äº§ç”Ÿçš„é‡‘é’±äº¤æ˜“éƒ½åªç”¨äºæµ‹è¯•ï¼Œå½“æ‰€æœ‰æµ‹è¯•é€šè¿‡åå³å¯åˆ‡æ¢ä¸ºLiveæ¨¡å¼ã€‚å”¯ä¸€çš„ä¸åŒå°±æ˜¯**Publishable key** å’Œ **Secret key**ï¼Œ ä¸€ä¼šæˆ‘ä»¬ä¼šç”¨åˆ°è¿™ä¸¤ä¸ªå€¼ã€‚\n![image](https://images.troyyang.com/2018-1-13-stripe-test-mode.PNG)\n\n### äº¤æ˜“æµç¨‹\nStripeæœ‰å‡ ä¸ªæ¦‚å¿µç”¨äºæ•´ä¸ªäº¤æ˜“é˜¶æ®µå’ŒçŠ¶æ€ï¼š\n![image](https://images.troyyang.com/2018-1-18-workflow.png)\n\n#### åˆ›å»º Source\n\nä½¿ç”¨è‡ªå·±çš„**Publishable key**æ¥åˆ›å»ºä¸€ç§sourceï¼ˆæ¯”å¦‚Cards, 3D Secure, æ”¯ä»˜å®ï¼Œç”šè‡³æ¯”ç‰¹å¸ç­‰ï¼‰, åˆ›å»ºsourceå®Œäº†åï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªç”¨äºäº¤æ˜“çš„Tokenæˆ–è€…æ˜¯ä¸€ä¸ªè·³è½¬åˆ°å…¶ä»–æ”¯æŒçš„ä¸‰æ–¹æ”¯ä»˜å¹³å°ï¼ˆæ¯”å¦‚æ”¯ä»˜å®æ”¯ä»˜ï¼‰é¡µé¢ç­‰å¾…ç”¨æˆ·æ”¯ä»˜ã€‚å½“ç”¨æˆ·æ”¯ä»˜ï¼ˆæˆ–è€…å–æ¶ˆæ”¯ä»˜ï¼‰å®Œæˆï¼Œè‡ªåŠ¨è·³è½¬å›åˆ°æŒ‡å®šç»“æœé¡µé¢ã€‚ç”¨æˆ·æ”¯ä»˜é¡µé¢ç»“æŸåï¼Œå¯èƒ½ä¼šå¾—åˆ°ä¸‰ä¸ªçŠ¶æ€ï¼š\n\n- source.chargeable ç”¨æˆ·æˆæƒï¼ˆæ”¯ä»˜ï¼‰æˆåŠŸ\n- source.failed ç”¨æˆ·æ‹’ç»æˆæƒï¼ˆæ”¯ä»˜ï¼‰\n- source.canceled è¶…æ—¶æ”¯ä»˜\n\n#### åˆ›å»º Charge\nå½“ç”¨æˆ·æ”¯ä»˜æˆåŠŸåï¼Œæ­¤æ—¶åœ¨Stripeç«¯çš„æ”¯ä»˜çŠ¶æ€å˜ä¸ºsource.chargeableï¼Œæ„æ€å°±æ˜¯æˆæƒæˆåŠŸäº†ï¼Œä½ å¯ä»¥åœ¨æˆ‘æ”¯ä»˜å®å¹³å°ä¸Šæ‰£é’±å•¦ï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨**Secret key**æ¥åˆ›å»ºChargeæ¥å®Œæˆï¼Œå®˜æ–¹æ¨èçš„æ˜¯ä½¿ç”¨webhooksæ¥æ•æ‰çŠ¶æ€ï¼Œå¹¶ä¸”å®ŒæˆChargeçš„åˆ›å»ºã€‚å½“Chargeå®Œæˆåï¼Œæ•´ä¸ªæ”¯ä»˜å®Œæˆï¼Œä¼šå¾—åˆ°ä¸€ä¸ªcharge.succeededçš„çŠ¶æ€ã€‚\n\n#### ä½¿ç”¨ webhooks\nWebhooks é‡Œæä¾›äº†å‡ åç§çŠ¶æ€ï¼Œæ‰€æœ‰è¿™äº›çŠ¶æ€éƒ½ä¼šæ³¨å†Œåˆ°Stripeé‡Œä¸€ä¸ªå«webhooksäº‹ä»¶é’©å­çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸åŒäº‹ä»¶çš„è§¦å‘æ—¶ï¼Œè½¬å‘æ•°æ®åˆ°æŸä¸ªæˆ‘ä»¬è‡ªå·±æ­å»ºå¥½çš„Web Apiä¸Šã€‚ï¼ˆä¸‹å›¾æ˜¯æˆ‘ä»¬çš„æœåŠ¡å™¨end point, å› ä¸ºæˆ‘ä»¬æ²¡æœ‰ç”¨åˆ°æœåŠ¡å™¨ï¼Œä½¿ç”¨çš„æ˜¯äºšé©¬é€Šlambdaåšä¸€ä¸ªServerlessï¼‰\n![image](https://images.troyyang.com/2018-1-18-web-hooks.png)\n\n## ä¸¾ä¸ªæ”¯ä»˜å®çš„æ —å­\n\n### æœåŠ¡ç«¯ ï¼ˆServerlessï¼‰\nä»¥AWSçš„Lambda + API gatewayä¸ºä¾‹ï¼Œ å…¶ä¸­ï¼Œå‰è€…æ˜¯ç”¨æ¥å®šä¹‰APIï¼Œ åè€…æ˜¯åšè·¯ç”±ã€‚\n![image](https://images.troyyang.com/2018-1-18-lambda.png)\n\n![image](https://images.troyyang.com/2018-1-18-lambda-source-chargeable.png)\n\n![image](https://images.troyyang.com/2018-1-18-lambda-variable.png)\n\nåˆ›å»ºChargeä»£ç ï¼š\n```\n'use strict';\n\nconst stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);\nexports.handler = (event, context, callback) => {\n    console.log(\"request: \" + JSON.stringify(event));\n\n    let stripeData = event.data.object;\n    stripe.charges.create({\n        amount: stripeData.amount,\n        source: stripeData.id,\n        currency: stripeData.currency || 'usd',\n        description: 'My Englishtutor 30 days' || ('Stripe payment ' + event.id),\n    }, function(err, charge) {\n        if (err && err.type === 'card_error') {\n            context.fail(new Error(err.message));\n        }\n        else if (err) {\n            context.fail(err);\n        }\n        else {\n            context.succeed({ status: charge.status, success: true });\n        }\n    });\n};\n```\n\n\n### å®¢æˆ·ç«¯ (Web)\nå¤šç§å®ç°æ–¹å¼ï¼š\n#### Checkout\næ–‡ç« å¼€å¤´é‚£æ®µ<form>çš„é›†æˆä»£ç å°±æ˜¯ä½¿ç”¨çš„checkoutæ–¹å¼ï¼Œéå¸¸ç®€å•ã€‚é›†æˆä»£ç ç›´æ¥å¸®ä½ å®Œæˆäº†å®¢æˆ·ç«¯çš„éƒ¨åˆ†ï¼ŒæœåŠ¡ç«¯åªéœ€è¦å®šä¹‰å¥½source.chargeableçš„é’©å­API å°±å¥½äº†ã€‚\n\nåœ¨åšæ”¯ä»˜å®å¼€å‘çš„æ—¶å€™ï¼Œå‘ç°å¯ä»¥ç›´æ¥ä½¿ç”¨Checkoutçš„æ–¹å¼ï¼š\n```\n<form action=\"https://xxx.execute-api.eu-central-1.amazonaws.com/stripepayment/xxx\" method=\"POST\">\n  <script\n    src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\"\n    data-key=\"pk_test_xxx\"\n    data-amount=\"30000\"\n    data-name=\"myenglishtutor.eu\"\n    data-label=\"Pay With Alipay\"\n    data-description=\"30 days\"\n    data-image=\"/images/logo.png\"\n    data-locale=\"auto\"\n    data-alipay=\"auto\"\n    data-currency=\"usd\">\n  </script>\n</form>\n```\nä½†æ˜¯æ€»æ˜¯å¾—åˆ°è¿™ä¸ªé”™è¯¯ï¼š\n```\nUnrecognized request URL (POST: /v1/alipay/send_sms). Please see https://stripe.com/docs or we can help at https://support.stripe.com/.\n```\n![image](https://images.troyyang.com/2018-1-21-alipay-checkout.png)\n\nå‘é‚®ä»¶ç»™Stripe support teamå¾—åˆ°çš„ç»“æœæ˜¯ä¸ºäº†ä»¥åçš„æ‰©å±•ï¼ŒStripeä¸å†æä¾›alipayçš„checkoutæ–¹å¼ï¼Œ æ— å¥ˆï¼Œåªå¾—ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ã€‚\n#### Stripe.js & Elements\nå½“ç„¶å¯¹äºå¦‚æœä½ è§‰å¾—Checkoutçš„æ–¹å¼é›†æˆåº¦å¤ªé«˜ï¼Œä¸å¤Ÿçµæ´»ï¼Œé‚£Stripe.jsæ˜¯ä½ æœ€å¥½çš„é€‰æ‹©ã€‚\n\nStripe.jså…¶å®å°±æ˜¯å®¢æˆ·ç«¯çš„ä¸€ä¸ªJSæ ¸å¿ƒç±»åº“ï¼ŒElementsæ˜¯å®ƒçš„UIç±»åº“ï¼Œå…¶å®ä¸Šé¢çš„Checkoutä»£ç å°±æ˜¯Stripeä½¿ç”¨ä¸¤è€…ç»™æˆ‘ä»¬å°è£…å¥½äº†çš„ï¼Œé¿å…æˆ‘ä»¬ç›´æ¥æ¥è§¦æ•æ„Ÿä¿¡æ¯ï¼Œä½†æ˜¯å…¶å®è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç”¨æ¥åˆ›å»ºsourceã€‚è¿™é‡Œå°±ç›´æ¥è´´å‡ºå®¢æˆ·ç«¯çš„ä»£ç äº†(è¿™é‡Œæ²¡æœ‰ç”¨åˆ°ElementsåšUIï¼Œå› ä¸ºå°±æ˜¯ä¸€ä¸ªæŒ‰é’®æ”¯ä»˜ï¼Œå¤ªç®€å•ï¼Œæ‰€ä»¥æ²¡ç”¨åˆ°)ï¼š\n```\nvar stripe = Stripe('pk_live_xxxx');\n\nfunction alipay(amount) {\n    showLoading();\n    stripe.createSource({\n        type: 'alipay',\n        amount: parseInt(amount),\n        currency: 'gbp', // usd, eur,\n        redirect: {\n            return_url: 'https://xxx.eu/pay/result.html'\n        },\n    }).then(function (response) {\n        hideLoading();\n        if (response.error) {\n            alert(response.error.message);\n        }\n        else {\n            processStripeResponse(response.source);\n        }\n    });\n}\n\nfunction processStripeResponse(source) {\n    window.location.href = source.redirect.url;\n}\n```\n![image](https://images.troyyang.com/2018-1-21-alipay-console.png)\n\n\nè¿™é‡Œéœ€è¦æ³¨æ„å‡ ç‚¹ï¼š\n- currency å¿…é¡»æ˜¯Stripeè´¦å·æ‰€åœ¨åœ°è´§å¸ï¼Œä¹Ÿå°±æ˜¯ç»‘å®šçš„é“¶è¡Œå¡æ‰€åœ¨åœ°ï¼Œå› ä¸ºJasonæ˜¯è‹±å›½äººï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨gbpï¼ˆè¿™é‡Œæ„šè ¢å¦‚æˆ‘çš„çŠ¯äº†ä¸€ä¸ªå¸¸è¯†é”™è¯¯ï¼Œä¸€ç›´ä»¥ä¸ºè‹±å›½ä¹Ÿæ˜¯æ¬§ç›Ÿçš„ï¼Œæ‰€ä»¥ä½¿ç”¨eurï¼Œç»“æœæ€ä¹ˆä¹Ÿä¸å¯¹ï¼Œç›´æ¥å“­æ™•åœ¨å•æ‰€ï¼‰\n- return_urlæŒ‡å‘çš„æ˜¯å½“ç”¨æˆ·é‡å®šå‘åˆ°æˆ‘ä»¬å¸¸è§çš„æ”¯ä»˜å®æ”¯ä»˜é¡µé¢åï¼Œè·³è½¬å›æ”¯ä»˜å®Œæˆçš„é¡µé¢ï¼Œåœ¨è¿™ä¸ªè¿”å›é¡µé¢ä¸­ï¼Œå› ä¸ºæ”¯ä»˜å®æ˜¯åŒæ­¥å®Œæˆæ”¯ä»˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»æŸ¥è¯¢charge.succeededçš„çŠ¶æ€æ¥åˆ¤å®šæ˜¯å¦ç”¨æˆ·æ”¯ä»˜æ˜¯å¦å®Œæˆã€‚\n\n\nå½“ä¸€åˆ‡OKï¼Œç‚¹å‡»æ”¯ä»˜æŒ‰é’®ï¼Œå°±ä¼šè·³è½¬åˆ°æ”¯ä»˜å®æ”¯ä»˜é¡µé¢(å…¶ä»–æ”¯æŒçš„ä¸‰æ–¹å¹³å°ä¹Ÿå¯ä»¥)ï¼Œå¦‚ä¸‹ï¼š\n![image](https://images.troyyang.com/2018-1-23-alipay-success.png)\n\n### å¾®ä¿¡å®ç°\nå…¶å®ä¹Ÿéå¸¸çš„ç®€å•ï¼Œåªéœ€è¦å°†ä¸Šä¸€æ­¥çš„typeæ”¹ä¸ºwechatï¼ŒåŒæ—¶è¿”å›sourceä¸­çš„source.wechat.qr_code_urlè½¬ä¸ºäºŒç»´ç å°±å¥½äº†\n```\nvar wechatCallback = function (source) {\n    generateQRCode(source.wechat.qr_code_url);\n}\nfunction generateQRCode(value) {\n    var qrEle = document.getElementById(\"qrcode\");\n    var qrcode = new QRCode(qrEle, {\n        width: 100,\n        height: 100\n    });\n    qrcode.makeCode(value);\n    qrEle.style.display = 'inline-block';\n}\n```\näºŒç»´ç å‡ºæ¥åï¼Œ æ‰«ç å°±ä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœ   \n![image](https://images.troyyang.com/2018-12-16-wechat-success.jpeg)  \n\n(æ›´æ–°) æœ¬äººå¼€å‘äº†ä¸€æ¬¾wordpress stripeæ’ä»¶ï¼Œä¸»è¦é’ˆå¯¹å¾®ä¿¡å’Œæ”¯ä»˜å®ï¼Œæ¶‰åŠä¸€äº›æ›´æ–°ï¼Œè¯¦è§å¦ä¸€ç¯‡æ–‡ç« [Wordpress æ’ä»¶ Stripe Express å‘å¸ƒå•¦!](https://troyyang.com/2020/12/30/wordpress-stripe-express-released/)\n","tags":["finance"],"categories":["Web"]},{"title":"æˆéƒ½æŒç»­äº¤ä»˜å¤§ä¼š","url":"/2017/12/10/cdconf/","content":"æŠ½ç©ºè®°å½•ä¸€ä¸‹2017å¹´11æœˆ18æ—¥ä¸­å›½ç¬¬åä¸‰å±ŠæŒç»­äº¤ä»˜å¤§ä¼šçš„å†…å®¹ï¼Œæ€»çš„æ¥è¯´æ”¶è´§æ»¡æ»¡ï¼Œæ‰«ç›²äº†å¾ˆå¤šæŒç»­é›†æˆï¼ŒæŒç»­äº¤ä»˜ä»¥åŠä¼—å¤šåˆ†å¸ƒå¼ç›¸å…³çš„æŠ€æœ¯ã€‚\n\n![image](https://images.troyyang.com/2017-11-18-cdconf.png)\n\n\n## å…³é”®ç‚¹\n### å¾®æœåŠ¡æ¶æ„\nå¾®æœåŠ¡æ¯«æ— ç–‘é—®æ˜¯è¿™ä¸¤å¹´æœ€ç«çš„æ¶æ„æ¨¡å¼ä¹‹ä¸€ï¼Œå¯æƒœæ²¡æœ‰æœºä¼šå®è·µï¼Œä½†æ˜¯äº†è§£åˆ°çš„æ˜¯é‡ç‚¹åœ¨äºå¦‚ä½•åˆ’åˆ†æœåŠ¡ï¼Œæ›´å¤šçš„å¯ä»¥å‚è€ƒ[cnblogs](https://www.cnblogs.com/imyalost/p/6792724.html)ä¸Šçš„ä¸€ç¯‡åšæ–‡ï¼Œå¾ˆå…¨ã€‚\n![image](https://images.troyyang.com/2017-11-18-microservices.png)\n\n### äº¬ä¸œæ¶æ„æ¼”å˜\nå¬å®Œæ¼”è®²è€…çš„äº¬ä¸œæ¶æ„æ¼”å˜çš„è¿‡ç¨‹å……åˆ†éªŒè¯äº†é‡‘å­—å¡”ä¸æ˜¯ä¸€å¤©å»ºæˆçš„ï¼Œäº’è”ç½‘äº§å“ä¸€ç›´æ˜¯è¿­ä»£çš„ï¼Œä¸¤å¼ äº¬ä¸œæ¶æ„å›¾è¶³ä»¥è¯´æ˜ä»–ä»¬çš„æŠ€æœ¯æ¼”å˜è¿‡ç¨‹ï¼š\n\n**æ¶æ„1.0:**\n![image](https://images.troyyang.com/2017-11-18-jd-v1.png)\n\n**æ¶æ„3.0:**\n![image](https://images.troyyang.com/2017-11-18-jd-v3.png)\n\n### Serverless\næ„Ÿè§‰Serverless ä¼šæ˜¯å¦ä¸€ä¸ªæœªæ¥è½¯ä»¶å¼€å‘çš„è¶‹åŠ¿ï¼Œè‡ªå·±çš„åšå®¢ç³»ç»Ÿé‡Œå°±é›†æˆäº†å¾ˆå¤šserverlessçš„æœåŠ¡ï¼Œå¯¹äºæˆ‘æ¥è¯´æœ€å¸¸è§çš„å¯èƒ½å°±æ˜¯ç±»ä¼¼å„ç§è¯„è®ºç³»ç»ŸåƒDISQUSï¼Œå¤šè¯´, ï¼ˆå“ï¼Œå¯æƒœå·²ç»å…³äº†ï¼‰ï¼Œå­˜å‚¨ç³»ç»Ÿç­‰ã€‚å½“ç„¶å¯¹ä¼ä¸šæ¥è¯´çš„è¯ï¼Œåƒäºšé©¬é€Šçš„Lambdaè¿™ç§æ›´èƒ½æ–¹ä¾¿å®¢æˆ·å¿«é€Ÿæ‹¼æ¥å‡ºå„ç§äº§å“ï¼Œå‡å°‘å¼€å‘äººå‘˜æˆæœ¬ã€‚\n\nè¿™ä¸ªæœˆä¹Ÿå‚åŠ äº†äºšé©¬é€Šç”¨æˆ·ç¤¾åŒºæ´»åŠ¨ï¼Œé‡Œé¢æ›´æ˜¯é‡ç‚¹æåˆ°äº†Serverlessçš„å¹¿æ³›è¿ç”¨ï¼Œå¬å®Œæ›´æ˜¯ä¸ºSeverless æ‰“callã€‚\n\n## æ‰«ç›²ç¯‡ï¼ˆæœªå®Œï¼‰ï¼š\n\n### elasticsearch\n### jmq\n### binlog\n### æ•°æ®åº“åˆ†åº“åˆ†è¡¨ï¼ˆå–æ¨¡ï¼‰\n### jproxy\n### æœåŠ¡æ‰¾å¯»ï¼ˆå–æ¨¡ï¼‰\n### TRUNKED BASED DEVELOPMENT\n### A/B æµ‹è¯•\n### è“ç»¿éƒ¨ç½²\n### åˆ†å¸ƒå¼è°ƒç”¨é“¾è¿½è¸ªåŸç†ï¼šåœ¨ç›¸äº’æ¯ä¸ªæœåŠ¡è¯·æ±‚headerä¸­æ·»åŠ trackId\n### å¥‘çº¦æµ‹è¯•æ¡†æ¶ï¼šjanus, pact, pacto, spring cloud contract\n### å¼€å‘ç¯å¢ƒåŒºåˆ†ï¼šdev-qa-sys-perf-uat-prod (æˆ‘ä»¬å…¬å¸ä½¿ç”¨çš„æœ‰ç‚¹ä¸ä¸€æ ·localdev-stage-dev-qa-uat-prod)\n\n","tags":["devops"],"categories":["ç¬”è®°"]},{"title":"Linuxä¸‹Apacheåå‘ä»£ç†æ­å»ºSSL + Node æœåŠ¡é…ç½®","url":"/2017/11/26/linux_apache_ssl_node/","content":"***\n\n## SSL é…ç½®\n### è¯ä¹¦ç”³è¯· \nCloudflareç”Ÿæˆè¯ä¹¦key pair çš„pem æ ¼å¼æ–‡ä»¶ï¼Œæ›´åä¸º.crtå’Œ.keyã€‚æ–‡ä»¶åå’Œæ‰©å±•ååªæ˜¯ä¸ºäº†æä¾›ä¾¿åˆ©ï¼Œå¯¹åŠŸèƒ½æ²¡æœ‰å½±å“ï¼›ä½ å¯ä»¥å°†è¯ä¹¦å‘½åä¸º cert.crtã€cert.pem æˆ– ä»»ä½•å…¶ä»–æ–‡ä»¶åã€‚\n### æ‹·è´è¯ä¹¦\nä½¿ç”¨winSCP æ‹·è´æ–‡ä»¶è‡³etc/pki/ç›®å½•,å…¶ä¸­.crtæ‹·è´è‡³etc/pki/tls/certs, .keyæ‹·è´è‡³etc/pki/tls/privateä¸‹ã€‚ ï¼ˆç”±äºä½¿ç”¨AWSçš„EC2æœåŠ¡å™¨ï¼Œæ‹·è´æ—¶æ²¡æœ‰å¯¹pkiçš„å†™æƒé™ï¼Œæ‰€ä»¥æ‰§è¡Œäº†ä¸‹é¢è¯­å¥å°†ownshipæƒé™èµ‹äºˆec2-userï¼‰\n```\nsudo chown -R -v ec2-user /etc/pki/\n```\n### Linux Apacheé…ç½®\nå®‰è£…Apache æ¨¡å— mod_ssl æ¥æ·»åŠ  SSL/TLS æ”¯æŒ\n```\nsudo yum install -y mod24_ssl\n```\nè¿™ä¸ªæ—¶å€™æ£€æŸ¥/etc/httpd/conf.d/ssl.confï¼Œä½ ä¼šå‘ç°é»˜è®¤çš„localhostï¼ˆself-signedï¼‰è¯ä¹¦å·²ç»é…ç½®å¥½äº†ã€‚\nè¿™é‡Œä½¿ç”¨è‡ªå·±çš„è¯ä¹¦ï¼Œä¿®æ”¹Apacheé…ç½®æ–‡ä»¶ ssl.conf ä¸­çš„ é…ç½®é¡¹\nSSLCertificateFile /etc/pki/certs/test.cer\nSSLCertificateKeyFile /etc/pki/private/test.key\n\nä¸Šé¢çš„ä¿®æ”¹æ˜¯å…¨å±€çš„ï¼Œä¼šå¯¹æ‰€æœ‰ç«™ç‚¹èµ·ä½œç”¨ï¼Œå¦‚æœåªå¸ƒç½®æŸä¸ªç«™ç‚¹ï¼Œåˆ™éœ€è¦åœ¨åˆ¶å®šç«™ç‚¹çš„é…ç½®é‡Œæ·»åŠ ä¸‹é¢çš„é…ç½®å°±å¥½äº†ã€‚æ‰¾åˆ°æˆ–åˆ›å»ºè‡ªå·±çš„apacheé…ç½®æ–‡ä»¶ï¼Œå¯èƒ½æ˜¯/etc/httpd/conf/httpd.conf æˆ–è€…/etc/httpd/conf.d/ ä¸‹é»˜è®¤çš„xx.confæ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®ä»¥ä½œä¸ºæˆ‘ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ï¼š\n```\nNameVirtualHost *:443\n<VirtualHost *:443>\nDocumentRoot   /var/www/where\nServerName     where.troyyang.com\nSSLEngine      on\nSSLCertificateFile        /etc/pki/tls/certs/where.troyyang.com.crt\nSSLCertificateKeyFile     /etc/pki/tls/private/where.troyyang.com.key\n</VirtualHost>\n```\n\n### æµ‹è¯•\n\n## å®‰è£…[nodejs](https://nodejs.org/en/download/package-manager/)\nOn RHEL, CentOS or Fedora, for Node.js v6 LTS:\n```\ncurl --silent --location https://rpm.nodesource.com/setup_6.x | sudo bash -\nsudo yum -y install nodejs\nsudo yum install gcc-c++ make\n```\n\n### Node æµ‹è¯•\nåœ¨/var/www/whereç›®å½•ä¸‹åˆ›å»ºtest.jsæ–‡ä»¶\n```\nvar http = require(\"http\");\nhttp.createServer(function(request, response) {\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}).listen(1337);\n```\n\n### Apache åå‘ä»£ç†é…ç½®\n```\n<VirtualHost *:443>\n    ServerAdmin admin@site.com\n    ServerName where.troyyang.com\n    SSLEngine      on\n    SSLCertificateFile        /etc/pki/tls/certs/where.troyyang.com.crt\n    SSLCertificateKeyFile     /etc/pki/tls/private/where.troyyang.com.key\n    ProxyRequests off\n    <Proxy *>\n        Order deny,allow\n        Allow from all\n    </Proxy>\n\n    <Location />\n        ProxyPass http://localhost:8080/\n        ProxyPassReverse http://localhost:8080/\n    </Location>\n</VirtualHost>\n```\né‡å¯apache\n```\nsudo httpd -k restart\n```\nå¯åŠ¨node\n```\nsudo su root \ncd /var/www/where/\nnode test.js\n```\næµè§ˆå™¨æµè§ˆhttps://where.troyyang.comï¼Œè¾“å‡ºhello world! ä½†æ˜¯ä¸€æ—¦é€€å‡ºå½“å‰è¿æ¥sessionæ¯”å¦‚puttyï¼Œåˆ™æœåŠ¡åœæ­¢ï¼Œæ‰€ä»¥éœ€è¦è®©nodeæœåŠ¡åœ¨åå°è¿è¡Œï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨[forever](https://www.npmjs.com/package/forever)åŒ…\n```\nsudo npm install -g forever\ncd /var/www/where/\nforever start test.js\n```\n\n###ã€€éƒ¨ç½²æœåŠ¡\n- æ‹·è´æºç \n\n```\ncd /var/www/where/\nnpm install\nNODE_ENV=development node app/server.js\n```\nå¦‚æœç”¨forever\n```\ncd /var/www/where/\nnpm install\nforever stopall\nforever list\nforever start app/server.js NODE_ENV=development\nforever list\n```\n\n>ä¸€å®šè¦æ³¨æ„Nodeæºç ä¸­requireçš„åŒ…ä¸€å®šæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå› ä¸ºUnixç³»ç»Ÿæ˜¯æ–‡ä»¶åå¤§å°å†™æ•æ„Ÿï¼Œè¿™å’ŒWindowsç³»ç»Ÿä¸ä¸€æ ·ã€‚å°±åœ¨è¿™é‡Œè½½äº†ä¸ªå‘ï¼Œæœ‰æ®µä»£ç æ˜¯require('Joi')ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°joiè¿™ä¸ªmoduleåŒ…ï¼Œæ”¹ä¸ºrequire('joi')å°±å¯¹äº†ã€‚\n\n>å¦‚æœç¬¬äºŒæ¬¡éƒ¨ç½²æ—¶ï¼ˆè¦†ç›–åŸæ¥ä»£ç ï¼Œè¿è¡Œnode app/server.jsï¼‰ï¼Œå¯èƒ½ä¼šé‡åˆ°ç«¯å£8080ä½¿ç”¨ä¸­ï¼Œæ­¤æ—¶å¯ä»¥åœç”¨æ‰€æœ‰nodeç›‘å¬ç«¯å£ï¼Œå†è¿è¡Œ\n```\nps aux | grep node\nkillall node\n```\n\n\n\n","tags":["web"],"categories":["ç¬”è®°"]},{"title":"windows ä¸‹æ­å»ºhttps + node.js + nginx","url":"/2017/11/07/windows-ssl-node-nginx/","content":"***\n\næœ€è¿‘åšä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºçš„æ—¶å€™å› ä¸ºè¦æ±‚æ‰€æœ‰è¯·æ±‚éƒ½å¾—æ˜¯httpsçš„è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯https å€’æ˜¯æ­å»ºå¥½äº†ï¼Œå¯æœ¬åœ°æµ‹è¯•æ²¡æ³•è¿›è¡Œå•Šï¼Œäºæ˜¯åªèƒ½è‡ªå·±åœ¨æœ¬åœ°æ­å»ºä¸ªhttpsçš„æœåŠ¡ã€‚\n\næ­¥éª¤å¾ˆå°‘ï¼Œå’ŒæŠŠå¤§è±¡æ”¾è¿›å†°ç®±éœ€è¦çš„æ­¥éª¤ä¸€æ ·ï¼åªéœ€è¦ä¸‰æ­¥ï¼š\nç¬¬ä¸€æ­¥ï¼šè¦ä½¿ç”¨sslï¼Œè‚¯å®šéœ€è¦ç”Ÿæˆè¯ä¹¦ï¼Œè¿™é‡Œæˆ‘å°±ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦\nç¬¬äºŒéƒ¨ï¼šå®‰è£…nginxå’Œé…ç½®ssl\nç¬¬ä¸‰éƒ¨ï¼šç”¨nginxåå‘ä»£ç†åˆ°nodeæœåŠ¡ç«¯å£\n\n\n## è¯ä¹¦ç”Ÿæˆ\n### å®‰è£…Openssl\n\n1. ä¸‹è½½åœ°å€ï¼šhttp://slproweb.com/products/Win32OpenSSL.html\nï¼ˆæ ¹æ®ç³»ç»Ÿé€‰æ‹©32ä½æˆ–è€…64ä½ç‰ˆæœ¬ä¸‹è½½å®‰è£…ï¼‰ã€‚\n\n2. ä¸‹è½½å®Œæˆåï¼Œè¿›è¡Œå®‰è£…ï¼Œé»˜è®¤å®‰è£…åœ¨ C:\\OpenSSL-Win64æ–‡ä»¶å¤¹ä¸­ã€‚\nã€€ã€€\n3. é…ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨ç¯å¢ƒå˜é‡ä¸­æ·»åŠ ç¯å¢ƒå˜é‡Path ï¼šC:\\OpenSSL-Win64\\bin; \n### è‡ªç­¾åè¯ä¹¦ç”Ÿæˆ\n```\n> cd c:\\ssl\n// è®¾ç½®å˜é‡\n> set OPENSSL_CONF=C:\\OpenSSL-Win64\\bin\\openssl.cfg\n> echo %OPENSSL_CONF%\n\n//ç”Ÿæˆserver.key\n> >openssl genrsa -out server.key 4096\n\n//ç”Ÿæˆrequestæ–‡ä»¶\n> openssl req -new -key server.key -out server.csr\n\n//è·å–ç§é’¥\n> openssl x509 -req -days 730 -in server.csr -signkey server.key -out server.crt\n```\nå…¶ä¸­ï¼Œserver.crtå°±æ˜¯æˆ‘ä»¬çš„è¯ä¹¦ï¼Œserver.keyå°±æ˜¯ç§é’¥ã€‚\n\næ³¨æ„ä¸€å®šè¦è®¾ç½®å˜é‡OPENSSL_CONFä¸ç„¶ä¼šæœ‰ä»¥ä¸‹é”™è¯¯\n\n```\nc:\\OpenSSL-Win64\\bin>openssl req -new -key server.key -out server.csr\nCan't open C:\\Program Files\\Common Files\\SSL/openssl.cnf for reading, No such file or directory\n6440:error:02001003:system library:fopen:No such process:crypto\\bio\\bss_file.c:74:fopen('C:\\Program Files\\Common Files\\SSL/openssl.cnf','r')\n6440:error:2006D080:BIO routines:BIO_new_file:no such file:crypto\\bio\\bss_file.c:81:\nEnter pass phrase for server.key:\nunable to find 'distinguished_name' in config\nproblems making Certificate Request\n6440:error:0E06D06A:configuration file routines:NCONF_get_string:no conf or environment variable:crypto\\conf\\conf_lib.c:272:\n```\n\nå®Œæ•´è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n\n```\nD:\\ssl>openssl genrsa -out server.key 4096\nGenerating RSA private key, 4096 bit long modulus\n..............................................................................................................................................................................................................++\n.................................................................................................++\ne is 65537 (0x010001)\n\nD:\\ssl>openssl req -new -key server.key -out server.csr\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [AU]:CN\nState or Province Name (full name) [Some-State]:SC\nLocality Name (eg, city) []:ChengDu\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:\nOrganizational Unit Name (eg, section) []:\nCommon Name (e.g. server FQDN or YOUR name) []:troyyang\nEmail Address []:yangzhoumemail@163.com\n\nPlease enter the following 'extra' attributes\nto be sent with your certificate request\nA challenge password []:\nAn optional company name []:\n\nD:\\ssl>x509 -req -days 730 -in server.csr -signkey server.key -out server.crt\n'x509' is not recognized as an internal or external command,\noperable program or batch file.\n\nD:\\ssl>openssl x509 -req -days 730 -in server.csr -signkey server.key -out server.crt\nSignature ok\nsubject=C = CN, ST = SC, L = ChengDu, O = Internet Widgits Pty Ltd, CN = troyyang, emailAddress = yangzhoumemail@163.com\nGetting Private key\n\nD:\\ssl>\n```\n\n\n## nginx æ­å»º\n### ä¸‹è½½å®‰è£…\nä»å®˜ç½‘ä¸‹è½½nginx æœ€æ–°ç¨³å®šç‰ˆStable version (éå¸¸çš„å°ï¼Œåªæœ‰ä¸åˆ°2Mï¼Œæˆ‘çš„ç‰ˆæœ¬å·æ˜¯1.12.2)  http://nginx.org/en/download.html\n\nç„¶åæ ¹æ®[å®˜æ–¹æ–‡æ¡£](http://nginx.org/en/docs/windows.html)æç¤ºè§£å‹å®‰è£…\n```\ncd c:\\\n// unzip nginx-1.12.2.zip (å¯ä»¥æ‰‹åŠ¨è§£å‹)\ncd nginx-1.12.2\nstart nginx\n```\n\næ£€æµ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ\n```\nC:\\nginx-1.12.2>tasklist /fi \"imagename eq nginx.exe\"\n\nImage Name           PID Session Name     Session#    Mem Usage\n=============== ======== ============== ========== ============\nnginx.exe            652 Console                 0      2 780 K\nnginx.exe           1332 Console                 0      3 112 K\n```\næœ‰ä¸¤ä¸ªè¿›ç¨‹ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼Œä¸€ä¸ªè¿›ç¨‹æ˜¯nginxçš„ä¸»è¿›ç¨‹ï¼Œå¦ä¸€ä¸ªæ˜¯å·¥ä½œè¿›ç¨‹ã€‚\n\nè¿™é‡Œæä¸€ç‚¹\n> è§£å‹å®Œæˆåï¼Œæœ€å¥½æ˜¯ä¸è¦å»ç›´æ¥ç‚¹å‡»nginx.exeæ–‡ä»¶å®‰è£…ï¼Œæˆ‘å°±è¢«å‘è¿‡ï¼Œè§£å‹å®Œæˆåç›´æ¥ç‚¹å‡»ï¼Œå½“æ—¶ä»€ä¹ˆä¹Ÿæ²¡å‘ç”Ÿï¼Œåªæœ‰çª—ä½“é—ªçƒäº†ä¸€ä¸‹ã€‚ç­‰åˆ°cmdæ‰§è¡Œstart nginxæ—¶ï¼Œæ€ä¹ˆéƒ½å¯åŠ¨ä¸èµ·æ¥ã€‚åæ¥æ‰§è¡Œnginx -s reloadåå°±å¯¹äº†ã€‚åŸå› æ®è¯´æ˜¯åŒå‡»è¿è¡Œç¨‹åºä¼šæ”¹å˜é…ç½®æ–‡ä»¶nginx.confï¼Œæ‰€ä»¥éœ€è¦reloadã€‚\n\nå½“nginxå¯åŠ¨åï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®localhoståº”è¯¥å¯ä»¥çš„ï¼Œä¼šæœ‰nginxæ¬¢è¿é¡µé¢ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ£€æŸ¥æ˜¯ä¸æ˜¯IISæœåŠ¡å™¨æ²¡å…³ï¼Œå› ä¸ºIISä¼šæœ‰å¯èƒ½æŠŠ80ç«¯å£å ç”¨\n\n### é…ç½®SSL\næ­¤æ—¶nginxåªæ”¯æŒhttpï¼Œæ‰€ä»¥éœ€è¦æŠŠåˆšæ‰ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦é…ç½®åˆ°nginxé‡Œï¼Œæ‰¾åˆ°é…ç½®æ–‡ä»¶\"C:\\nginx-1.12.2\\conf\\nginx.conf\"ï¼Œç„¶åå–æ¶ˆä¸‹é¢æ³¨é‡Šå¹¶é…ç½®è·¯å¾„\n```\nserver {\n        listen       443 ssl;\n        server_name  localhost;\n    \n        ssl_certificate      D:\\ssl\\server.crt;\n        ssl_certificate_key  D:\\ssl\\server.key;\n    \n        ssl_session_cache    shared:SSL:1m;\n        ssl_session_timeout  5m;\n    \n        ssl_ciphers  HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers  on;\n    \n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n    }\n```\nè®¿é—®https://localhostå°±åº”è¯¥å¯ä»¥çœ‹åˆ°httpså®‰å…¨æé†’ï¼Œé€‰æ‹©ç»§ç»­å°±å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœ\n![image](https://images.troyyang.com/2017-11-7-nginx-ssl.PNG)\n\n## åå‘ä»£ç†Node æœåŠ¡\nä½¿ç”¨expressåˆ›å»ºä¸ªæœ€ç®€å•nodeæœåŠ¡å™¨ï¼Œç«¯å£ä¸º3000\napp.js\n```\nconst express = require('express')\nconst app = express()\n\napp.get('/', (req, res) => res.send('Hello World!'))\n\napp.listen(3000, () => console.log('Example app listening on port 3000!'))\n```\nè¿è¡ŒæœåŠ¡å¹¶ç¡®ä¿localhost:3000èƒ½è®¿é—®åˆ°ã€‚\n```\nnode app.js\n```\n\n### Nginx åå‘ä»£ç†é…ç½®\næ‰¾åˆ°ä¸Šè¿°Nginxé…ç½®æ–‡ä»¶ï¼Œå°†443çš„server location æ”¹ä¸ºä¸‹é¢éƒ¨åˆ†ï¼š\n```\n    server {\n        listen       443 ssl;\n        server_name  localhost;\n    \n        ssl_certificate      D:\\ssl\\server.crt;\n        ssl_certificate_key  D:\\ssl\\server.key;\n    \n        ssl_session_cache    shared:SSL:1m;\n        ssl_session_timeout  5m;\n    \n        ssl_ciphers  HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers  on;\n    \n        location / {\n\t\t\tproxy_pass http://localhost:3000;\n\t\t}\n    }\n```\nå¦‚æœä¸€åˆ‡OKï¼Œè®¿é—®https://localhost ä¼šå¾—åˆ°hello worldçš„è¾“å‡ºã€‚è‡³æ­¤ï¼Œä¸€ä¸ªåœ¨windowså¹³å°ä¸Šä½¿ç”¨ssl + node + nginxçš„æœåŠ¡å°±æ­å»ºå¥½äº†ã€‚\n\nå‚è€ƒï¼š\nhttps://stackoverflow.com/questions/7360602/openssl-and-error-in-reading-openssl-conf-file\n\nhttps://blog.didierstevens.com/2015/03/30/howto-make-your-own-cert-with-openssl-on-windows/\n","tags":["node"],"categories":["ç¬”è®°"]},{"title":"js ç¬”è®°ä¹‹å®Œç¾ç»§æ‰¿çš„æ¼”å˜","url":"/2017/10/21/Javascript_Prototype_Inherience/","content":"é¦–å…ˆæä¸ªé—®é¢˜ï¼Œéƒ½çŸ¥é“JSä¸­çš„ç»§æ‰¿æ–¹å¼æ¼”å˜äº†å¾ˆå¤šç§ï¼Œä½ èƒ½å®Œæ•´çš„å†™å‡ºä¸€ç§å—ï¼Ÿç”¨çš„æœ€å¤šçš„åˆæ˜¯é‚£ç§ï¼Ÿå¦‚æœä½ åªèƒ½æƒ³åˆ°SubClass.prototype = new ParentClass()çš„åŒå­¦å°±çœŸè¯¥å¥½å¥½é¢å£äº†ã€‚\n\nå‰æ®µæ—¶é—´å†™äº†ä¸€ç¯‡[JSç»§æ‰¿çš„ç®€å•ç†è§£](https://troyyang.com/2017/06/25/Javascript_Prototype_Inherience_Understanding/)ï¼Œå®åœ¨æ˜¯å¤ªç®€å•äº†ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ¢³ç†åŸå‹å’Œæ„é€ å™¨çš„å…³ç³»ã€‚æœ€è¿‘åœ¨å¯¹å…¬å¸æ–°åŒäº‹çš„åŸ¹è®­ä¸­æ¶‰åŠåˆ°JSæ ¸å¿ƒéƒ¨åˆ†ï¼Œæ‰€ä»¥åˆä»”ç»†å»ç ”ç©¶äº†ä¸€ä¸‹ï¼Œæ•´ç†å‡ºè¿™ç¯‡ç¬”è®°ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡å‡ºå¹¶æ‹ç –ã€‚\n\n## ä»€ä¹ˆæ˜¯JS ä¸­çš„ç»§æ‰¿ï¼Ÿ\nåˆ›å»ºçš„å­ç±»å°†ç»§æ‰¿è¶…ç±»çš„**æ‰€æœ‰å±æ€§å’Œæ–¹æ³•**ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°åŠæ–¹æ³•çš„å®ç°ã€‚è®°ä½ï¼Œæ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯å…¬ç”¨çš„ï¼Œå› æ­¤å­ç±»å¯ç›´æ¥è®¿é—®è¿™äº›æ–¹æ³•ã€‚å­ç±»è¿˜å¯æ·»åŠ è¶…ç±»ä¸­æ²¡æœ‰çš„æ–°å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è¦†ç›–è¶…ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚\n\n## å®Œç¾ç»§æ‰¿\nä»¥å‰åœ¨å¼€å‘ä¸­ï¼Œä½¿ç”¨ç»§æ‰¿ç”¨å¾—æœ€é¢‘ç¹çš„ç»§æ‰¿æ–¹å¼è«è¿‡äº[MDN](https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Inheritance)ä¸Šæ‰€æ¨èçš„ï¼Œæ®è¯´ä¹Ÿæ˜¯æœ€å®Œç¾çš„ç»§æ‰¿ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™ç§ï¼š\n```\nfunction Person(first, last, age, gender, interests) {\n  this.name = {\n    first,\n    last\n  };\n  this.age = age;\n  this.gender = gender;\n  this.interests = interests;\n};\nPerson.prototype.greeting = function() {\n  alert('Hi! I\\'m ' + this.name.first + '.');\n};\n\nfunction Teacher(first, last, age, gender, interests, subject) {\n  Person.call(this, first, last, age, gender, interests);\n\n  this.subject = subject;\n}\nTeacher.prototype = Object.create(Person.prototype);\nTeacher.prototype.constructor = Teacher;\n```\n\næ¯«æ— ç–‘é—®ï¼Œè¿™ç§ç»§æ‰¿æ–¹å¼æ˜¯åŸºäºåŸå‹é“¾çš„ï¼Œè€Œå¹¶éå…¶ä»–å¤åˆ¶æ–¹å¼çš„ç»§æ‰¿ï¼Œè€Œæœ€æ–°ES6 classä¸­çš„extendsä¹Ÿå…¶å®å°±æ˜¯ä¸Šé¢çš„ä¸€ç§è¯­æ³•ç³–ï¼Œæ‰€ä»¥ææ¸…æ¥šå…¶ä¸­çš„åŸç†è‡³å…³é‡è¦ã€‚ä¸Šé¢æ¶‰åŠåˆ°çš„ä¸œè¥¿å¯¹äºæ–°æ‰‹è€Œè¨€æŒºå¤šäº†ï¼Œå…³äºthisçš„éƒ¨åˆ†æˆ‘å¸Œæœ›è‡ªå·±å†åœ¨æ•´ç†å•ç‹¬ä¸€ç¯‡æ–‡ç« ï¼Œè€Œä¸”å…¶å®ä»¥å‰ä½¿ç”¨çš„æ—¶å€™å¹¶æ²¡æœ‰çœŸæ­£ç†è§£æ‰€æœ‰çš„åœ°æ–¹ã€‚ä»¥ä¸Šæ ¸å¿ƒçš„åœ°æ–¹æœ‰ä¸‰ä¸ªã€‚\n- Person.call \n- Teacher.prototype = Object.create(Person.prototype);\n- Teacher.prototype.constructor = Teacher;\n\n\n## ä¸€æ­¥ä¸€æ­¥å¾€ä¸Šçˆ¬ï¼ˆç»§æ‰¿çš„æ¼”å˜ï¼‰\nç°åœ¨å¿˜è®°ä¸Šé¢çš„æœ€ç»ˆæˆå“ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ­¥ä¸€æ­¥å¦‚æŠ½ä¸å‰¥èŒ§èˆ¬çš„è¾¾åˆ°ä¸Šè¿°ç»“æœã€‚\n\n### æœ€ç®€å•çš„åŸå‹é“¾ç»§æ‰¿\n```\n function A(a){\n    this.val = a;\n    this.arr = [];\n}\nfunction B(){\n}\nB.prototype = new A();\n\nvar b1 = new B();\nvar b2 = new B();\nb1.val = 1;\nb1.arr.push(1);\nconsole.log(b1.val) // 1\nconsole.log(b1.arr); // 2\nconsole.log(b2.val) // undefined\nconsole.log(b2.arr); // 2\n```\nè¿™å¯èƒ½æ˜¯å¾ˆå¤šäººçš„ç¬¬ä¸€ä¸ªç»§æ‰¿ç‰ˆæœ¬ï¼Œå¯æƒœå› ä¸ºä¸¤ä¸ªé—®é¢˜æ ¹æœ¬æ²¡æ³•ç”¨ã€‚\n- åŸå‹å¯¹è±¡çš„å¼•ç”¨å±æ€§æ˜¯æ‰€æœ‰å®ä¾‹å…±äº«çš„ ï¼ˆb1å¯¹arrçš„æ”¹å˜å½±å“åˆ°äº†b2çš„arr, valåˆ™æ²¡æœ‰å½±å“ï¼Œå› ä¸ºarræ˜¯å¼•ç”¨ç±»å‹ï¼‰\n- æ²¡æ³•ä½¿ç”¨çˆ¶ç±»çš„æ„é€ å™¨å‚æ•°\n\n### æ„é€ å‡½æ•°ç»§æ‰¿\nä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œäºæ˜¯æ”¹è¿›ä»£ç ï¼š\n```\n function A(a){\n    this.val = a;\n    this.arr = [];\n    this.func1 = function(){}\n}\nfunction B(param1){\n    A.call(this, param1])\n}\nB.prototype = new A();\n\nvar b1 = new B(1);\nvar b2 = new B(2);\nconsole.log(b1.val) // 1\nconsole.log(b1.arr); // 1\nconsole.log(b2.val) // 2\nconsole.log(b2.arr); // 2\nconsole.log(b1.fun1 === b2.fun1) // false\n```\nå¥½ï¼ŒåŸå‹å¯¹è±¡å±æ€§å’Œæ„é€ å™¨å‚æ•°é—®é¢˜è™½ç„¶è§£å†³äº†ï¼Œä½†æ˜¯åŸå‹çš„æ–¹æ³•å¹¶æ²¡æœ‰å®ç°å…±äº«ï¼Œæ‰€ä»¥ä¼šé€ æˆæå¤§çš„å†…å­˜æµªè´¹ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¸å¯å–çš„ã€‚\n\n### ç»„åˆç»§æ‰¿\n```\nfunction A(a){\n    // åªåœ¨æ­¤å¤„å£°æ˜åŸºæœ¬å±æ€§å’Œå¼•ç”¨å±æ€§\n    this.val = a;\n    this.arr = [];\n}\n//  åœ¨æ­¤å¤„å£°æ˜å‡½æ•°\nA.prototype.func1 = function(){};\n\nfunction B(param1){\n    A.call(this, param1)\n}\nB.prototype = new A();\nvar b1 = new B(1);\nvar b2 = new B(2);\nconsole.log(b1.fun1 === b2.fun1) // true\n```\nA.call(this);ç»§æ‰¿çˆ¶ç±»çš„åŸºæœ¬å±æ€§å’Œå¼•ç”¨å±æ€§å¹¶ä¿ç•™èƒ½ä¼ å‚çš„ä¼˜ç‚¹ï¼›é€šè¿‡B.prototype = new A();ç»§æ‰¿çˆ¶ç±»å‡½æ•°ï¼Œå®ç°å‡½æ•°å¤ç”¨ã€‚\n\nåˆ°äº†è¿™é‡Œï¼Œä¼¼ä¹æˆ‘ä»¬æ‰¾åˆ°äº†æœ€ä½³ç»§æ‰¿æ–¹å¼ï¼Œå¯æƒœè¿˜æ˜¯æœ‰ä¸€ä¸ªå°å°çš„ç¼ºç‚¹ï¼šAæ„é€ å™¨ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡, ä¸€æ¬¡æ˜¯new Açš„æ—¶å€™ï¼Œè¿˜æœ‰ä¸€æ¬¡æ˜¯A.applyè°ƒç”¨çš„æ—¶å€™ã€‚\n\n### å®Œç¾ç»§æ‰¿\nä»ç»„åˆç»§æ‰¿æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒçœŸæ­£çš„é—®é¢˜åœ¨äºnew A()ã€‚æˆ‘ä»¬åœ¨è¿™ä¸€æ­¥çš„æ—¶å€™å…¶å®ä»…ä»…åªæ˜¯æƒ³è¦é€šç”¨çˆ¶ç±»prototypeä¸­å®šä¹‰çš„æ–¹æ³•ï¼ˆçˆ¶ç±»çš„å±æ€§æˆ‘ä»¬å·²ç»é€šè¿‡applyçš„é‚£ä¸€è¡Œè°ƒç”¨åˆ°äº†ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ”¹è¿›è¿™ä¸€æ­¥å°±å¥½äº†ã€‚\n\nä¹Ÿè®¸ä½ ä¼šæƒ³ï¼Œé‚£ç›´æ¥ä½¿ç”¨Açš„prototypeä¸å°±å®Œäº†\n```\nB.prototype = A.prototype;\n```\nè‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä»»ä½•Bå¯¹åŸå‹çš„ä¿®æ”¹éƒ½è®²å½±å“åˆ°Açš„åŸå‹ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»™Bçš„åŸå‹å¢åŠ ä¸€ä¸ªæ–¹æ³•ã€‚æ­¤å¤–ï¼ŒåŸå‹ä¸Šçš„æ„é€ å™¨ä¹Ÿä¼šæ˜¯åŒä¸€ä¸ªB.prototype.constructor === A.prototype.constructorã€‚\n\næ€ä¹ˆåŠï¼Ÿä¸€ä¸ªèªæ˜çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ç„¶åæŠŠç©ºå¯¹è±¡çš„åŸå‹æŒ‡å‘Açš„åŸå‹ï¼Œå› ä¸ºè¿™æ ·çš„ç©ºå¯¹è±¡æ˜¯ä¸å ç”¨ä»»ä½•å†…å­˜çš„ã€‚\n```\nvar temp = new Object();\ntemp.__proto__ = A.prototype;\n\nB.prototype = temp;\n```\n\nè€Œå…¶å®ï¼Œä¸Šé¢çš„ä»£ç å°±æ˜¯æˆ‘ä»[Object.create](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create)æºç ä¸­æ‹·è´è¿‡æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¹å†™ä¸ºï¼š\n```\nB.prototype = Object.create(A.prototype);\n```\n\nç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬çš„å®Œç¾ç»§æ‰¿åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n```\nfunction A(a){\n    // åªåœ¨æ­¤å¤„å£°æ˜åŸºæœ¬å±æ€§å’Œå¼•ç”¨å±æ€§\n    this.val = a;\n    this.arr = [];\n}\n//  åœ¨æ­¤å¤„å£°æ˜å‡½æ•°\nA.prototype.func1 = function(){};\n\nfunction B(param1){\n    A.call(this, param1)\n}\nB.prototype = Object.create(A.prototype);\n```\n\nç„¶åï¼Œè¿˜æ˜¯æœ‰ä¸ªç‘•ç–µï¼ˆæˆ‘ä¿è¯æ˜¯æœ€åä¸€ä¸ªï¼‰ï¼šB.prototype.constructor === Objectï¼Œ æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™ä¸ªæ—¶å€™éœ€è¦é‡ç½®Bçš„åŸå‹æ„é€ å™¨æŒ‡å‘ï¼š\n```\nB.prototype.constructor = B;\n```\n\nå¥½äº†ï¼Œå®Œç¾ç»§æ‰¿æ–¹å¼å°±æ˜¯è¿™æ ·æ¥çš„ï¼Œæˆ‘ä»¬åœ¨å›è¿‡å¤´å»çœ‹çœ‹æ–‡ç« å¼€å¤´é‚£æ®µMDNç»™å‡ºçš„ç»§æ‰¿æ–¹å¼ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰çš„éƒ½ç†è§£äº†ï¼š\n- Person.call \nç›®çš„æ˜¯è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°æˆ–è€…ä»…ä»…ç†è§£ä¸ºå€Ÿç”¨æ„é€ å‡½æ•°ä¸­çš„ä»£ç ä¸ºè‡ªå·±èµ‹å±æ€§å€¼ï¼Œæ‰€ä»¥å±æ€§éƒ½å®šä¹‰åœ¨çˆ¶ç±»æ„é€ å™¨ä¸­\n- Teacher.prototype = Object.create(Person.prototype);\nç›®çš„æ˜¯çˆ¶ç±»åŸå‹ä¸­çš„å‡½æ•°å¤ç”¨ï¼Œæ‰€ä»¥å…±äº«æ–¹æ³•éƒ½å®šä¹‰åœ¨çˆ¶ç±»åŸå‹ä¸­ã€‚\n- Teacher.prototype.constructor = Teacher;\nç›®çš„æ˜¯é‡ç½®å­ç±»åŸå‹æ„é€ å™¨ï¼Œå…·ä½“åŸå› å¯ä»¥å‚è€ƒ[why-is-it-necessary-to-set-the-prototype-constructor](https://stackoverflow.com/questions/8453887/why-is-it-necessary-to-set-the-prototype-constructor)\n\n\nå‚è€ƒï¼š\n\nhttps://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Inheritance\nhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create\nhttp://www.w3school.com.cn/js/pro_js_inheritance_implementing.asp\nhttp://www.cnblogs.com/ayqy/p/4471638.html\n","tags":["webå‰ç«¯"],"categories":["ç¬”è®°"]},{"title":"é«˜å¯é æ€§MongoDB å®‰è£…æŒ‡å—","url":"/2017/09/01/mongo-installation-guide/","content":"\næœ€è¿‘é¡¹ç›®ä¸­ç”¨åˆ°äº†MongoDBï¼Œé¡ºä¾¿å°±å†™äº†å®‰è£…è¯´æ˜æ–‡æ¡£ï¼ŒåŒ…æ‹¬åˆ›å»ºé«˜å¯é æ€§çš„å‰¯æœ¬é›†replica-setï¼Œè¿œç¨‹è¿æ¥ï¼Œå¯†ç ç™»å½•ç­‰é…ç½®ã€‚\n### å®‰è£… MongoDB\n\n1. ä¸‹è½½ [MongoDB](https://www.mongodb.com/download-center?jmp=nav#community)\n2. ç³»ç»Ÿç¯å¢ƒè®¾ç½®. (Path: C:\\Program Files\\MongoDB\\Server\\3.4\\bin)\n\n### åˆ›å»º MongoDB å®ä¾‹\n\n1. åˆ›å»ºé«˜æ€§èƒ½å‰¯æœ¬é›†replica-setæ•°æ®åº“ï¼Œæ‰“å¼€å‘½ä»¤è¡Œ (mongodä»£è¡¨ç€æœåŠ¡å™¨)\n```\n>mkdir d:\\mongodb\\db01\n>mongod --port 27017 --dbpath \"d:\\mongodb\\db01\" --replSet \"rs01dev\"\n```\nè¿è¡ŒæˆåŠŸåï¼Œå‰¯æœ¬é›†db01å·²ç»åˆ›å»ºæˆåŠŸå¹¶å¤„äºè¿è¡Œä¸­ï¼Œæ­¤æ—¶ä¸å…³é—­å‘½ä»¤çª—ä½“ï¼Œä¿æŒå…¶è¿è¡ŒçŠ¶æ€ã€‚\n\n2. åˆå§‹åŒ– [replica-set](https://docs.mongodb.com/manual/tutorial/deploy-replica-set/).\næ‰“å¼€å¦ä¸€ä¸ªå‘½ä»¤çª—ä½“ï¼Œå¹¶è¿è¡Œä¸‹é¢å‘½ä»¤(mongoä»£è¡¨ç€å®¢æˆ·ç«¯)\n```\n>mongo\n>rs.initiate({\n    _id: \"rs01dev\",\n      version: 1,\n      members: [\n         { _id: 0, host : \"127.0.0.1:27017\" }\n      ]\n})\n>rs.config()\n```\nä¸Šé¢çš„å‘½ä»¤å°†ä¼šåˆ›å»ºä¸€ä¸ªä¸»å‰¯æœ¬é›†ï¼ˆèŠ‚ç‚¹ï¼‰\n\n3. åˆ›å»ºæ•°æ®åº“ 'myDB'\n```\n>use myDB\n>db.createUser(\n  {\n    user: \"troyyang\",\n    pwd: \"5469a64fe0a336da365f44f5980f573c\",\n    roles: [\n       { role: \"readWrite\", db: \"myDB\" },\n       { role: \"dbAdmin\", db: \"myDB\" }\n    ]\n  }\n)\n// ä¸Šé¢çš„å‘½ä»¤ä¸ä¼šé©¬ä¸Šåˆ›å»ºå‡ºæ•°æ®åº“ï¼Œåªæœ‰æ’å…¥è¯­å¥ä¼šè§¦å‘åˆ›å»ºæ•°æ®åº“\n>db.test.insert({\"name\":\"name1\"})\n```\n\n###  ç™»å½•éªŒè¯\né»˜è®¤æƒ…å†µä¸‹ï¼Œmongoæ•°æ®åº“çš„è¿æ¥æ˜¯ä¸éœ€è¦éªŒè¯çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸Šé¢çš„é‚£ä¸ªå®¢æˆ·ç«¯èƒ½ç›´æ¥è¿æ¥ä¸ŠæœåŠ¡ç«¯ï¼Œæ‰€ä»¥è¿™æ ·æ˜¯æå…¶ä¸å®‰å…¨çš„åšæ³•ï¼Œå› æ­¤æˆ‘ä»¬è¿™é‡Œéœ€è¦ä½¿ç”¨ç™»å½•éªŒè¯çš„æ–¹å¼ã€‚\n\nå…³é—­ä¸Šé¢çš„å®¢æˆ·ç«¯å‘½ä»¤è¡Œï¼Œä»¥åŠæœåŠ¡ç«¯ã€‚ç„¶åæ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤çª—ä½“å¹¶æ‰§è¡Œä¸‹é¢å‘½ä»¤å¼€å¯æœåŠ¡å™¨ï¼š\n```\nmongod --auth --port 27017 --dbpath \"d:\\mongodb\\db01\" --replSet \"rs01dev\"\n```\næ­¤æ—¶ï¼Œéœ€è¦éªŒè¯çš„æœåŠ¡å™¨å¼€å¯å®Œæˆï¼Œéå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯å¤šäº†ä¸€ä¸ª --authçš„å‚æ•°ã€‚\n\n###  å®¢æˆ·ç«¯ç™»å½•éªŒè¯æµ‹è¯•\n* å‘½ä»¤è¡Œå®¢æˆ·ç«¯æµ‹è¯•: æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œçª—ä½“ï¼ˆæœ¬æœºæˆ–è€…å¤–éƒ¨æœºå™¨ï¼‰ï¼Œç„¶åæ‰§è¡Œ:\n```\n>mongo 127.0.0.1:27017 -u \"troyyang\" -p \"5469a64fe0a336da365f44f5980f573c\" --authenticationDatabase \"myDB\"\n```\n\n* Robomongo æµ‹è¯•\nç•¥\n","tags":["No-SQL"],"categories":["æ•°æ®åº“"]},{"title":"Hexo-lazyload-imageå›¾ç‰‡æ‡’åŠ è½½","url":"/2017/08/06/hexo-lazyload-image/","content":"\n### åŠ¨æœº\næœ€è¿‘åœ¨çœ‹Google Chromeæ–°å‡ºçš„ä¸€ä¸ªAPIæ˜¯æ— æ„é—´æƒ³åˆ°äº†å¯¹å›¾ç‰‡çš„æ‡’åŠ è½½ï¼Œåæ¥æƒ³æƒ³è‡ªå·±çš„ç½‘ç«™è¿˜ä¸æ”¯æŒå‘¢ï¼Œç´¢æ€§èŠ±äº†äº›æ—¶é—´è®©ç½‘ç«™ç»™æ”¯æŒä¸Šäº†ï¼Œå¹¶å‘ç°Hexoä¸Šè¿˜æ²¡æœ‰ä¸€ä¸ªæ‡’åŠ è½½çš„æ’ä»¶ï¼Œåˆå€’è…¾ç€å†™äº†ä¸ªhexoçš„æ’ä»¶[hexo-lazyload-image](https://www.npmjs.com/package/hexo-lazyload-image)ï¼Œå¹¶å‘å¸ƒåˆ°NPMä¸Šä¾›å¤§å®¶ä½¿ç”¨ï¼Œä»è¿™å‡ å¤©ä¸‹è½½æ•°æ¥çœ‹çœ‹æ¥å¤§å®¶è¿˜æ˜¯å¾ˆæœ‰è¿™ä¸ªéœ€æ±‚ :)ã€‚\n### å›¾ç‰‡æ‡’åŠ è½½\nå›¾ç‰‡æ‡’åŠ è½½æ˜¯æå‡ç½‘ç«™æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒçš„ä¸€ä¸ªéå¸¸å¾ˆå¥½æ–¹å¼ï¼Œå¹¶ä¸”å‡ ä¹æ‰€æœ‰çš„å¤§å‹ç½‘ç«™éƒ½ä½¿ç”¨åˆ°äº†ï¼Œæ¯”å¦‚å¾®åšï¼Œä»…æŠŠç”¨æˆ·å¯è§çš„éƒ¨åˆ†æ˜¾ç¤ºå›¾ç‰‡ï¼Œå…¶ä½™çš„éƒ½æš‚æ—¶ä¸åŠ è½½ï¼Œåšæ³•å°±æ˜¯ï¼šè®©æ‰€æœ‰å›¾ç‰‡å…ƒç´ srcæŒ‡å‘ä¸€ä¸ªå°çš„ç«™ä½å›¾ç‰‡æ¯”å¦‚loadingï¼Œå¹¶æ–°å¢ä¸€ä¸ªå±æ€§(å¦‚data-original)å­˜æ”¾çœŸå®å›¾ç‰‡åœ°å€ã€‚æ¯å½“é¡µé¢åŠ è½½ï¼ˆæˆ–è€…æ»šåŠ¨æ¡æ»šåŠ¨ï¼‰ï¼Œä½¿ç”¨JSè„šæœ¬å°†å¯è§†åŒºåŸŸå†…çš„å›¾ç‰‡srcæ›¿æ¢å›çœŸå®åœ°å€ï¼Œå¹¶åšè¯·æ±‚é‡æ–°åŠ è½½ã€‚ \n### Hexo-lazy-image å®ç°åŸç†\nå› ä¸ºæ–‡ç« éƒ½æ˜¯ä½¿ç”¨markdownæ¥ç¼–å†™çš„ï¼Œæ‰€ä»¥ä¸å¯èƒ½è¦æ±‚æˆ‘ä»¬åœ¨markdowné‡Œå°†æ‰€æœ‰å›¾ç‰‡è·¯å¾„éƒ½æŒ‡å‘ç«™ä½å›¾ç‰‡ï¼Œå¹¶é™„åŠ å¦ä¸€ä¸ªå±æ€§ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªå·¥ä½œå¿…é¡»ç•™ç»™hexoçš„generateéƒ¨åˆ†æ¥åšã€‚\n\næœ€ç»ˆå¯åˆ†ä¸ºä¸¤æ­¥ï¼š \n1. åœ¨hexo *after_post_render*äº‹ä»¶æˆ–è€…*after_render:html*äº‹ä»¶é‡Œå°†ç”Ÿäº§å‡ºæ¥çš„æ–‡ç« htmlä»£ç ä¸­æ‰€æœ‰imgå…ƒç´ éƒ½åŠ ä¸Š data-original å±æ€§ï¼Œå¹¶æŠŠsrcå€¼ä»˜ç»™ä»–ï¼Œ ç„¶ååœ¨å°†srcå€¼è‡´ä¸ºloadingå›¾ç‰‡\n2. æ³¨å…¥simple-lazyloadè„šæœ¬åœ¨æ¯ä¸ªé¡µé¢æœ€åé¢ï¼Œå½“é¡µé¢åŠ è½½è¿‡åè´Ÿè´£åˆ¤å®šå½“å‰éœ€è¦é‡æ–°åŠ è½½çš„å›¾ç‰‡ã€‚\n\nè¿™é‡Œé‡ç‚¹æææ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å¯¹ç¬¬ä¸€æ­¥æ›¿æ¢çš„æ—¶å€™ï¼Œåªæ˜¯ä½¿ç”¨äº†ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…æŸ¥æ‰¾æ‰€æœ‰çš„imgèŠ‚ç‚¹ï¼Œåæ¥å‘ç°ä¸ä»…å¦‚æ­¤ï¼Œæ­£åˆ™è¡¨è¾¾å¼ç»“åˆstring.replaceæ›´æ˜¯å¦‚æ­¤å¼ºå¤§ï¼Œç›´æ¥å°†æˆ‘åŸæ¥30è¡Œçš„ä»£ç å‡ä¸º3è¡Œï¼Œä»æ­¤çƒ­çˆ±ä¸Šäº†æ­£åˆ™è¡¨è¾¾å¼ã€‚\n```\nreturn htmlContent.replace(/<img(\\s*?)src=\"(.*?)\"(.*?)>/gi, function (str, p1, p2) {\n        return str.replace(p2, loadingImage + '\" data-original=\"' + p2);\n    });\n```\n\nå…³äºsimple-lazyloadï¼Œè¿™ä¸ªæ˜¯æ‡’åŠ è½½æ›¿æ¢è„šæœ¬çš„æ ¸å¿ƒï¼ŒåŸæ¥ä½¿ç”¨jquery-lazyloadæ’ä»¶ï¼Œåæ¥è§‰å¾—æ²¡å¿…è¦ï¼Œæœ€ç»ˆè¿˜æ˜¯è‡ªå·±å†™äº†ä¸ªç®€å•ç‰ˆã€‚\n\n\n### Hexo-lazy-image ä½¿ç”¨\nå®‰è£…æ­¥éª¤ï¼š\n```\nnpm install hexo-lazyload-image --save\n```\n\nç„¶åä¿®æ”¹ _config.yml æ–‡ä»¶\n```\nlazyload:\n  enable: true \n  onlypost: false\n  loadingImg: # eg. ./images/loading.png \n```\n\næ—¢ç„¶è¦åˆ†äº«å‡ºæ¥ï¼Œé‚£å°±å¾—æä¾›æ›´å¤šçµæ´»çš„APIæ¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ï¼Œæ‰€ä»¥åˆåŠ ä¸Šäº†ä»¥ä¸‹åŠŸèƒ½:\n\n1. è‡ªå®šä¹‰å ä½å›¾ç‰‡ã€‚ï¼ˆä¸æŒ‡å®šä½¿ç”¨é»˜è®¤å€¼ï¼‰\n2. åªé’ˆå¯¹æ–‡ç« å†…å®¹æˆ–è€…å…¨ç½‘ç«™å›¾ç‰‡ä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½\n\n\n### å…³äºnpm å‘å¸ƒåŒ…é‚£ç‚¹äº‹\nå‘å¸ƒNPMåŒ…çš„æ—¶å€™æœ‰å‡ ä¸ªæ³¨æ„äº‹é¡¹ï¼Œè¿™é‡Œåˆ—ä¸€ä¸‹\n* æ¯æ¬¡publishå¿…é¡»åœ¨readmeä¸­æ›´æ–°ç‰ˆæœ¬å·(npm patchä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆæœ€æ–°ç‰ˆæœ¬å·æ–¹ä¾¿ä½ ä½¿ç”¨)\n* è¦æ›´æ–°npmä¸­çš„readmeé¡µé¢ï¼Œéœ€è¦å†æ¬¡è°ƒç”¨npm patchå‘½ä»¤ï¼Œä¸ç„¶å°½ç®¡ä½ å·²ç»æ›´æ–°äº†readmeæ–‡ä»¶ï¼ŒnpmåŒ…é¡µé¢è¿˜æ˜¯ä¿æŒåŸæ¥çš„é¡µé¢\n* åœ¨packages.jsonä¸­æœ€å¥½æŠŠgitåœ°å€åŠ ä¸Šï¼Œå› ä¸ºnpmä¼šè‡ªåŠ¨è§£æpackages.jsonæ–‡ä»¶ï¼Œä¼šæ˜ å°„åˆ°åŒ…é¡µé¢ç›¸åº”çš„ä½ç½®\n","tags":["webå‰ç«¯"],"categories":["webå‰ç«¯"]},{"title":"Javascriptä¸­åŸå‹é“¾ç»§æ‰¿çš„ç®€å•ç†è§£","url":"/2017/06/25/Javascript_Prototype_Inherience_Understanding/","content":"ä»¥å‰å¯¹äºJavasciptä¸­çš„ç»§æ‰¿ï¼Œå¤§éƒ¨åˆ†åªæ˜¯åŸºäºä»£ç å±‚é¢ï¼Œç†è®ºç†è§£è™½ç„¶çœ‹äº†å¾ˆå¤šï¼Œæ€»æ˜¯å½“æ—¶ç†è§£äº†è¿‡å‡ å¤©ç¡®åˆå¿˜äº†æ€ä¹ˆçš„äº†ã€‚è¿™ä¸¤å¤©åˆçœ‹äº†ä¸€éã€ŠJavascripé¢å‘å¯¹è±¡ç¼–ç¨‹æŒ‡å—ã€‹ï¼Œå…¶ä¸­åœ¨è¯´åˆ°åŸå‹é“¾çš„æ—¶å€™æœ‰ä¸€æ®µè¯è§£é‡Šäº†å¾ˆå¤šä»¥å‰è‡ªå·±å®¹æ˜“æ··æ·†çš„åœ°æ–¹ï¼š\n> é¦–å…ˆæˆ‘ä»¬çŸ¥é“æ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªæ„é€ å™¨ï¼Œè€ŒåŸå‹æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ„å‘³ç€å®ƒå¿…ç„¶ä¹Ÿæœ‰ä¸€ä¸ªæ„é€ å™¨ï¼Œè€Œè¿™ä¸ªæ„é€ å™¨åˆä¼šæœ‰è‡ªå·±çš„åŸå‹ï¼Œäºæ˜¯è¿™ç§ç»“æ„å°±ä¼šæŒç»­ä¸‹å»ï¼Œå½¢æˆä¸€ä¸ªåŸå‹é“¾ã€‚\n\n## å®è·µå‡ºçœŸçŸ¥\nç†è§£è¿™æ®µè¯å¹¶ä¸éš¾ï¼Œå¯å¦‚æœæ²¡æœ‰åœ¨å®è·µä¸­å»ç†è§£ï¼Œå°±ä¼šåƒä»¥å‰ä¸€æ ·ï¼Œè€æ˜¯è®°ä¸ä½ã€‚\n### å®ä¾‹å¯¹è±¡çš„å„ç§å±æ€§\nå…ˆçœ‹çœ‹æœ€ç®€å•çš„å†…ç½®å¯¹è±¡stringç±»å‹çš„å„ç§æ„é€ å‡½æ•°ï¼ˆæ„é€ å™¨ï¼‰å’ŒåŸå‹ï¼Œaä¸€å®šæ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ„é€ å‡½æ•°(æ„é€ å‡½æ•°ä¸€èˆ¬æ˜¯å¤§å†™)ã€‚\n\n![image](https://images.troyyang.com/2017-6-25-js-inherence.png)\n\nä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ°å¾ˆå¤šä¸œè¥¿ï¼š\n- aæ˜¯ç”±Stringæ„é€ å‡½æ•°(constructor)åˆ›å»ºçš„ã€‚\n- açš„æ„é€ å™¨å‡½æ•°(constructor)æ˜¯æœ‰åŸå‹(prototype)çš„ã€‚\n- aæ˜¯æ²¡æœ‰åŸå‹å±æ€§(prototype)çš„ã€‚\n- ç¥ç§˜çš„__proto__ç›´æ¥æ˜¯å¯¹aæ„é€ å™¨çš„åŸå‹çš„å¼•ç”¨ã€‚\n\næ‰€ä»¥å¦‚æœaé‡Œæœ‰æˆ‘ä»¬ç»§æ‰¿çš„åŸå‹å±æ€§å€¼ratingï¼Œæˆ‘ä»¬å¹³æ—¶å°±å¯ä»¥è¿™æ ·ä½¿ç”¨:\n```\na.constructor === String\na.constructor.prototype.rating === a.rating\n```\n\n### æ„é€ å‡½æ•°çš„åŸå‹\n\nåœ¨JSä¸­å®ç°ç»§æ‰¿çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œè€Œæˆ‘æœ€å–œæ¬¢è¿™ç§[Mozilla](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Inheritance)æ¨èçš„:\n```\nfunction User(auth) {\n    BaseManager.call(this, auth);\n}\nUser.prototype = Object.create(BaseManager.prototype); // IE8 ä¸æ”¯æŒObject.create\nUser.prototype.constructor = User;\n```\nä»£ç å…¶å®ä¸éš¾ï¼Œä¹Ÿå®¹æ˜“ç†è§£ï¼Œé¦–å…ˆæ˜¯æ„é€ å‡½æ•°å†…è°ƒç”¨åŸºç±»ï¼Œç„¶åæ˜¯åŸå‹è¦†ç›–ï¼Œæœ€åæ˜¯æ„é€ å‡½æ•°é‡æ–°èµ‹å€¼ã€‚å…¶ä¸­æœ€æœ€æœ€åº”è¯¥ç†è§£çš„æ˜¯Useræ˜¯ä¸ªæ„é€ å‡½æ•°è€Œä¸æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œåªæœ‰æ„é€ å‡½æ•°æ˜¯æœ‰prototypeå±æ€§çš„ï¼Œè¿™å’Œä¸Šé¢çš„å®ä¾‹åŒ–å¯¹è±¡aæ˜¯ä¸ä¸€æ ·çš„ã€‚\n","tags":["webå‰ç«¯"],"categories":["ç¬”è®°"]},{"title":"Travis-ciè‡ªåŠ¨ç¼–è¯‘éƒ¨ç½²githubä¸Šçš„é¡¹ç›®","url":"/2017/06/24/Travis_Auto_Build_Deploy_Github_Projects/","content":"åœ¨ä½¿ç”¨Hexoå†™å®Œä¸€ç¯‡åšå®¢åï¼Œéƒ½éœ€è¦æ‰‹åŠ¨åœ¨æœ¬åœ°ç¼–è¯‘ï¼Œå¹¶ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œæœ€ååœ¨ä¸Šä¼ è‡³githubæœåŠ¡å™¨ä¸Šæ‰èƒ½å‘å¸ƒï¼Œç¹çæ­¥éª¤å§‘ä¸”ä¸è¯´ï¼Œä¸‡ä¸€å“ªå¤©æ¢äº†å°ç”µè„‘ï¼Œæ²¡æœ‰Hexoç¯å¢ƒçš„æ—¶å€™å¦‚ä½•å†™åšå®¢å‘¢åˆæˆ–è€…ä¿®æ”¹åšå®¢Bugï¼Ÿè¦æ˜¯ç›´æ¥åœ¨githubæºç é‡Œå†™å¥½æ–‡ç« åèƒ½è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒå°±å¥½äº†ï¼Œå¥½åœ¨githubçš„å¥½åŸºå‹traviså¯ä»¥è½»æ¾å¸®æˆ‘ä»¬åŒæ—¶å®ç°è¿™ç§æŒç»­é›†æˆ, æŒç»­éƒ¨ç½²ã€‚\n## å‰å› \næˆ‘çš„åšå®¢æ˜¯åŸºäº[Hexo](https://hexo.io/)å†™çš„ï¼Œæœ€ç»ˆå‘å¸ƒåœ°å€æ˜¯æ‰˜ç®¡åˆ°Troy-Yang/troy-yang.github.ioä¸‹çš„ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘æŠŠæºç æ”¾åœ¨ä»–çš„ä¸€ä¸ªsourceåˆ†æ”¯ä¸‹ï¼Œä»¥å‰è¦å†™ä¸€ç¯‡åšå®¢çš„åšæ³•æ˜¯ï¼š\n1. è·å–Sourceåˆ†æ”¯ï¼Œä½¿ç”¨markdownå†™å¥½æ–‡ç« æ”¾åœ¨æŒ‡å®šç›®å½•\n2. å®‰è£…æ­å»ºhexoç¯å¢ƒ\n3. ä½¿ç”¨Nodeç¼–è¯‘è¿™ä¸ªhexoé¡¹ç›®\n4. ä½¿ç”¨Nodeå‘å¸ƒç¼–è¯‘åçš„ç»“æœåˆ°githubä¸Š\n\nç¼ºç‚¹æ˜¾è€Œæ˜“è§ï¼Œæˆ‘å¿…é¡»è¦æ­å»ºhexoçš„ç¯å¢ƒï¼Œå¹¶ä¸”è¿˜éœ€è¦è·å–åˆ°sourceæºç ï¼Œè€Œæˆ‘åªæ˜¯æƒ³å†™ä¸€ä¸ªmarkdownå•Šæˆ–è€…ä¿®æ”¹åšå®¢é‡ŒæŸä¸ªcssæ–‡ä»¶çš„bugï¼Œæ‰€ä»¥æœ€ç†æƒ³çš„åšæ³•å°±æ˜¯èƒ½è‡ªåŠ¨æ£€æµ‹åˆ°æˆ‘çš„æºç æ”¹åŠ¨å¹¶è‡ªåŠ¨ç¼–è¯‘éƒ¨ç½²ï¼Œå°±å’Œæˆ‘ä»¬å¹³æ—¶é¡¹ç›®å¼€å‘æ—¶çš„CIã€CDä¸€æ ·ã€‚\n\n## [Travis](https://travis-ci.org/)\nä¸æƒ³ä»‹ç»å¤ªå¤šå®ƒï¼Œåªæƒ³æä¸€ç‚¹çš„æ˜¯å®ƒåªé’ˆå¯¹å¼€æºé¡¹ç›®å…è´¹ï¼Œå¹¶ä¸”å’Œgithubä¸Šçš„é¡¹ç›®é›†æˆï¼Œæ‰€ä»¥æ‰€æœ‰githubä¸Šçš„é¡¹ç›®éƒ½å¯ä»¥ä½¿ç”¨å®ƒåšCIã€CDã€‚\n> è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šgithubä¸Šçš„é¡¹ç›®éƒ½æœ‰.travis.ymlæ–‡ä»¶\nå’Œä»»ä½•CIæœåŠ¡å™¨ä¸€æ ·ï¼Œå®ƒçš„ä½œç”¨å°±åœ¨äºå¯ä»¥æ•æ‰ä»»ä½•ä»£ç æäº¤å¹¶è‡ªåŠ¨åŒ–çš„ç¼–è¯‘éƒ¨ç½²é¡¹ç›®ã€‚\n\n## ç¬¬ä¸€æ­¥ï¼Œgithubä¸Šæ·»åŠ access token\nç™»å½•githubï¼Œè¿›å…¥åˆ°setting => develop setting => personal access tokens\n\nåœ¨descriptioné‡Œè¾“å…¥ä»»æ„token åå­—ï¼Œæ¯”å¦‚Travis-CIï¼Œå¹¶å‹¾é€‰ä¸Šä¸‹é¢æ‰€æœ‰å¤é€‰æ¡†ã€‚è¿™ä¸ªæ—¶å€™ä¼šç”Ÿæˆtokenï¼Œè¯·åŠ¡å¿…è®°ä½ï¼Œå› ä¸ºä»–åªä¼šå‡ºç°ä¸€æ¬¡ï¼Œå¦åˆ™éœ€è¦é‡æ–°ç”Ÿæˆ(è¿™ä¸ªå°±æ˜¯)ã€‚\n\n![image](https://images.troyyang.com/2017-6-24-github-create-token.png)\n\n\n## ç¬¬äºŒæ­¥ï¼Œæ·»åŠ githubä¸Šçš„é¡¹ç›®è‡³travisä¸Š\nä½¿ç”¨githubè´¦å·ç™»å½•[https://travis-ci.org/](https://travis-ci.org/)ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä¼šçœ‹åˆ°è‡ªå·±æ‰€æœ‰githubä¸Šçš„é¡¹ç›®ï¼Œé€‰æ‹©éœ€è¦åšè‡ªåŠ¨é›†æˆçš„é¡¹ç›®troy-yang.github.io\n\n![image](https://images.troyyang.com/2017-6-24-travis-ci-create.png)\n\n## ç¬¬ä¸‰æ­¥, æ·»åŠ access tokenåˆ°travisä¸Š\nç¬¬ä¸€æ­¥å’Œç¬¬ä¸‰æ­¥çš„ç›®çš„æ˜¯ä¿æŠ¤ä½ çš„access tokené™¤äº†traviså’Œä½ è‡ªå·±ä»¥å¤–åˆ«äººéƒ½çœ‹ä¸åˆ°ï¼Œä½ è‚¯å®šä¸å¸Œæœ›æŠŠaccess tokenæ”¾åœ¨.travis.ymlæ–‡ä»¶é‡Œè®©å¤§å®¶éƒ½çœ‹åˆ°å§ã€‚\n\nåœ¨travisä¸Šè¿›å…¥troy-yang.github.io åï¼Œåœ¨å³ä¸Šè§’more optionsé‡Œæ‰¾åˆ°settingï¼Œæ‰“å¼€åï¼Œå‹¾é€‰ [Build only if .travis.yml is present] å¹¶ä¸” åœ¨Environment Variablesä¸­æ·»åŠ githubä¸Šçš„access tokenã€‚\n\n![image](https://images.troyyang.com/2017-6-24-travis-ci-setting.png)\n\n## ç¬¬å››æ­¥,ã€€æ·»åŠ ç¼–å†™.travis.yml\nåœ¨é¡¹ç›®æºç æ ¹ç›®å½•(æˆ‘çš„æ˜¯troy-yang.github.io sourceåˆ†æ”¯), æ·»åŠ .travis.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:\n```\nlanguage: node_js\nnode_js: stable\n\n# S: Build Lifecycle\ninstall:\n  - npm install\n\nbefore_install:\n  - git submodule update --init --remote --recursive\n  \n#before_script:\n # - npm install -g gulp\n\nscript:\n  - hexo g\n\nafter_script:\n  - cd ./public\n  - git init\n  - git config user.name \"troyyang\"\n  - git config user.email \"yangzhouemail@163.com\"\n  - git add .\n  - git commit -m \"Update docs\"\n  - git push --force --quiet \"https://${GitHub_TOKEN}@${GH_REF}\" master:master\n# E: Build LifeCycle\n\nbranches:\n  only:\n    - Source\nenv:\n global:\n   - GH_REF: github.com/Troy-Yang/troy-yang.github.io.git\n```\n\né‡Œé¢æœ€é‡è¦çš„å¯èƒ½å°±æ˜¯æ‰§è¡Œè„šæœ¬å’Œå˜é‡ï¼Œè„šæœ¬ã€‚ å…¶ä¸­hexo gæ˜¯ç¼–è¯‘hexo é¡¹ç›®å‘½ä»¤ï¼Œafter_scriptæ˜¯ç¼–è¯‘å‘½ä»¤å®Œæˆåå°†ç»“æœæ¨é€è‡³githubé¡¹ç›®ä¸‹ã€‚${GitHub_TOKEN} å’Œ ${GH_REF}æ˜¯ä¸¤ä¸ªå ä½ç¬¦ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬åœ¨Travisé¡¹ç›®ä¸‹æ·»åŠ çš„Tokenï¼Œä¼šåœ¨travisæ‰§è¡Œçš„æ—¶å€™è‡ªåŠ¨æ›¿æ¢ï¼Œç¬¬äºŒä¸ªå°±æ˜¯ä¸‹é¢envçš„ä¸€ä¸ªå˜é‡ï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸è¦è¿™ä¸ªå˜é‡ç›´æ¥æ”¾åœ°å€ä¹Ÿå¯ä»¥ã€‚è¿˜æœ‰ä¸€ç‚¹çš„æ˜¯branchæŒ‡å®šï¼Œæˆ‘ä»¬è¿™é‡Œåªéœ€è¦Source åˆ†æ”¯ã€‚\n\næ ¹æ®ä¸åŒé¡¹ç›®ï¼Œtravis.ymlæ–‡ä»¶å†…å®¹å„æœ‰ä¸åŒ, Travisä¸Šçš„ä¸€ä¸ªå®˜æ–¹demoæ–‡ä»¶[.travis.yml]( https://github.com/travis-ci/cat-party/blob/master/.travis.yml)\n\n## ç¬¬äº”æ­¥ï¼Œæµ‹è¯•\nè®©æˆ‘ä»¬è¯•è¯•ç›´æ¥æµè§ˆå™¨ç™»å½•githubï¼Œç„¶ååœ¨troy-yang.github.io.gitä¸‹çš„sourceåˆ†æ”¯ä¸‹æäº¤ä»»ä½•æ–‡ä»¶ä¿®æ”¹ã€‚åœ¨ç™»å½•Travisï¼Œæ­¤æ—¶ä½ å¯ä»¥çœ‹åˆ°ä¸€æ—¦æäº¤ï¼ŒTravisè¿™è¾¹é©¬ä¸Šå¼€å§‹æ‰§è¡Œæµç¨‹ï¼Œçœ‹èµ·æ¥éå¸¸èµå¿ƒæ‚¦ç›®ã€‚\n\n![image](https://images.troyyang.com/2017-6-24-travis-ci-build.png)\n\nä»æ­¤å‘å¸ƒæ–‡ä»¶ï¼Œä¿®æ”¹åšå®¢bugæ˜¯å¦‚æ­¤å®¹æ˜“ï¼åšå®¢å¦‚æ­¤ï¼Œå…¶ä»–å¼€æºé¡¹ç›®åŒæ ·å¦‚æ­¤ã€‚\n","tags":["hexo"],"categories":["ç¬”è®°"]},{"title":"è¸©è¿‡çš„å‘--CORSè·¨åŸŸè¯·æ±‚ä¸­é¢„æ£€(preflight)","url":"/2017/06/06/Express_Cors_Preflight_Request/","content":"***\n### å¼€å¤´\nè¿™ä¸¤å¤©åœ¨ä½¿ç”¨NodeJS Expressæ­å»ºRESTæœåŠ¡å™¨æ—¶é‡åˆ°ä¸€ä¸ªå¾ˆå…¸å‹çš„AJAXè·¨åŸŸåŒ…å«è‡ªå®šä¹‰è¯·æ±‚å¤´é—®é¢˜ï¼ˆç”¨äºèº«ä»½éªŒè¯ï¼‰ï¼Œåœ¨èŠ±äº†å¤§åŠå¤©æ—¶é—´æ’æŸ¥é—®é¢˜åå‘ç°è‡ªå·±å¯¹CORSçœŸæ­£çš„ç†è§£è¿˜å¾ˆä¸å¤Ÿï¼Œå°¤å…¶æ˜¯pre-flightã€‚\n\n### éœ€æ±‚æè¿°\næœåŠ¡ç«¯ä½¿ç”¨NodeJS Expressæ­å»ºåŒ…å«JWTèº«ä»½éªŒè¯çš„REST Full APIï¼Œ å®¢æˆ·ç«¯åœ¨è·å–åˆ°JWTä¿¡æ¯ä¹‹åçš„æ¯æ¬¡APIè¯·æ±‚å¤´ä¸­éƒ½é™„å¸¦ä¸ŠJWTä¿¡æ¯ï¼Œå®Œæˆèº«ä»½éªŒè¯åæ‰èƒ½æ‰§è¡ŒAPIæ“ä½œï¼Œå¦åˆ™è¿”å›401é”™è¯¯ã€‚\n\n#### ä»£ç \n\næœåŠ¡å™¨ç«¯(CORSæ ¸å¿ƒéƒ¨åˆ†):\n\n```\n------ App -----\n...\n// Enable CORS from client-side\napp.use(function (req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\"Access-Control-Allow-Methods\", \"PUT, GET, POST, DELETE, OPTIONS\");\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials\");\n  res.header(\"Access-Control-Allow-Credentials\", \"true\");\n  next();\n});\n\n//parse application/json and look for raw text                                        \napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.text());\napp.use(bodyParser.json({ type: 'application/json' }));\n\n// Routes configuration\napiRoutes(app);\n\napp.listen(port);\n\n------- User -----\n//==========================\n// User Routes\n//==========================\napiRoutes.use('/user', passport.authenticate('jwt', {session: false }), userRoutes);\nuserRoutes.get('/', user.getUsers);\nuserRoutes.get('/:id', user.getUser);\nuserRoutes.post('/', user.postUser);\nuserRoutes.put('/:id', user.updateUser);\nuserRoutes.delete('/:id', user.deleteUser);\n```\n\nä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥è¿˜æ˜¯é‚£ä¹ˆå¤šæ¸…æ™°ï¼Œåœ¨PostMan æµ‹è¯•ä¸­é™„å¸¦jwtä¹Ÿæ˜¯æ²¡æœ‰ä»»ä½•çš„é—®é¢˜ï¼ŒæˆåŠŸè¿”å›ã€‚\n![image](https://images.troyyang.com/2017-06-05-CORS-Postman.PNG)\n\næ¥ä¸‹æ¥æ˜¯å®¢æˆ·ç«¯(jquery ajax):\n\n```\n------- Core --------\nfunction BaseManager(auth) {\n    this.baseApiUrl = 'http://localhost:8080/api/';\n    this.auth = auth;\n}\nBaseManager.prototype.get = function (url, successCallback, errorCallback) {\n    this.ajax(url, {}, 'get', successCallback, errorCallback);\n}\nBaseManager.prototype.ajax = function (url, data, type, successCallback, errorCallback) {\n    let that = this;\n    $.ajax({\n        url: url,\n        method: type,\n        data: data,\n        beforeSend: function (req) {\n            req.setRequestHeader('Authorization', that.auth.authorizationToken);\n        }\n    })\n        .done(successCallback)\n        .fail(errorCallback);\n}\n----------- User -------\nUser.prototype.getUserById = function (id, successCallback, errorCallback) {\n    let url = this.baseApiUrl + '/user/' + id;\n    this.get(url, successCallback, errorCallback);\n}\n```\n\n### æ°¸è¿œçš„401\nç„¶åï¼Œ é—®é¢˜å‡ºç°äº†ï¼Œå°½ç®¡å‚æ•°æ˜¯å¦‚ä½•çš„å¯¹ï¼ŒChrome consoleä¸‹æ€»æ˜¯è¿”å›è®©äººå’¬ç‰™åˆ‡é½¿çš„å¤§çº¢è‰²401ï¼Œç”šè‡³æ–­ç‚¹éƒ½æ²¡æœ‰è¿›å…¥åˆ°passportçš„Jwt middlewareä¸‹ã€‚\n![image](https://images.troyyang.com/2017-06-05-401-error.PNG)\n\næ— æ•°æ¬¡çš„å°è¯•ï¼Œå…ˆæ˜¯æ€€ç–‘å®¢æˆ·ç«¯ajaxè°ƒç”¨æ²¡å¯¹ï¼Œç”šè‡³æ¬ç”¨æœ€åŸç”Ÿçš„ajaxæ–¹æ³•ï¼Œ ä¹Ÿæ€€ç–‘è¿‡æ˜¯æœåŠ¡ç«¯Jwt passportæ²¡å†™å¯¹ï¼Œæœ€åæ¯”è¾ƒhttpè¯·æ±‚å¤´çš„æ—¶å€™å‘ç°äº†ä¸€äº›é—®é¢˜ã€‚\n\nä½¿ç”¨Post manåœ¨nodeæœåŠ¡å™¨ç«¯å¾—åˆ°çš„requestæ˜¯è¿™æ ·çš„ï¼š\n\n![image](https://images.troyyang.com/2017-06-05-request-header-postman.PNG)\n\né€šè¿‡æµè§ˆå™¨ajaxè¯·æ±‚æ˜¯è¿™æ ·çš„ï¼š\n![image](https://images.troyyang.com/2017-06-05-request-header-browser.PNG)\n\næœ‰äººç»™æˆ‘æŠŠè¯·æ±‚å¤´ä¿¡æ¯æ›´æ”¹äº†ï¼Authorizationä¸è§äº†ï¼Œç”šè‡³è¿req.methodéƒ½å˜æˆäº†OPTIONSï¼Œè€Œä¸æ˜¯GETã€‚\n\n### ç½ªé­ç¥¸é¦–---é¢„æ£€(Pre-flight)\nç™¾æ€ä¸å¾—å…¶è§£ï¼ŒGoogleç›¸å…³å…³é”®è¯åï¼Œpre-flightæµ®å‡ºæ°´é¢ï¼Œåˆ°äº†è¿™æ­¥ï¼Œçªç„¶æƒ³èµ·é˜®ä¸€å³°çš„ã€Š[è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£](http://www.ruanyifeng.com/blog/2016/04/cors.html)ã€‹ï¼Œå½“æ—¶åªæ˜¯ç•¥è¯»ï¼Œå¤§æ¦‚äº†è§£CORSä¸­æœ‰ä¸¤ç§è¯·æ±‚ï¼šç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚ã€‚äºæ˜¯åˆç¿»å‡ºæ¥çœ‹äº†ä¸‹ï¼Œæ­¤æ—¶çš„æƒ…å†µæ­£æ˜¯å±äºéç®€å•è¯·æ±‚ï¼Œä¼šå‘é€ä¸¤æ¬¡çš„è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡å°±æ˜¯preflightï¼Œç”¨äºè¯·æ±‚éªŒè¯, ç¬¬äºŒæ¬¡æ‰æ˜¯ç”¨æˆ·çœŸæ­£éœ€è¦å‘é€çš„è¯·æ±‚ã€‚\n\nå¯¹äºPre-flightæƒå¨çš„è§£è¯»ï¼š [mozilla.org](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Preflighted_requests )\n\nå›åˆ°ä»£ç ä¸­ï¼Œä¸å·§ï¼Œæ¯æ¬¡æœåŠ¡ç«¯æ•æ‰åˆ°çš„å°±æ˜¯è¿™ä¸ªpreflightè¯·æ±‚ï¼Œç„¶ååšnextï¼Œå…¶ä¸­å°±åŒ…æ‹¬Jwt ä¸­é—´ä»¶ï¼Œè€Œå› ä¸ºè¯·æ±‚å¤´ä¸­æ²¡æœ‰Authorizationè¿™ä¸ªheaderï¼ŒJwtå°±è¿”å›äº†401ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨passportçš„JWTä¸­è‡ªåŠ¨æ£€æµ‹çš„ï¼Œè‡ªå·±å†™çš„JWTéªŒè¯éƒ¨åˆ†ç”šè‡³éƒ½æ²¡æœ‰æ‰§è¡Œåˆ°ï¼\n\n### è§£å†³åŠæ³•\nçœ‹äº†[express cors](https://github.com/expressjs/cors/blob/master/lib/index.js)æºç åï¼Œå…¶å®æŠŠè¯·æ±‚ç±»å‹OPTIONSåšä¸ªç®€å•çš„è¿‡æ»¤å°±å¥½å•¦ï¼ï¼ï¼\n\n```\n// Enable CORS from client-side\napp.use(function (req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\"Access-Control-Allow-Methods\", \"PUT, GET, POST, DELETE, OPTIONS\");\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials\");\n  res.header(\"Access-Control-Allow-Credentials\", \"true\");\n  if (req.method == \"OPTIONS\") {\n    res.send(200);\n  }\n  else {\n    next();\n  }\n});\n```\n\n### ç»“è¯­\nåˆæƒ³äº†ä¸€ä¸‹ä¸ºä»€ä¹ˆä¹‹å‰çš„é¡¹ç›®ä¸€ç›´æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®æ˜¯å› ä¸ºå¾ˆå¤šæ¡†æ¶ä»¥åŠå¸®æˆ‘ä»¬å®ç°å¥½äº†ï¼Œæ¯”å¦‚è¯´.NETä¸­çš„WebAPI, åœ¨åšéªŒè¯çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¸ç”¨å»è€ƒè™‘éœ€è¦æ•æ‰pre-flightè¯·æ±‚ï¼Œè€Œåœ¨expressä¸­ï¼Œç”šè‡³å¦‚æœæˆ‘å½“åˆç›´æ¥ä½¿ç”¨ä¸‰æ–¹åº“[express cors](https://github.com/expressjs/cors/blob/master/lib/index.js) ä¹Ÿå¯ä»¥é¿å…ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ï¼Œå› ä¸ºè¿™ç§å¶ç„¶ï¼Œæˆ‘ä»¬æ›´æœ‰æœºä¼šçœ‹å¾—æ›´æ¸…æ¥šè¿™äº›è¯·æ±‚çš„åé¢åˆ°åº•æ˜¯ä»€ä¹ˆã€‚\n\nçœ‹ä¼¼ç®€å•çš„é—®é¢˜ï¼Œå´åŒ…æ‹¬äº†å¾ˆå¤šéœ€è¦è‡ªå·±å»äº†è§£çš„ä¸œè¥¿ï¼Œå°¤å…¶æ˜¯httpå„ç§è¯·æ±‚å¤´çš„å«ä¹‰ï¼Œæ¯”å¦‚Content-type, Accept, ä»¥åŠå¯¹åº”ajaxåº”è¯¥ä¼ é€’çš„å‚æ•°ï¼Œæœ€åï¼Œå½“ç„¶è¿˜æœ‰ Pre-flight!\n","tags":["jwt"],"categories":["ç¬”è®°"]},{"title":"ç»™Githubè‡ªå®šä¹‰åŸŸååŠ ä¸ŠHTTPS","url":"/2017/05/21/Add_Free_Certification_In_Blog_Step_By_Step/","content":"***\n \n### å†™åœ¨å¼€å¤´\néšç€Httpsè¶Šæ¥è¶Šæˆä¸ºä¸€ç§è¶‹åŠ¿ï¼Œæœ€è¿‘ä¹Ÿç»™è‡ªå·±å®¶åšå®¢å¼„ä¸Šäº†é«˜å¤§ä¸Šçš„httpsï¼Œä¸»è¦æ˜¯ç»“åˆä½¿ç”¨çš„cloudflareå’Œä¸ƒç‰›äº‘ï¼ˆå›¾åºŠï¼‰ä½¿ç”¨ï¼Œå…³é”®æ˜¯å…è´¹ï¼æ‰€ä»¥æƒ³æŠŠè¿™ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œä¸‡ä¸€æœ‰äººç”¨å¾—åˆ°å‘¢ã€‚(è¿˜æƒ³æŠ½ç©ºå†™å†™å¯¹Httpsçš„åŸç†çš„ç†è§£ï¼Œä¸»è¦ç›®çš„è¿˜æ˜¯æ€»ç»“å‰æ®µæ—¶é—´è‡ªå·±å¯¹Httpsçš„å­¦ä¹ ã€‚)\n\n### Httpsæ—¶ä»£\n>According to Mozilla since January 2017 more than half of the Web traffic is encrypted. [wiki pedia](https://en.wikipedia.org/wiki/HTTPS) \n\nç»´åŸºç™¾ç§‘å‘Šè¯‰æˆ‘ä»¬ï¼Œè‡ªä»2017å¹´1æœˆï¼Œè¶…è¿‡ä¸€åŠçš„ç½‘ç»œè¯·æ±‚æ˜¯é€šè¿‡åŠ å¯†è¿‡åçš„ã€‚ç™¾åº¦ä¹Ÿå‘Šè¯‰ç«™é•¿ä»¬ï¼š\n> ä¸ºäº†ç»™ç”¨æˆ·æä¾›ä¸€ä¸ªå®‰å…¨å¯é çš„ç½‘ç»œç¯å¢ƒï¼Œç»§å¯ç”¨httpsåŠ å¯†ä¹‹åï¼Œç™¾åº¦æœç´¢å†æ¬¡é‡ç£…æ¨å‡ºï¼šå…¨é¢æ”¯æŒhttpsé¡µé¢ç›´æ¥æ”¶å½•ï¼›å¦å¤–ä»ç›¸å…³æ€§çš„è§’åº¦ï¼Œç™¾åº¦æœç´¢å¼•æ“è®¤ä¸ºæƒå€¼ç›¸åŒçš„ç«™ç‚¹ï¼Œé‡‡ç”¨httpsåè®®çš„é¡µé¢æ›´åŠ å®‰å…¨ï¼Œæ’åä¸Šä¼šä¼˜å…ˆå¯¹å¾…ã€‚[ç™¾åº¦ç«™é•¿](http://zhanzhang.baidu.com/wiki/392)\n\nGoogle ä»Šå¹´æ›´å‰å®³ï¼Œä»1æœˆä»½å¼€å§‹ï¼Œæ‰€æœ‰æ²¡æœ‰ç”¨Httpsçš„ç½‘ç«™ä¼šåœ¨Chromeæµè§ˆå™¨åœ°å€æ å‰é¢åŠ ä¸Šä¸å®‰å…¨çš„å›¾æ ‡ï¼š\n>Beginning in January 2017 (Chrome 56), weâ€™ll mark HTTP pages that collect passwords or credit cards as non-secure, as part of a long-term plan to mark all HTTP sites as non-secure. [Google](https://security.googleblog.com/2016/09/moving-towards-more-secure-web.html)\n\nç™¾åº¦2015å¹´å®ç°å…¨ç«™HTTPSï¼Œå¹¶ä¸”Googleå’Œç™¾åº¦éƒ½æ”¶å½•Httpsçš„ç½‘ç«™å¹¶ä¸”æé«˜å…¶æœç´¢æ’åï¼Œå›½å¤–å¤§å‹äº’è”ç½‘ç½‘ç«™åŸºæœ¬éƒ½ä½¿ç”¨httpsï¼Œæ‰€ä»¥ï¼Œæœ‰äººè¯´2017å¹´æ˜¯ä¸€ä¸ªHttpså¹´ã€‚é‚£æ—¢ç„¶å¦‚æ­¤ï¼Œé«˜å¤§ä¸Šçš„Httpsæˆ‘ä»¬æ™®é€šè€ç™¾å§“ç©å¾—èµ·å—ï¼Ÿè¦çŸ¥é“ï¼Œä¸€èˆ¬çš„Httpsè¯ä¹¦åŠ¨è¾„ä¹Ÿæ˜¯å‡ åƒå—ä¸€å¹´ï¼\n\n### å¤©ä¸Šæ‰ä¸‹ä¸ªè¯ä¹¦\næ²¡é”™ï¼ŒCloudflareå…è´¹æä¾›ç»™è¯ä¹¦ï¼Œå°½ç®¡ä½ æ²¡æœ‰è‡ªå·±çš„æœåŠ¡å™¨ã€‚Cloudflareæ˜¯ä¸€ä¸ªç›¸å½“å‰å®³çš„DNSæœåŠ¡å•†å’ŒCDNæä¾›å•†ï¼Œæä¾›å„ç§å®‰å…¨é˜²èŒƒè§£å†³æ–¹æ¡ˆï¼Œå…¨ä¸–ç•Œå„åœ°éƒ½æœ‰ä»–çš„èŠ‚ç‚¹ï¼Œå¯¹äºå›½å†…ï¼Œç™¾åº¦é€‰æ‹©å’Œä»–ä¸€èµ·åˆä½œå°±æ˜¯ä¸ªå¾ˆå¥½çš„æ —å­ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå›½å†…è§£æé€Ÿåº¦ã€‚æ‰€ä»¥æˆ‘å‡†å¤‡æŠŠä¸»ç«™çš„è¯ä¹¦ä½¿ç”¨Cloudflareæä¾›çš„ã€‚\n\nå†ä¸€ä¸ªå°±æ˜¯ä¸ƒç‰›äº‘ï¼Œä½œä¸ºåšå®¢ï¼Œä¸å¯èƒ½æŠŠæ–‡ç« å›¾ç‰‡å…¨éƒ½æ”¾githubä¸Šï¼Œæ‰€ä»¥æœ€å¥½è¿˜æ˜¯è¦æœ‰è‡ªå·±çš„å›¾åºŠï¼Œä½†æ˜¯å¥½å¤šå›¾ç‰‡åºŠéƒ½æ˜¯ä¸æ”¯æŒhttpsçš„ï¼Œå¥½åœ¨ä¸ƒç‰›å¯ä»¥å…è´¹ç”³è¯·è¯ä¹¦ã€‚æ‰€ä»¥è¿™æ˜¯ç¬¬äºŒä¸ªè¯ä¹¦ã€‚\n\n### å‡†å¤‡\nå› ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹æš‚æ—¶æ˜¯æ‰˜ç®¡åˆ°githubä¸Šçš„ï¼Œä¸æ˜¯è‡ªå·±çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ä½¿ç”¨[Let's encrypt](https://letsencrypt.org/)åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆå…è´¹çš„è¯ä¹¦ï¼Œä½†å¥½åœ¨ä¸€åˆ‡éƒ½æœ‰cloudflare!\n\n- ~~æœ‰ä¸€ä¸ªè‡ªå·±çš„åŸŸå~~ï¼ˆåºŸè¯ï¼‰\n- è‡ªå·±çš„Githubåšå®¢åœ°å€ (ä¸€èˆ¬éƒ½æ˜¯https://[username].github.io)\n- æ³¨å†ŒCloudflare\n- æ³¨å†Œä¸ƒç‰›äº‘ ï¼ˆå¦‚æœæœ‰è‡ªå·±çš„å›¾ç‰‡åºŠï¼Œå¹¶æ”¯æŒhttps, å¯çœå»ï¼‰\n\nCloudflareï¼Œä¸»è¦ç”¨äºåŸŸåè§£æï¼Œè¿™æ˜¯æˆåŠŸçš„å…³é”®ï¼åªæœ‰åœ¨ä»–é‚£é‡ŒåŸŸåè§£æï¼Œä»–æ‰èƒ½ä¸ºæˆ‘ä»¬æä¾›å¤šç§è¯ä¹¦æœåŠ¡ã€‚\n\n### å¼€å§‹ç¬¬ä¸€æ­¥: Github è‡ªå®šä¹‰åŸŸå\næˆ‘ä»¬çŸ¥é“Githubå¯ä»¥æ‰˜ç®¡å¼€æºå’Œç§è‡ªé¡¹ç›®(ç§æœ‰æ”¶è´¹)ï¼ŒåŒæ ·ï¼ŒåŠŸèƒ½å¼ºå¤§çš„Githubä¹Ÿå¯ä»¥æä¾›é™æ€é¡µé¢ç«™ç‚¹ï¼Œé»˜è®¤ç«™ç‚¹æ˜¯ **https://[username].github.io** ï¼Œå¯¹åº”çš„ç«™ç‚¹ä»£ç æ˜¯åœ¨reponsitoryåä¸º[username].github.io ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·åˆ›å»ºè‡ªå·±çš„é»˜è®¤repositoryï¼Œå¯å‚è€ƒå®˜æ–¹[è¯´æ˜](https://pages.github.com/)\n\n![image](https://images.troyyang.com/2017-5-21-https-github-home.png)\nåˆ›å»ºæˆåŠŸåï¼Œæˆ‘ä»¬å°±æˆåŠŸçš„åˆ›å»ºäº†è‡ªå·±çš„ä¸ªäººç«™ç‚¹: https://troyyang.github.io æ˜¾ç„¶è¿™è¿˜ä¸æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆç›®çš„ã€‚\n\næ¥ä¸‹æ¥ï¼Œæ‰“å¼€è¿™ä¸ªrepository, å®šä½åˆ°repo settingï¼Œç»‘å®šè‡ªå·±çš„åŸŸåï¼Œç»‘å®šå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°repoä»£ç ä¸‹æ–°åŠ äº†ä¸€ä¸ªCNAMEçš„æ–‡ä»¶ï¼Œæ¢å¥è¯è¯´ï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨repoä¸­ç›´æ¥æ·»åŠ è¿™ä¸ªæ–‡ä»¶å³å¯ï¼Œè€Œä¸éœ€è¦åœ¨settingä¸­å»æ‰‹åŠ¨è®¾ç½®ï¼Œè¿™ä¸ªåœ¨æˆ‘ä»¬é™æ€ç«™ç‚¹å‘å¸ƒçš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæ¯æ¬¡å‘å¸ƒåæäº¤éƒ½ä¼šåˆ é™¤åŸæœ‰çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥åœ¨ç”Ÿæˆçš„æ–‡ä»¶ä¸­é»˜è®¤åŠ ä¸Šè¿™ä¸ªæ–‡ä»¶ã€‚\n\n![image](https://images.troyyang.com/2017-5-21-https-github-home-customdomain.png)\n\nCNAME\n```\ntroyyang.com\n```\n\n### ç¬¬äºŒæ­¥ï¼šä½¿ç”¨Cloudflareè§£æåŸŸå\n#### ä¿®æ”¹é»˜è®¤DNSæœåŠ¡å™¨\nåœ¨ä½¿ç”¨Cloudflareä¹‹å‰ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ä¸‡ç½‘ï¼ˆç°åœ¨æ˜¯é˜¿é‡Œäº‘ï¼‰çš„é»˜è®¤DNSæœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯\n```\ndns9.hichina.com\ndns10.hichina.com\n```\nç°åœ¨ä¿®æ”¹ä¸ºCloudflare\n```\napollo.ns.cloudflare.com\nmary.ns.cloudflare.com\n```\nä¸ªäººè§‰å¾—cloudflareä½œä¸ºDNSæœåŠ¡å™¨ç‰¹åˆ«å¿«ï¼Œä¿®æ”¹äº†ä»»ä½•Aè®°å½•æˆ–è€…å…¶ä»–è®°å½•ä¼šé©¬ä¸Šç”Ÿæ•ˆï¼Œä¸ç”¨å†ç­‰å¾…å‡ ä¸ªå°æ—¶ã€‚\n#### åŸŸåè§£æ\nç™»å½•cloudflare, å°†åŸŸåAè®°å½•æŒ‡å‘GithubæœåŠ¡å™¨åœ°å€(åŒæ—¶ä¹Ÿå¯æŒ‡å®šCNAMEè®°å½•å»åŠ ä¸Šwww)ï¼Œç»‘å®šå®Œæˆå‡ åˆ†é’Ÿåè®¿é—®troyyang.comæˆ–è€…www.troyyang.com å°±å¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬Githubä¸Šé‚£ä¸ªé»˜è®¤çš„repoé™æ€ç«™ç‚¹ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥å°è¯•å»è®¿é—®https://troyyang.com ç†è®ºä¸Šæ˜¯ä¸ä¼šæˆåŠŸçš„ï¼Œå“ˆå“ˆã€‚\n![image](https://images.troyyang.com/2017-5-21-dns-cloudflare.png)\n\n### ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨Cloudflareçš„ Universal SSL è¯ä¹¦\nåœ¨Cloudflareç®¡ç†é¡µé¢ï¼Œå¯¼èˆªåˆ°Cryptoï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°SSLåœ¨Cloudflareä¸Šä½¿ç”¨è¯ä¹¦æœ‰ä¸‰ç§æ–¹å¼: Flexibleã€Fullã€Full Strictï¼Œ\n- Flexible SSL: åœ¨è®¿å®¢ä¸Cloudflareä¹‹é—´æ˜¯åŠ å¯†çš„ï¼Œä»Cloudflareåˆ°è‡ªå·±æœåŠ¡å™¨æ˜¯ä¸åŠ å¯†çš„ï¼Œæ‰€ä»¥\n1. ä½ ä¸éœ€è¦åœ¨ç«™ç‚¹æœåŠ¡å™¨ä¸Šå®‰è£…ä»»ä½•è¯ä¹¦ã€‚\n2. è®¿å®¢å¯ä»¥åœ¨æµè§ˆå™¨åœ°å€æ ä¸Šçœ‹åˆ°åŠ å¯†çš„å›¾æ ‡ã€‚ï¼ˆè¯ä¹¦ç­¾åæ¥è‡ªCloudflareï¼‰\n- Full SSL: ä»è®¿å®¢åˆ°Cloudflare, ä»Cloudflareåˆ°ç«™ç‚¹æœåŠ¡å™¨éƒ½æ˜¯åŠ å¯†çš„ã€‚Full å’Œ Full (Strict)ä¸åŒä¹‹å¤„åœ¨äºFull Strictä¼šå»éªŒè¯ä½ æœåŠ¡å™¨ä¸Šçš„è¯ä¹¦æ˜¯å¦åˆæ³•ï¼Œè€ŒFullä¸ä¼šéªŒè¯ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ä½ æœåŠ¡å™¨ä¸Šå®‰è£…ä»»ä½•è¯ä¹¦ï¼ŒåŒ…æ‹¬è‡ªç­¾åè¯ä¹¦ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å½“ç„¶\n1. è®¿å®¢å¯ä»¥åœ¨æµè§ˆå™¨åœ°å€æ ä¸Šçœ‹åˆ°åŠ å¯†çš„å›¾æ ‡ã€‚ï¼ˆè¯ä¹¦ç­¾åæ¥è‡ªCloudflareï¼‰\n- Full SSL (strict): ä»è®¿å®¢åˆ°Cloudflare, ä»Cloudflareåˆ°ç«™ç‚¹æœåŠ¡å™¨éƒ½æ˜¯åŠ å¯†çš„ã€‚ä½ å¿…é¡»åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šå®‰è£…æœ‰å¯ä¿¡èµ–çš„CAè¯ä¹¦ï¼Œè¿™ä¸ªè¯ä¹¦å¿…é¡»æ˜¯æœªè¿‡æœŸï¼ŒåŒ…å«æœ‰åŸŸåç­‰ä¿¡æ¯çš„ã€‚åŒæ ·\n1. è®¿å®¢å¯ä»¥åœ¨æµè§ˆå™¨åœ°å€æ ä¸Šçœ‹åˆ°åŠ å¯†çš„å›¾æ ‡ã€‚ï¼ˆè¯ä¹¦ç­¾åæ¥è‡ªè‡ªå·±ç”³è¯·çš„CAï¼‰\n\nä¸‰ç§æ¨¡å¼å¦‚å›¾\n![image](https://images.troyyang.com/2017-5-21-cloudflare-ssl.png)\n\nå½“ç„¶ï¼Œæˆ‘ä»¬é€‰æ‹©Flexibleï¼Œé€‰æ‹©åæˆ‘ä»¬è¿˜éœ€è¦åœ¨ä¸‹é¢çš„Edge Certificatesæ ç›®ä¸­æ–°å¢Universal SSL è¯ä¹¦ï¼ˆå½“åˆä»¥ä¸ºé€‰æ‹©Flexibleåå°±ç­‰å¾…24å°æ—¶æ¿€æ´»å°±å®Œäº†ï¼Œå¯å‡ å¤©è¿‡å»äº†çŠ¶æ€ä¸€ç›´å¤„äºinitilizing certification, é—®äº†å®¢æœåï¼Œå®¢æœå¸®æˆ‘åŠ ä¸Šè¿™ä¸ªUniversal SSLè¯ä¹¦å°±å¥½äº†ï¼Œç»™ä»–ä»¬å®¢æœèµä¸€ä¸ªï¼‰\n\nåœ¨Edge Certificatesä¸­ï¼Œç‚¹å‡»Order SSL CertificateæŒ‰é’®ï¼Œå¼¹å‡ºå‡ ç§è¯ä¹¦ï¼Œæˆ‘ä»¬å½“ç„¶é€‰æ‹©å…è´¹çš„é‚£ä¸ª, ç„¶åå¡«å†™è¯ä¹¦æœåŠ¡çš„åŸŸåtroyyang.comå’Œ*.troyyang.com.\n\n![image](https://images.troyyang.com/2017-5-21-cloudflare-universal-ssl.png)\n\nä¸€æ­¥ä¸€æ­¥å®Œæˆåå°±ç­‰å¾…äº†ï¼Œä¸€èˆ¬æƒ…å†µä¸ä¼šè¶…è¿‡24å°æ—¶å°±ä¼šç”Ÿæ•ˆï¼Œæ¿€æ´»åå°±å¦‚ä¸‹å›¾ï¼ˆæˆ‘ä¸ªäººé€‰çš„æ˜¯Fullï¼‰ï¼Œç„¶åå°±å¯ä»¥å°½æƒ…çš„è®¿é—® https://troyyang.com\n\n![image](https://images.troyyang.com/2017-5-21-cloudflare-universal-ssl-success.png)\n\nå¦‚ä½•ä½ æŸ¥çœ‹åŸŸåè¯ä¹¦ï¼Œç»†å¿ƒçš„ä½ é™¤äº†çœ‹åˆ°Cloudflareç­¾å‘çš„è¯ä¹¦å¤–ï¼Œè¿˜æœ‰è¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰åŠå¹´ï¼Œè¿™ä¸ªä¸ç”¨æ‹…å¿ƒè¿‡æœŸï¼Œå®¢æœå°å“¥å›å¤è¯´ä»–ä»¬ä¼šåœ¨å¿«è¿‡æœŸæ—¶è‡ªåŠ¨å»¶æœŸçš„ã€‚\n\n![image](https://images.troyyang.com/2017-5-21-cloudflare-ssl-troyyang.png)\n\n### ä¸ƒç‰›å›¾åºŠHttpsæ”¯æŒ\nCloudflareå®¢æœå°å“¥åœ¨å¸®æˆ‘åŠ å¥½Universal SSLè¯ä¹¦åï¼Œå›å¤æˆ‘è¯´ä½ ç½‘ç«™è¿˜åŒ…æ‹¬éhttpsçš„å†…å®¹ä¹Ÿå°±å¯¼è‡´æ‰€è°“çš„mixed-content é—®é¢˜ï¼Œä¹Ÿå°±å¯¼è‡´æˆ‘å½“æ—¶åœ¨åœ°å€æ è¿˜çœ‹ä¸åˆ°é‚£ä¸ªhttpså›¾æ ‡ï¼Œè¿™ä¸ªæ˜¯æˆ‘èƒ½æƒ³åˆ°çš„ï¼Œå› ä¸ºæˆ‘çŸ¥é“æˆ‘çš„å›¾ç‰‡è¿˜éƒ½ä¸æ˜¯httpsï¼Œå› ä¸ºå›¾ç‰‡å­˜æ”¾åœ¨ä¸ƒç‰›äº‘ä¸Šçš„ï¼Œèµ¶ç´§å›å»çœ‹çœ‹ä¸ƒç‰›æ˜¯æ€ä¹ˆæ”¯æŒhttpsï¼Œäºæ˜¯åœ¨è¸©äº†æ— æ•°å‘è¿‡åç»ˆäºè®©å›¾ç‰‡æ”¯æŒä¸Šäº†ã€‚\n\n#### ç¬¬ä¸€æ­¥ï¼š åœ¨ä¸ƒç‰›ä¸Šä½¿ç”¨è‡ªå®šä¹‰åŸŸå (images.troyyang.com)\nè¦ä½¿ç”¨httpså›¾åºŠï¼Œå¿…é¡»å¾—ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯images.troyyang.comï¼‰ï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œå¯ä»¥å‚è€ƒ[é¡µé¢](https://developer.qiniu.com/fusion/manual/1367/custom-domain-name-binding-process)ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä¸é€‰æ‹©httpsæ¨¡å¼ï¼Œè®©æ­£å¸¸httpå…ˆå·¥ä½œã€‚ä¸»è¦å·¥ä½œå°±æ˜¯åœ¨Cloudflareä¸Šæ–°å¢ä¸€ä¸ªCNAMEè®°å½•æŒ‡å‘ä¸ƒç‰›ä¸ºè‡ªå·±åŸŸåç”Ÿæˆçš„åŸŸååœ°å€å°±å¥½äº†ã€‚ä¸€åˆ‡æ­£å¸¸åï¼Œæˆ‘ä»¬åº”è¯¥å¯ä»¥è®¿é—®ä»»æ„å›¾ç‰‡æ¯”å¦‚http://images.troyyang.com/2017-05-01-hexo-2015-wordpress.jpg\n\nè¦ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œåœ¨ä¸ƒç‰›ä¸Šï¼Œä½ å¿…é¡»ç­‰å¾€è´¦å·é‡Œå……è‡³å°‘10å…ƒï¼Œè®©è‡ªå·±æˆä¸ºæ ‡å‡†ç”¨æˆ·ï¼Œ\n\n#### ç¬¬äºŒæ­¥ï¼š ç»™è‡ªå®šä¹‰åŸŸååŠ ä¸Šhttpsæ”¯æŒ\nç°åœ¨è¦ç»™è‡ªå·±çš„è‡ªå®šä¹‰å›¾ç‰‡åŸŸååŠ ä¸Šhttpsæ”¯æŒï¼Œåœ¨ä¸ƒç‰›ä¸Šæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¸Šä¼ è‡ªå·±å·²æœ‰çš„è¯ä¹¦ï¼Œç¬¬äºŒç§æ˜¯ç”³è¯·å…è´¹è¯ä¹¦æˆ–è€…è´­ä¹°è¯ä¹¦ã€‚å¯¹äºç¬¬ä¸€ç§ï¼Œé™¤äº†ä¸Šä¼ è‡ªå·±çš„è¯ä¹¦å…¬é’¥ä»¥å¤–ï¼Œè¿˜éœ€è¦ç§é’¥ä¹Ÿä¸€åŒä¸Šä¼ ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯é€‰æ‹©çš„ç¬¬äºŒç§ï¼Œåæ­£ä¹Ÿåªæ˜¯ä¸€ä¸ªäºŒçº§åŸŸåçš„è¯ä¹¦ï¼Œä¹Ÿå¹¶ä¸å­˜åœ¨ä»»ä½•ç§å¯†æ€§çš„ä¸œè¥¿ã€‚\n\nåœ¨ä¸ƒç‰›ç®¡ç†é¡µé¢ï¼Œåœ¨è¯ä¹¦é¡µé¢é€‰æ‹©è´­ä¹°è¯ä¹¦ï¼Œç„¶åé€‰æ‹©TrustAsiaçš„DVé™å…æ€§ï¼Œæœ€å…³é”®çš„å°±æ˜¯DNSçš„TXTéªŒè¯äº†ï¼ˆ[éªŒè¯æŒ‡å—](https://developer.qiniu.com/fusion/manual/1703/qiniu-free-certificate)ï¼‰ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨ä½¿ç”¨äº†ä¸‰æ¬¡ç”³è¯·åæ‰å¼„æ˜ç™½ç”³è¯·å¤±è´¥åŸå› : Githubä¸Šé»˜è®¤ä¼šè§£æå‡ºä¸¤ä¸ªIPåœ°å€\n\n![image](https://images.troyyang.com/2017-5-21-qiniu-dig.png)\n\nè§£å†³æ–¹æ¡ˆå°±æ˜¯ï¼Œåœ¨Cloudflareä¸Šå…ˆåˆ é™¤æ‰€æœ‰Aè®°å½•ï¼ŒCNAMEè®°å½•ï¼Œå…ˆæ·»åŠ ä¸Šç”¨ä½œåŸŸåéªŒè¯çš„Txtè®°å½•ï¼Œç­‰è¯ä¹¦ç”³è¯·æˆåŠŸåï¼ˆå¤§çº¦åå‡ åˆ†é’Ÿï¼‰ï¼Œåœ¨æ¢å¤Aè®°å½•ï¼ŒCNAMEè®°å½•ã€‚è¿™ä¸ªæ˜¯æˆ‘Cloudflareä¸Šçš„ç›¸å…³è§£ææœ€ç»ˆæ ·å­\n![image](https://images.troyyang.com/2017-5-21-cloudflare-dns-all.png)\n\næœ‰ä¸€ç‚¹éœ€è¦è¯´æ˜çš„æ˜¯åœ¨ä¸ƒç‰›ä¸Šå¦‚æœåªä½¿ç”¨httpçš„è¯ï¼Œåªè¦ä¸€ä¸ªæœˆä¸è¶…è¿‡20Gæµé‡ï¼Œæ˜¯ä¸ä¼šæ”¶è´¹çš„ï¼Œä½†æ˜¯httpsæ˜¯ä¸åœ¨å…è´¹é¢åº¦é‡Œé¢çš„ã€‚ \n\n\n\n","tags":["github"],"categories":["security"]},{"title":"ã€ŠCSSè®¾è®¡æŒ‡å—ã€‹ç¬”è®°","url":"/2017/04/20/Learn_Stylin_With_Css/","content":"## é€‰æ‹©å™¨\n- å­å…ƒç´  > :  ç”¨äºé€‰æ‹©æ‰€æœ‰ç»™å®šå­å…ƒç´ ï¼Œå¦‚ .food>li\n- åä»£å…ƒç´ ï¼š ç”¨äºé€‰æ‹©æ‰€æœ‰å­ä»£å’Œåä»£å…ƒç´ ï¼Œå¦‚ .food li\n- å­-æ˜Ÿ > *ï¼šç”¨äºé€‰æ‹©æ‰€æœ‰ç›´æ¥å­å…ƒç´ ï¼Œè€Œä¸åŒ…æ‹¬åä»£å…ƒç´ . æ³¨æ„ï¼šåœ¨ä¸ºå­å…ƒç´ è®¾å®šå‚ç›´å¤–è¾¹è·æ—¶ï¼Œåªèƒ½ä½¿ç”¨ margin-top å’Œ margin-bottomï¼Œä¸èƒ½ä½¿ç”¨ç®€å†™çš„ marginï¼Œå¦åˆ™ä¼šæŠµæ¶ˆç”¨â€œå­-æ˜Ÿé€‰æ‹©ç¬¦â€åº”ç”¨ç»™è¿™äº›å…ƒç´  çš„æ°´å¹³å¤–è¾¹è·ï¼Œå¦‚æœä½ æƒ³è¿›ä¸€æ­¥ç¼©è¿›æŸä¸ªå­å…ƒç´ çš„å†…å®¹ï¼Œå°±åº”è¯¥ç»™è¯¥å­å…ƒç´ åº”ç”¨å†…è¾¹è·å¦‚è®©å­å…ƒç´ ä¸æ è¾¹ç•Œä¿æŒä¸€å®šè·ç¦»\n```\narticle > * {margin:0 20px;}\n```\n- éé¦–ä½å­å…ƒç´  + : è¿™ä¸ªé€‰æ‹©ç¬¦ä¼šé€‰æ‹©é™¤ç¬¬ä¸€ä¸ªä¹‹å¤–çš„æ‰€æœ‰æŒ‡å®šå…ƒ ç´ ï¼Œå¦‚\n```\n.list1 li + li {border-top:1px solid #f00;} \n```\n\n## ç›’å­æ¨¡å‹\n- box-sizing:border-box å¯ç”¨äºé¿å…æ”¹å˜å†…è¾¹è·ï¼ˆè¾¹æ¡†ï¼‰æ—¶å¯¼è‡´æ•´ä¸ªç›’å­å°ºå¯¸å˜åŒ–(widthæ­¤æ—¶åªæ˜¯ä»£è¡¨å†…å®¹çš„å®½åº¦)ï¼Œ\n- .Inner å¦ä¸€ç§è§£å†³ç›’å­å°ºå¯¸å˜åŒ–çš„æ–¹å¼å°±æ˜¯åœ¨å…¶å†…éƒ¨å†åŒ…ä¸€å±‚ç›’å­\n\n## å¸ƒå±€\n- ä½¿ç”¨table-cell å¸ƒå±€(css3)\n```\nnav {display:table-cell; width:150px; padding:10px;      background:#dcd9c0;} \narticle {display:table-cell; padding:10px 20px;      background:#ffed53;} \naside {display:table-cell; width:210px; padding:10px;      background:#3f7ccf;} \n```\n\n## Display\n- å°†è¡Œå†…å…ƒç´ æ”¹ä¸ºå—çº§å…ƒç´ å®ç°æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å¤§\nå¦‚ï¼Œå¯¼èˆªæ ä¸­æ–‡æœ¬\n```\n.list1 a {display:block; padding:3px 10px; textdecoration:           none; font:20px Exo, helvetica, arial, sansserif; \n```\n\n## font\n- å¸¸ç”¨é¢œè‰²\n![image](https://images.troyyang.com/2017-6-1-regular-colors.PNG)\n\n## background-clip\nå€ŸåŠ©[background-clip](https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip/)å¯ä»¥å®ç°ç±»ä¼¼å¤–è¾¹è·åˆ†å‰²æ•ˆæœï¼Œå¦‚\n```\n.multi-drop-menu ul {\n    float: left;\n}\n\n.multi-drop-menu li {\n    float: left;\n    list-style-type: none;\n}\n.multi-drop-menu a {\n    display: block;\n    color: #555;\n    background-color: #eee;\n    padding: .2em 1em;\n    border-width: 3px;\n    border-color: transparent;\n}\n.multi-drop-menu li a {\n    display: block;\n    border-right-style: solid;\n    background-clip: padding-box;\n    text-decoration: none;\n}\n\n<nav class=\"multi-drop-menu vertical\">\n\t<ul>\n        <li><a href=\"#\">Shirts</a></li>\n        <li><a href=\"#\">Pants</a></li>\n        <li><a href=\"#\">Dresses</a></li>\n        <li><a href=\"#\">Shoes</a></li>\n    </ul>\n</nav>\n```\nç±»ä¼¼çš„ç”¨é€”å¦‚facebookçš„å¼¹å‡ºæ¡†\n\n![image](https://www.w3cplus.com/sites/default/files/facebook-effects.jpg)\n> ä½¿ç”¨background-clipæŠŠå…ƒç´ èƒŒæ™¯æ§åˆ¶åœ¨paddingæˆ–contentåŒºåŸŸå†…ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåªéœ€ä¸€ä¸ªéå¸¸divï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªdivä¸ŠåŠ ä¸Šé€æ˜è¾¹æ¡†ï¼Œå¹¶é…åˆbackground-clipæŠŠèƒŒæ™¯è¶…è¿‡paddingæˆ–contentçš„è¾¹ç¼˜å¤–çš„èƒŒæ™¯è‰²ç›´æ¥è£å‰ªæ‰è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚\nå•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒ,éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\nåŸæ–‡: http://www.w3cplus.com/content/css3-background-clip Â© w3cplus.com\n","tags":["css"],"categories":["ç¬”è®°"]},{"title":"å°ç±³è·¯ç”±å™¨ å®‰è£… Shadowsocks å®¢æˆ·ç«¯","url":"/2017/04/16/XiaoMi_Router_Install_Shadowsocks/","content":"\n### å‰å› \nå½“ç„¶æ˜¯ä¸ºäº†çœå»å¤šä¸ªç»ˆç«¯è¿æ¥çš„çƒ¦æ¼ï¼Œè€Œæˆ‘çš„ç›´æ¥åŸå› ç¡®æ˜¯ä¸ºäº†Googleç¥å™¨Chromecastèƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆå°±å•å•æ˜¯ç”µè§†æŠ•å°„åŠŸèƒ½å°±è¶³ä»¥è®©æˆ‘å¿ƒåŠ¨ï¼‰ã€‚å¤§åŠå¹´å‰åœ¨ç¾å›½ä¹°äº†ä¸€ä¸ªChromecastï¼Œåœ¨ç¾å›½çš„æ—¶å€™å·¥ä½œçš„å¥½å¥½çš„ï¼Œå›å›½åç¡®æ€ä¹ˆä¹ŸæŠ•å°„ä¸äº†ï¼Œæ€»æ˜¯æ‰¾ä¸åˆ°è®¾å¤‡ï¼Œå¤§æ¦‚çŒœåˆ°æ˜¯å› ä¸ºè¢«å¢™çš„åŸå› ï¼Œå¯æƒœç”µè„‘æŒ‚èµ·äº†VPNè¿˜æ˜¯ä¸è¡Œï¼Œåæ¥æ‰çŸ¥é“æ˜¯ç”µè§†ä¹Ÿéœ€è¦è¿æ¥Google æœåŠ¡ï¼å‘çˆ¹å•Šï¼ç„¶åå°±ä¸€ç›´é™é™çš„æ”¾ç€æ”¾ç€ç›´åˆ°è¿™æ¬¡ä¹°äº†ä¸ªæœåŠ¡å™¨(ä¹Ÿæ˜¯ä¸ºäº†ç§‘å­¦ä¸Šç½‘)åï¼Œæƒ³è¯•è¯•è®©è·¯ç”±å™¨ç›´æ¥è¿Shadowsocksã€‚\n### å‡†å¤‡\n- ä¸€å°è¿è¡Œç€Shadowsocksï¼Œå¹¶ä¸”èƒ½è®¿é—®å¤–ç½‘çš„æœåŠ¡å™¨\n- ä¸€å°å°ç±³MINIè·¯ç”±å™¨ï¼ˆå…¶ä»–çš„ä¹Ÿè¡Œï¼‰\n- ä¸€å°è£…è½½äº†linuxè¿œç¨‹è¿æ¥å®¢æˆ·ç«¯çš„ç”µè„‘(XShellæˆ–è€…Putty)\n\n### ç¬¬ä¸€æ­¥ï¼šå¼€å¯è·¯ç”±å™¨SSH\næˆ‘çš„æ˜¯å°ç±³MINIè·¯ç”±å™¨ï¼Œå› ä¸ºé»˜è®¤æ˜¯ç¨³å®šç‰ˆè€Œä¸æ˜¯å¼€å‘ç‰ˆï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥å°±æ˜¯å‡çº§ï¼ˆä¹Ÿå¯èƒ½æ˜¯é™çº§ï¼‰åˆ°å¼€å‘ç‰ˆå»å¼€å¯SSHï¼Œå…·ä½“æ­¥éª¤åœ¨[è¿™é‡Œ](http://jingyan.baidu.com/article/624e7459ae65e834e8ba5afd.html)æˆ–è€… [è¿™é‡Œ](http://bbs.xiaomi.cn/t-10044297)\n> å‡çº§å‰å¯ä»¥å…ˆå¤‡ä»½è·¯ç”±ä¿¡æ¯\n\n### ç¬¬äºŒæ­¥ï¼šè¿æ¥åˆ°è·¯ç”±å™¨\nå‡çº§å®Œæˆåï¼Œä½¿ç”¨åœ¨å°ç±³å®˜ç½‘ç»™å‡ºå½“å‰å°ç±³è´¦å·çš„rootè´¦å·å¯†ç ä¾¿å¯ä»¥ç™»å½•è·¯ç”±å™¨ç³»ç»ŸXIAO QIANG, å®è´¨ä¹Ÿæ˜¯linuxç³»ç»Ÿçš„ä¸€ä¸ªdistributionï¼ŒæŸ¥è¯¢åå¾—çŸ¥äº‹å®ä¸Šç”Ÿæ´»ä¸­å¾ˆå¤šå°çš„ç¡¬ä»¶è®¾å¤‡éƒ½æ˜¯æ­è½½çš„linuxç³»ç»Ÿï¼Œå› ä¸ºå…¶å¼€é”€å®åœ¨å¤ªå°å•¦\n![image]https://images.troyyang.com/2017-04-15-LoginXiaoMiRouter.PNG)\n\næŸ¥è¯¢å½“å‰è·¯ç”±å™¨ç³»ç»Ÿä¿¡æ¯\n\n```\nuname -a\n/// Linux XiaoQiang 2.6.36 #1 MiWiFi-R1CM-2.15.75 Thu Apr 13 17:10:07 CST 2017 mips GNU/Li\n```\n\n### ç¬¬ä¸‰éƒ¨ï¼šå®‰è£…Shadowsocks\nåŸæœ¬ä»¥ä¸ºè¿™ä¸ªshadowsockså®¢æˆ·ç«¯å…¶å®å°±æ˜¯githubä¸Šçš„é‚£ä¸ªLinux Shadowsocks, ç„¶åä¼¼ä¹å¹¶ä¸æ˜¯ï¼Œåªèƒ½çŒœæµ‹é’ˆå¯¹å½“å‰è·¯ç”±å™¨åˆåšè¿‡ä¸€æ¬¡åŒ…è£…, ç„¶åå°±å‘ç°äº†è¿™ä¹ˆä¸€ä¸ªå®è—ä¸€é”®å®‰è£…è„šæœ¬ï¼š[http://d.ukoi.net/Miwifi/](http://d.ukoi.net/Miwifi/) \n\nä¹Ÿä¸çŸ¥é“ä½œè€…æ˜¯è°ï¼Œåªèƒ½çŒœæµ‹æ˜¯å¯¹å°ç±³è·¯ç”±å™¨ç³»ç»Ÿå¾ˆäº†è§£çš„äººï¼Œæ‰€ä»¥æ ¹æ®è¿™äº›å®‰è£…è„šæœ¬ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€æ­¥ä¸€æ­¥èµ°å‘ä¸–ç•Œï¼ä¹‹å‰è¯•è¿‡å¾ˆå¤šå°ç±³è®ºå›ä¸Šçš„è„šæœ¬ï¼Œå¯æƒœåŸºæœ¬éƒ½æ˜¯ä¸èƒ½ä¸‹è½½çš„ï¼Œæ‰€ä»¥å¾ˆæ„Ÿæ¿€è¿™ä½ä½œè€…ã€‚\n\nè¿è¡Œä¸‹é¢çš„è„šæœ¬:\n> å¯ä»¥æ ¹æ®ä¸åŒçš„å°ç±³è·¯ç”±å™¨ç‰ˆæœ¬é€‰æ‹©ä¸åŒçš„è„šæœ¬ï¼Œæ›´æ”¹ç›¸åº”çš„éƒ¨åˆ†\n\n```\n// userdiskç›®å½•ä¸‹çš„æ–‡ä»¶ä¸ä¼šè¢«ç³»ç»Ÿreset\ncd /userdisk\n// ä¸‹è½½\nwget http://d.ukoi.net/Miwifi/MINI/mini_install.sh\n// å¯¹æ–‡ä»¶èµ‹æƒé™\nchmod +x mini_install.sh\n// å®‰è£…\nsh mini_install.sh\n```\n\nä¹‹åå°±æ˜¯æŒ‰ç…§è¾“å…¥è¦æ±‚è¾“å…¥å®¢æˆ·ç«¯è¿æ¥çš„ä¸€äº›å‚æ•°ï¼Œå®Œæˆåä¸å‡ºæ„å¤–åŸºæœ¬æ²¡é—®é¢˜å•¦ï¼Œå®¶é‡Œé¢æ‰€æœ‰wifiè¦†ç›–çš„åœ°æ–¹éƒ½èƒ½æ„‰å¿«çš„ç§‘å­¦ä¸Šç½‘ï¼Œå½“ç„¶æœ€é‡è¦çš„å°±æ˜¯æˆ‘çš„ç”µè§†ä¹Ÿèƒ½æŠ•å°„å•¦ã€‚ã€‚ã€‚ã€‚\n\nè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯è¿™ä¸ªè„šæœ¬ä½¿ç”¨çš„æ˜¯IPåˆ†æµçš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰åœ¨GFWåˆ—è¡¨é‡Œçš„ç½‘ç«™æ‰ä¼šä½¿ç”¨VPSï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚\n\nå‚è€ƒ\n\nhttp://www.miui.com/forum.php?mod=viewthread&tid=4133822&extra=\n\n\n\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"Ubuntu å®‰è£… Shadowsocks å®ç°ç§‘å­¦ä¸Šç½‘","url":"/2017/03/26/Ubuntu_Install_ShadowSocks/","content":"\n***\n\n### å¼€å¤´\nçœ‹äº†shadowsocksçš„å„ç§å®‰è£…éƒ¨ç½²æ•™ç¨‹ï¼Œå› ä¸ºå¯¹äºlinuxä¸ç†Ÿï¼Œæ‰€ä»¥é‡åˆ°å¾ˆå¤šå‘ï¼Œè‡ªå·±ç•™ä¸ªç¬”è®°åœ¨è¿™é‡Œ\n### æ›´æ–°\nä½¿ç”¨Ubuntu 14.04 ç‰ˆæœ¬å·²ç»ä¸æ˜¯å¿…é¡»çš„ï¼Œå½“æ—¶ä¸»è¦æ˜¯å› ä¸ºåœ¨æœ€æ–°ç‰ˆæœ¬Ubuntuå†…æ ¸æ²¡åœ¨é”é€Ÿæ”¯æŒåˆ—è¡¨ä¸­ï¼Œç°åœ¨å‘ç°ä¸€ç§æ–°çš„æ‹¥å¡åŠ é€Ÿç®—æ³•BBRï¼ˆGoogleå¼€å‘çš„ï¼‰ï¼Œè€Œä¸”é»˜è®¤åœ¨æœ€æ–°çš„Ubuntuå†…æ ¸4.11å·²ç»é›†æˆè¿›å»ï¼Œæ‰€ä»¥åªéœ€è¦å¼€å¯å³å¯ï¼Œå†ä¹Ÿä¸ç”¨è€ƒè™‘å·²ç»ä¸æä¾›å®˜æ–¹æœåŠ¡çš„é”é€Ÿã€‚å®Œæˆå®‰è£…ShadowSocks åï¼Œå‚è§ç§‹æ°´é€¸å†°çš„ã€Š[ä¸€é”®å®‰è£…æœ€æ–°å†…æ ¸å¹¶å¼€å¯ BBR è„šæœ¬](https://teddysun.com/489.html)ã€‹ã€‚\n### ç¯å¢ƒå‡†å¤‡\nOS: \n- Ubuntu 14.04 X64 LTS\n- Kernel Linux 3.13.0-112-generic\n\n> ä¼¼ä¹ ä»16.04 å¼€å§‹ä»¥ä¸Šå·²ç»å…¨é¢ä½¿ç”¨[systemd](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)æ¥å¯åŠ¨ç®¡ç†å®ˆæŠ¤è¿›ç¨‹ï¼Œè€Œä¸æ˜¯åƒä¼ ç»Ÿåœ¨init.dæ¥å¯åŠ¨ã€‚\n\n\nVPS å¹³å°: Vultr\nè¿œç¨‹æ§åˆ¶å®¢æˆ·ç«¯: XShell æˆ–è€… Putty\n\n### è¿œç¨‹è¿æ¥ ubuntu\nç•¥\n### Shadowsocks å®‰è£…\n\nå®‰è£…pytyon çš„pipç®¡ç†ç¨‹åºï¼Œå› ä¸ºshadowsocksæ˜¯ç”±pythonå†™çš„\n```\n$ apt-get install python-pip\n```\n\nå®‰è£…shadowsocksç¨‹åº (æ–¹å¼ä¸€)\n\n```\n$ sudo pip install shadowsocks\n```\nå®‰è£…shadowsocksç¨‹åº (æ–¹å¼äºŒ), pip ä¸Šçš„ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬)\n\n```\n# å®‰è£…yum\n# å®‰è£…Python setuptools\n$ sudo apt-get install python-setuptools\n# ä»githubä¸Šå®‰è£…shadowsocks\n$ pip install git+https://github.com/shadowsocks/shadowsocks.git@master\n```\n\n\næŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\n\n```\n$ ssserver\n$ whereis ssserver\n```\n\nåˆ›å»ºæœåŠ¡å™¨é…ç½®æ–‡ä»¶(å¤šç«¯å£)\n\n```\n$ vi  /etc/shadowsocks.json\n```\n\n\nvim çš„å‘½ä»¤: æŒ‰ \"i\" è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œç¼–è¾‘åæŒ‰ \"esc\" é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œ è¾“å…¥ \":wq\" ä¿å­˜é€€å‡ºvi\n```\n{\n    \"server\":\"0.0.0.0\",\n    \"local_address\": \"127.0.0.1\",\n    \"local_port\":1080,\n    \"port_password\": {\n         \"443\": \"password1\",\n         \"8888\": \"password2\"\n     },\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\",\n    \"fast_open\": false\n}\n```\n\nå¯åŠ¨æœåŠ¡ï¼Œåå°è¿è¡Œ\n\n```\n$ ssserver -c /etc/shadowsocks.json -d start\n```\næ­¤æ—¶å¯é…ç½®å¥½å®¢æˆ·ç«¯shadowsocksæ£€æµ‹æ˜¯å¦å¯ä»¥è®¿é—®\n\n### è®¾ç½®å¼€æœºå¯åŠ¨(é’ˆå¯¹16.10ä»¥ä¸‹ç‰ˆæœ¬)\n\n```\n$ vim /etc/rc.local\n```\nåœ¨exit 0ä»¥å‰æ’å…¥å¼€æœºæ‰§è¡Œå‘½ä»¤\n\n```\n$ ssserver -c /etc/shadowsocks.json -d start\n```\n\n### ShadowSocks æ“ä½œå‘½ä»¤\næŸ¥çœ‹æ—¥å¿—\n\n```\n$ sudo less /var/log/shadowsocks.log\n```\n\n### é˜²ç«å¢™ç«¯å£å¼€æ”¾\n```\nsudo iptables -I INPUT -p tcp --dport 8888 -j ACCEPT\n```\nä¸ºé˜²æ­¢rebootåiptableé‡ç½®ï¼Œéœ€è¦ä¸‹é¢å‘½ä»¤\n```\nsudo apt-get install iptables-persistent\n\nsudo /etc/init.d/iptables-persistent save \nsudo /etc/init.d/iptables-persistent reload\n##æˆ–è€…\nsudo netfilter-persistent save\nsudo netfilter-persistent reload\n```\n\n### BBR åŠ é€Ÿ\nä¸€å®šè¦ä½¿ç”¨åŠ é€Ÿï¼Œä½¿ç”¨å’Œä¸ä½¿ç”¨çš„å·®åˆ«æ˜¯ï¼šæ²¡ä½¿ç”¨æ—¶æŸ¥çœ‹youtube 720P çœ‹ä¸äº†ï¼Œé€Ÿåº¦åªæœ‰åŒºåŒº6ã€70KBçš„é€Ÿåº¦ï¼Œä½¿ç”¨åç¬é—´7ã€800ç”šè‡³1mï¼Œå‘æŒ¥å‡ºäº†å¸¦å®½çš„æœ€å¤§å¨åŠ›ï¼\nhttps://www.linuxbabe.com/ubuntu/enable-google-tcp-bbr-ubuntu\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"ä»wordpressä¸»é¢˜ä¸­çœ‹CSSè®¾è®¡","url":"/2017/03/11/Learn_CSS_from_wordpress_theme/","content":"\n***\n\n### å†™åœ¨å¼€å¤´\næœ€è¿‘æƒ³åšä¸ªä¸ªäººåšå®¢ï¼Œçœ‹ä¸Šäº†wordpressçš„[twentyfifteen](https://wordpress.org/themes/twentyfifteen/)æ¨¡æ¿é¡µ(2015é»˜è®¤æ¨¡æ¿)ï¼Œçœ‹ä¸Šäº†å°±æƒ³æ‹¥æœ‰ï¼Œè€Œæ‹¥æœ‰æ˜¯éœ€è¦ä»˜å‡ºä»£ä»·çš„ï¼Œäºæ˜¯å°±æ‰å…¥äº†æºç å‘é‡Œï¼Œçˆ¬äº†ä¸€å‘¨æ‰ç®—å‹‰å¼ºçˆ¬å‡ºæ¥ï¼Œå›è¿‡å¤´æ¥è§‰å¾—è¿™ä¸ªå‘é‡Œè¿˜æ˜¯æœ‰å¾ˆå¤šæœ‰è¥å…»çš„ä¸œè¥¿ï¼Œæ¯•ç«Ÿæ˜¯å¤§å…¬å¸ï¼Œæ‰€æœ‰æ ‡å‡†éƒ½æ˜¯æœ€æ–°çš„ï¼Œæ‰€ä»¥æƒ³æ€»ç»“ä¸‹å­¦åˆ°çš„ä¸œè¥¿ï¼Œæ–¹ä¾¿ä»¥åä½¿ç”¨(æŒç»­æ›´æ–°ä¸­)\n\n***\n##  Responsive page (å¹²è´§éƒ½å†™åœ¨æœ€å‰é¢)\nåœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼Œresponsiveçš„é¡µé¢æ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä»¬çŸ¥é“css3é‡Œçš„media å¯ä»¥å¸®æˆ‘ä»¬å®ç°ä¸åŒè®¾å¤‡å°ºå¯¸çš„ä¸åŒæ˜¾ç¤ºæ–¹å¼ï¼Œæ‰€ä»¥è®¾å¤‡å°ºå¯¸çš„ä¸€ä¸ªç•Œå®šå€¼å°±æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªé¦–è¦è€ƒè™‘é—®é¢˜ï¼Œå…¶ä»–ä¸å¤šè¯´ï¼Œçœ‹çœ‹äººå®¶æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š\n\n```\n/**\n * 16.1 Mobile Large 620px\n */\n @media screen and (min-width: 38.75rem) {\n}\n/**\n * 16.2 Tablet Small 740px\n */\n\n@media screen and (min-width: 46.25rem){\n}\n\n/**\n * 16.3 Tablet Large 880px\n */\n @media screen and (min-width: 55rem){}\n\n/**\n * 16.4 Desktop Small 955px\n */\n \n@media screen and (min-width: 59.6875rem){\n}\n/**\n * 16.5 Desktop Medium 1100px\n */\n \n@media screen and (min-width: 68.75rem){\n}\n/**\n * 16.6 Desktop Large 1240px\n */\n@media screen and (min-width: 77.5rem){\n}\n```\nå…¶ä¸­åœ¨mockçš„è¿‡ç¨‹ä¸­å‘ç°å‡ ä¸ªtips\n* ä¸Šé¢åªæœ‰min-widthï¼Œæ²¡æœ‰è®¾ç½®max-widthï¼Œè¿™æ˜¯ä¸€ä¸ªçµæ´»çš„è®¾è®¡ï¼Œæ²¡æœ‰max-widthå°±è¯´æ˜ä»–å¯ä»¥ä»æœ€å°æ»¡è¶³æ¡ä»¶çš„mediaå¼€å§‹ï¼Œåªè¦æ»¡è¶³æ¡ä»¶ï¼Œéƒ½ä¼šè¢«æ‰§è¡Œåˆ°ï¼Œè€Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠå…±æœ‰çš„éƒ¨åˆ†å†™åœ¨æœ€å°å°ºå¯¸é‡Œï¼Œæˆ–è€…æ”¾æœ€å¤–é¢ï¼Œç„¶ååœ¨éœ€è¦æ›´æ”¹çš„éƒ¨åˆ†å±æ€§åœ¨åœ¨éœ€è¦çš„å°ºå¯¸ä¸­æ›´æ”¹ã€‚ç®€å•ä¸¾ä¸ªæ —å­ï¼š\næœ‰ä¸ªå¯¼èˆªæ ï¼Œéœ€è¦åœ¨ç§»åŠ¨è®¾å¤‡çš„æ—¶å€™éšè—ï¼Œåœ¨æ¡Œé¢æµè§ˆå™¨ä¸­æ˜¾ç¤ºæ‰€æœ‰ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è¿™æ ·:\n![](https://images.troyyang.com/2017-03-03-css-media-query.jpg)\n\n***\n\n##  å¦‚ä½•åœ¨cssæ–‡ä»¶ä¸­ä½¿ç”¨fontawesomeå›¾æ ‡å­—ä½“åº“\næˆ‘ä»¬çŸ¥é“çš„æ˜¯è¦åœ¨é¡µé¢ä¸­ä½¿ç”¨fontawesomeçš„å›¾æ ‡å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨htmlä»£ç ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç \n```\n<i class=\"fa fa-address-book-o\" aria-hidden=\"true\"></i><a href=\"#\">åˆ—è¡¨</a>\n```\nå…¶ä¸­faä»£è¡¨çš„æ˜¯é»˜è®¤å›¾æ ‡å¤§å°ï¼Œå¦‚æœæƒ³æ”¹å˜å›¾æ ‡çš„å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨é›†æˆçš„fa-lg(æ”¾å¤§33%),fa-2x, fa-3x, fa-4x, fa-5xã€‚æ‰€ä»¥ç”¨èµ·æ¥å¾ˆçˆ½æ˜¯å§ã€‚\n\nä»wordpressä¸­(å…¶å®ä»–æ²¡æœ‰ç”¨fontawesomeå›¾æ ‡åº“ï¼Œè€Œæ˜¯ä»–ä»¬è‡ªå·±çš„genericonsåº“)ï¼Œæˆ‘çœ‹åˆ°äº†ä»–æ˜¯åœ¨cssä¸­å®šä¹‰è¿™äº›å›¾æ ‡çš„ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ¯æ¬¡ä½¿ç”¨å›¾æ ‡éƒ½éœ€è¦æ–°æ·»åŠ ä¸€ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯å¾ˆç´¯èµ˜ï¼Œè€Œä¸”é‡å¤å‘¢ï¼Œè¿™ä¸ç¬¦åˆç¨‹åºè®¾è®¡çš„å¯å¤ç”¨åŸåˆ™å•Šï¼æ‰€ä»¥å¾ˆè‡ªç„¶çš„å°±æƒ³åˆ°ä½¿ç”¨class,è¿™æ ·å°±å¯ä»¥å¾ˆè½»æ¾çš„åœ¨ä¸€äº›å…ƒç´ ä¹‹å‰å€ŸåŠ©äºä¼ªç±»:beforeåŠ ä¸Šcontentç¥å™¨è‡ªåŠ¨åŠ å…¥ï¼Œè€Œæˆ‘éœ€è¦åšçš„ä»…ä»…æ˜¯åœ¨aæ ‡ç­¾åŠ ä¸Šä¸€ä¸ªclassåç§°ã€‚\n\nå…¶ä¸­å¾ˆé‡è¦çš„ä¸€æ­¥æ˜¯å¼•å…¥è¿™ä¸ªæ–°font-family FontAwesomeã€‚\nå®ç°å¦‚ä¸‹ï¼š\n\n```\n[class*=\"font-asesome-icon\"]:before {\n  font-family: FontAwesome;\n  font-weight: normal;\n  font-style: normal;\n  display: inline-block;\n}\n\n.secondary-toggle:before {\n    color: #333;\n\tfont-size: 2rem;\n    content: \"\\f0c9\";\n    line-height: 40px;\n    width: 40px;\n}\n\n<a class=\"font-asesome-icon secondary-toggle\" href=\"#\">åˆ—è¡¨</a>\n```\nå…¶ä¸­contentä»£è¡¨çš„æ˜¯è¯¥å›¾æ ‡çš„Unicode, æ¯ä¸ªfontawesomeå›¾æ ‡åº“é‡Œéƒ½èƒ½æŸ¥åˆ°å…¶å¯¹åº”çš„unicodeã€‚\nä¸Šé¢çš„æ˜¯é—®é¢˜ä¸€ï¼Œè¿˜æœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘å¦‚ä½•æ”¹å˜å›¾æ ‡çš„å¤§å°å‘¢ï¼Ÿå“ˆå“ˆï¼Œæˆ‘ä»¬å›æƒ³ä¸€ä¸‹è¿™æ˜¯ä»€ä¹ˆåº“ï¼Ÿå¯¹ï¼Œå­—ä½“åº“ï¼Œæ‰€ä»¥ï¼Œæ—¢ç„¶æ˜¯å­—ä½“ï¼Œæ”¹å˜å¤§å°ä¸å°±æ˜¯font-sizeï¼æˆ‘ä»¬ä¸Šé¢æ˜¯font-size:2remï¼Œä¹Ÿå°±ç­‰äº2*16pxï¼ˆremæ˜¯ä»€ä¹ˆé¬¼ä¸€ä¼šå†è¯´ï¼‰ï¼Œå…¶å®ä»”ç»†æŸ¥çœ‹fontawesome[å®˜ç½‘](http://fontawesome.io/examples/)ï¼Œç„¶åä»»é€‰ä¸€ä¸ªå›¾æ ‡ï¼Œç‚¹å‡»view cssï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä»–çš„å®ç°æºç å¦‚ä¸‹:\n\n```\n.@{fa-css-prefix}-lg {\n  font-size: (4em / 3);\n  line-height: (3em / 4);\n  vertical-align: -15%;\n}\n.@{fa-css-prefix}-2x { font-size: 2em; }\n.@{fa-css-prefix}-3x { font-size: 3em; }\n.@{fa-css-prefix}-4x { font-size: 4em; }\n.@{fa-css-prefix}-5x { font-size: 5em; }\n```\n\n## px, em, rem\n\n### åŸºæœ¬æ¦‚å¿µ\n**px (pixelï¼Œåƒç´ )**ï¼šæ˜¯ä¸€ä¸ªè™šæ‹Ÿé•¿åº¦å•ä½ï¼Œæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„æ•°å­—åŒ–å›¾åƒé•¿åº¦å•ä½ï¼Œå¦‚æœpxè¦æ¢ç®—æˆç‰©ç†é•¿åº¦ï¼Œéœ€è¦æŒ‡å®šç²¾åº¦DPI(Dots Per Inchï¼Œæ¯è‹±å¯¸åƒç´ æ•°)ï¼Œåœ¨æ‰«ææ‰“å°æ—¶ä¸€èˆ¬éƒ½æœ‰DPIå¯é€‰ã€‚Windowsç³»ç»Ÿé»˜è®¤æ˜¯96dpiï¼ŒAppleç³»ç»Ÿé»˜è®¤æ˜¯72dpi\n\n**em** (ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºå½“å‰å¯¹è±¡å†…æ–‡æœ¬çš„å­—ä½“å°ºå¯¸)ï¼šæ˜¯ä¸€ä¸ªç›¸å¯¹é•¿åº¦å•ä½ï¼Œæœ€åˆæ˜¯æŒ‡å­—æ¯Mçš„å®½åº¦ï¼Œæ•…åemã€‚ç°æŒ‡çš„æ˜¯å­—ç¬¦å®½åº¦çš„å€æ•°ï¼Œç”¨æ³•ç±»ä¼¼ç™¾åˆ†æ¯”ï¼Œå¦‚ï¼š0.8em, 1.2em,2emç­‰ã€‚é€šå¸¸1em=16px\n\n**rem**ï¼ˆroot emï¼Œæ ¹emï¼‰(ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºæ ¹èŠ‚ç‚¹```html```çš„å­—ä½“å°ºå¯¸)\n\n\nåœ¨wordpressåšå®¢ä¸­çœ‹åˆ°ä½¿ç”¨äº†```rem```ï¼Œä¹‹å‰åªçŸ¥é“```em```ï¼ŒæŸ¥çœ‹äº†[ç›¸å…³èµ„æ–™](https://webdesign.tutsplus.com/tutorials/comprehensive-guide-when-to-use-em-vs-rem--cms-23984)åï¼Œå­¦ä¹ åˆ°äº†:\n\n- rem å’Œ em éƒ½æ˜¯æ ¹æ®ä½ è®¾è®¡çš„fontsizeå€¼æœ€ç»ˆè¢«æµè§ˆå™¨è§£é‡Šæˆpixelçš„\n- em çš„å€¼æ˜¯æ ¹æ®å½“å‰ä»–ååœ¨çš„å…ƒç´ fontsizeå†³å®šçš„\n- remçš„å€¼æ˜¯ç”±htmlæ ¹èŠ‚ç‚¹çš„fontsizeå†³å®šçš„\n- emçš„å€¼ä¼šè¢«çˆ¶å…ƒç´ çš„fontsizeç»§æ‰¿åœ¨è®¡ç®—(é™¤éä½¿ç”¨pixelæ˜¾ç¤ºçš„è®¾ç½®äº†å½“å‰å…ƒç´ çš„å›ºå®šfontsizeå¤§å°)\n- remçš„å€¼ä¼šè¢«åœ¨æµè§ˆå™¨è®¾ç½®ä¸­è®¾ç½®çš„fontsizeå¤§å°å½±å“(é™¤éåœ¨htmlæ ¹èŠ‚ç‚¹ä¸‹ä½¿ç”¨äº†pixelå»å›ºå®šfontsizeå¤§å°)\n- æœ‰æ—¶ä¸ºäº†æ¢ç®—æ–¹ä¾¿ï¼Œç»å¸¸ä¸ºbodyè®¾ç½®fontsize ä¸º65%\n\n### å¦‚ä½•é€‰æ‹© \n- ä½¿ç”¨rem: åœ¨æ–‡æœ¬å¤§å°å€¼çš„è®¾ç½®ä¸Šä½¿ç”¨\n- ä½¿ç”¨remæˆ–è€…px: åœ¨media queiesä¸­ä½¿ç”¨\n- åœ¨å’Œæ–‡æœ¬å¸ƒå±€ç›¸å…³ä¸­ï¼Œå¯ä½¿ç”¨emï¼Œæ¯”å¦‚æŸäº›æ–‡æœ¬çš„padding, margin å¸ƒå±€ã€‚é˜²æ­¢å› æ–‡æœ¬å¤§å°å˜åŒ–å¯¼è‡´å¸ƒå±€å˜å¾—æ··ä¹±\n- åœ¨å¤šåˆ—å¸ƒå±€ä¸­ï¼Œä¸è¦ä½¿ç”¨emæˆ–è€…remæ¥ä½œä¸ºå®½åº¦ï¼Œè€Œä½¿ç”¨ ```%```ä»£æ›¿\n\n","tags":["css"],"categories":["webå‰ç«¯"]}]